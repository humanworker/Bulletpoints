(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function gv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yp={exports:{}},Cl={},Xp={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ks=Symbol.for("react.element"),yv=Symbol.for("react.portal"),_v=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),wv=Symbol.for("react.provider"),Tv=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),Av=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),Hf=Symbol.iterator;function Rv(t){return t===null||typeof t!="object"?null:(t=Hf&&t[Hf]||t["@@iterator"],typeof t=="function"?t:null)}var Jp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zp=Object.assign,em={};function ii(t,e,n){this.props=t,this.context=e,this.refs=em,this.updater=n||Jp}ii.prototype.isReactComponent={};ii.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ii.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tm(){}tm.prototype=ii.prototype;function gc(t,e,n){this.props=t,this.context=e,this.refs=em,this.updater=n||Jp}var yc=gc.prototype=new tm;yc.constructor=gc;Zp(yc,ii.prototype);yc.isPureReactComponent=!0;var Kf=Array.isArray,nm=Object.prototype.hasOwnProperty,_c={current:null},rm={key:!0,ref:!0,__self:!0,__source:!0};function im(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)nm.call(e,r)&&!rm.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),f=0;f<a;f++)u[f]=arguments[f+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ks,type:t,key:s,ref:l,props:i,_owner:_c.current}}function Pv(t,e){return{$$typeof:ks,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ks}function kv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wf=/\/+/g;function wa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kv(""+t.key):e.toString(36)}function Ro(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ks:case yv:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+wa(l,0):r,Kf(i)?(n="",t!=null&&(n=t.replace(Wf,"$&/")+"/"),Ro(i,e,n,"",function(f){return f})):i!=null&&(vc(i)&&(i=Pv(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Wf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Kf(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+wa(s,a);l+=Ro(s,e,n,u,i)}else if(u=Rv(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+wa(s,a++),l+=Ro(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function io(t,e,n){if(t==null)return t;var r=[],i=0;return Ro(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Vv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rt={current:null},Po={transition:null},Dv={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Po,ReactCurrentOwner:_c};function sm(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:io,forEach:function(t,e,n){io(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return io(t,function(){e++}),e},toArray:function(t){return io(t,function(e){return e})||[]},only:function(t){if(!vc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=ii;Y.Fragment=_v;Y.Profiler=Ev;Y.PureComponent=gc;Y.StrictMode=vv;Y.Suspense=Sv;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dv;Y.act=sm;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zp({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=_c.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)nm.call(e,u)&&!rm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var f=0;f<u;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:ks,type:t.type,key:i,ref:s,props:r,_owner:l}};Y.createContext=function(t){return t={$$typeof:Tv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wv,_context:t},t.Consumer=t};Y.createElement=im;Y.createFactory=function(t){var e=im.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:Iv,render:t}};Y.isValidElement=vc;Y.lazy=function(t){return{$$typeof:Cv,_payload:{_status:-1,_result:t},_init:Vv}};Y.memo=function(t,e){return{$$typeof:Av,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Po.transition;Po.transition={};try{t()}finally{Po.transition=e}};Y.unstable_act=sm;Y.useCallback=function(t,e){return rt.current.useCallback(t,e)};Y.useContext=function(t){return rt.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return rt.current.useDeferredValue(t)};Y.useEffect=function(t,e){return rt.current.useEffect(t,e)};Y.useId=function(){return rt.current.useId()};Y.useImperativeHandle=function(t,e,n){return rt.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return rt.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return rt.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return rt.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return rt.current.useReducer(t,e,n)};Y.useRef=function(t){return rt.current.useRef(t)};Y.useState=function(t){return rt.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return rt.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return rt.current.useTransition()};Y.version="18.3.1";Xp.exports=Y;var ie=Xp.exports;const Ec=gv(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv=ie,Nv=Symbol.for("react.element"),Ov=Symbol.for("react.fragment"),Lv=Object.prototype.hasOwnProperty,Mv=xv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fv={key:!0,ref:!0,__self:!0,__source:!0};function om(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Lv.call(e,r)&&!Fv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Nv,type:t,key:s,ref:l,props:i,_owner:Mv.current}}Cl.Fragment=Ov;Cl.jsx=om;Cl.jsxs=om;Yp.exports=Cl;var Z=Yp.exports,ru={},lm={exports:{}},mt={},am={exports:{}},um={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var G=B.length;B.push(K);e:for(;0<G;){var pe=G-1>>>1,le=B[pe];if(0<i(le,K))B[pe]=K,B[G]=le,G=pe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],G=B.pop();if(G!==K){B[0]=G;e:for(var pe=0,le=B.length,Te=le>>>1;pe<Te;){var Wt=2*(pe+1)-1,qt=B[Wt],Qt=Wt+1,Gt=B[Qt];if(0>i(qt,G))Qt<le&&0>i(Gt,qt)?(B[pe]=Gt,B[Qt]=G,pe=Qt):(B[pe]=qt,B[Wt]=G,pe=Wt);else if(Qt<le&&0>i(Gt,G))B[pe]=Gt,B[Qt]=G,pe=Qt;else break e}}return K}function i(B,K){var G=B.sortIndex-K.sortIndex;return G!==0?G:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var u=[],f=[],d=1,y=null,v=3,R=!1,k=!1,D=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=B)r(f),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(f)}}function N(B){if(D=!1,C(B),!k)if(n(u)!==null)k=!0,Kt(z);else{var K=n(f);K!==null&&Ct(N,K.startTime-B)}}function z(B,K){k=!1,D&&(D=!1,I(m),m=-1),R=!0;var G=v;try{for(C(K),y=n(u);y!==null&&(!(y.expirationTime>K)||B&&!S());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,v=y.priorityLevel;var le=pe(y.expirationTime<=K);K=t.unstable_now(),typeof le=="function"?y.callback=le:y===n(u)&&r(u),C(K)}else r(u);y=n(u)}if(y!==null)var Te=!0;else{var Wt=n(f);Wt!==null&&Ct(N,Wt.startTime-K),Te=!1}return Te}finally{y=null,v=G,R=!1}}var U=!1,T=null,m=-1,_=5,g=-1;function S(){return!(t.unstable_now()-g<_)}function A(){if(T!==null){var B=t.unstable_now();g=B;var K=!0;try{K=T(!0,B)}finally{K?w():(U=!1,T=null)}}else U=!1}var w;if(typeof E=="function")w=function(){E(A)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,At=be.port2;be.port1.onmessage=A,w=function(){At.postMessage(null)}}else w=function(){x(A,0)};function Kt(B){T=B,U||(U=!0,w())}function Ct(B,K){m=x(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||R||(k=!0,Kt(z))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var G=v;v=K;try{return B()}finally{v=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=v;v=B;try{return K()}finally{v=G}},t.unstable_scheduleCallback=function(B,K,G){var pe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?pe+G:pe):G=pe,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=G+le,B={id:d++,callback:K,priorityLevel:B,startTime:G,expirationTime:le,sortIndex:-1},G>pe?(B.sortIndex=G,e(f,B),n(u)===null&&B===n(f)&&(D?(I(m),m=-1):D=!0,Ct(N,G-pe))):(B.sortIndex=le,e(u,B),k||R||(k=!0,Kt(z))),B},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(B){var K=v;return function(){var G=v;v=K;try{return B.apply(this,arguments)}finally{v=G}}}})(um);am.exports=um;var Uv=am.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv=ie,pt=Uv;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cm=new Set,ts={};function fr(t,e){Hr(t,e),Hr(t+"Capture",e)}function Hr(t,e){for(ts[t]=e,t=0;t<e.length;t++)cm.add(e[t])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iu=Object.prototype.hasOwnProperty,Bv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qf={},Qf={};function jv(t){return iu.call(Qf,t)?!0:iu.call(qf,t)?!1:Bv.test(t)?Qf[t]=!0:(qf[t]=!0,!1)}function bv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $v(t,e,n,r){if(e===null||typeof e>"u"||bv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Be[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Be[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Be[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Be[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Be[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Be[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Be[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Be[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Be[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var wc=/[\-:]([a-z])/g;function Tc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wc,Tc);Be[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wc,Tc);Be[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wc,Tc);Be[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Be[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});Be.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Be[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ic(t,e,n,r){var i=Be.hasOwnProperty(e)?Be[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($v(e,n,i,r)&&(n=null),r||i===null?jv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dn=zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Sr=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),su=Symbol.for("react.profiler"),hm=Symbol.for("react.provider"),fm=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),ou=Symbol.for("react.suspense"),lu=Symbol.for("react.suspense_list"),Cc=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),dm=Symbol.for("react.offscreen"),Gf=Symbol.iterator;function Ai(t){return t===null||typeof t!="object"?null:(t=Gf&&t[Gf]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,Ta;function Oi(t){if(Ta===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ta=e&&e[1]||""}return`
`+Ta+t}var Ia=!1;function Sa(t,e){if(!t||Ia)return"";Ia=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,a=s.length-1;1<=l&&0<=a&&i[l]!==s[a];)a--;for(;1<=l&&0<=a;l--,a--)if(i[l]!==s[a]){if(l!==1||a!==1)do if(l--,a--,0>a||i[l]!==s[a]){var u=`
`+i[l].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=l&&0<=a);break}}}finally{Ia=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oi(t):""}function Hv(t){switch(t.tag){case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 2:case 15:return t=Sa(t.type,!1),t;case 11:return t=Sa(t.type.render,!1),t;case 1:return t=Sa(t.type,!0),t;default:return""}}function au(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ar:return"Fragment";case Sr:return"Portal";case su:return"Profiler";case Sc:return"StrictMode";case ou:return"Suspense";case lu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fm:return(t.displayName||"Context")+".Consumer";case hm:return(t._context.displayName||"Context")+".Provider";case Ac:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cc:return e=t.displayName||null,e!==null?e:au(t.type)||"Memo";case _n:e=t._payload,t=t._init;try{return au(t(e))}catch{}}return null}function Kv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return au(e);case 8:return e===Sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wv(t){var e=pm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oo(t){t._valueTracker||(t._valueTracker=Wv(t))}function mm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $o(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uu(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gm(t,e){e=e.checked,e!=null&&Ic(t,"checked",e,!1)}function cu(t,e){gm(t,e);var n=Mn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hu(t,e.type,n):e.hasOwnProperty("defaultValue")&&hu(t,e.type,Mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hu(t,e,n){(e!=="number"||$o(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Li=Array.isArray;function Mr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Li(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mn(n)}}function ym(t,e){var n=Mn(e.value),r=Mn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _m(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function du(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_m(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lo,vm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lo=lo||document.createElement("div"),lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ns(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qv=["Webkit","ms","Moz","O"];Object.keys(bi).forEach(function(t){qv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bi[e]=bi[t]})});function Em(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bi.hasOwnProperty(t)&&bi[t]?(""+e).trim():e+"px"}function wm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Em(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Qv=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pu(t,e){if(e){if(Qv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function mu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=null;function Rc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yu=null,Fr=null,Ur=null;function ed(t){if(t=xs(t)){if(typeof yu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Dl(e),yu(t.stateNode,t.type,e))}}function Tm(t){Fr?Ur?Ur.push(t):Ur=[t]:Fr=t}function Im(){if(Fr){var t=Fr,e=Ur;if(Ur=Fr=null,ed(t),e)for(t=0;t<e.length;t++)ed(e[t])}}function Sm(t,e){return t(e)}function Am(){}var Aa=!1;function Cm(t,e,n){if(Aa)return t(e,n);Aa=!0;try{return Sm(t,e,n)}finally{Aa=!1,(Fr!==null||Ur!==null)&&(Am(),Im())}}function rs(t,e){var n=t.stateNode;if(n===null)return null;var r=Dl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var _u=!1;if(on)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){_u=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{_u=!1}function Gv(t,e,n,r,i,s,l,a,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var $i=!1,Ho=null,Ko=!1,vu=null,Yv={onError:function(t){$i=!0,Ho=t}};function Xv(t,e,n,r,i,s,l,a,u){$i=!1,Ho=null,Gv.apply(Yv,arguments)}function Jv(t,e,n,r,i,s,l,a,u){if(Xv.apply(this,arguments),$i){if($i){var f=Ho;$i=!1,Ho=null}else throw Error(M(198));Ko||(Ko=!0,vu=f)}}function dr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function td(t){if(dr(t)!==t)throw Error(M(188))}function Zv(t){var e=t.alternate;if(!e){if(e=dr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return td(i),t;if(s===r)return td(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,a=i.child;a;){if(a===n){l=!0,n=i,r=s;break}if(a===r){l=!0,r=i,n=s;break}a=a.sibling}if(!l){for(a=s.child;a;){if(a===n){l=!0,n=s,r=i;break}if(a===r){l=!0,r=s,n=i;break}a=a.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Pm(t){return t=Zv(t),t!==null?km(t):null}function km(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=km(t);if(e!==null)return e;t=t.sibling}return null}var Vm=pt.unstable_scheduleCallback,nd=pt.unstable_cancelCallback,eE=pt.unstable_shouldYield,tE=pt.unstable_requestPaint,Se=pt.unstable_now,nE=pt.unstable_getCurrentPriorityLevel,Pc=pt.unstable_ImmediatePriority,Dm=pt.unstable_UserBlockingPriority,Wo=pt.unstable_NormalPriority,rE=pt.unstable_LowPriority,xm=pt.unstable_IdlePriority,Rl=null,zt=null;function iE(t){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Rl,t,void 0,(t.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:lE,sE=Math.log,oE=Math.LN2;function lE(t){return t>>>=0,t===0?32:31-(sE(t)/oE|0)|0}var ao=64,uo=4194304;function Mi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var a=l&~i;a!==0?r=Mi(a):(s&=l,s!==0&&(r=Mi(s)))}else l=n&~i,l!==0?r=Mi(l):s!==0&&(r=Mi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nt(e),i=1<<n,r|=t[n],e&=~i;return r}function aE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Nt(s),a=1<<l,u=i[l];u===-1?(!(a&n)||a&r)&&(i[l]=aE(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Eu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nm(){var t=ao;return ao<<=1,!(ao&4194240)&&(ao=64),t}function Ca(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nt(e),t[e]=n}function cE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function kc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var se=0;function Om(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lm,Vc,Mm,Fm,Um,wu=!1,co=[],An=null,Cn=null,Rn=null,is=new Map,ss=new Map,En=[],hE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rd(t,e){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":is.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(e.pointerId)}}function Ri(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xs(e),e!==null&&Vc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fE(t,e,n,r,i){switch(e){case"focusin":return An=Ri(An,t,e,n,r,i),!0;case"dragenter":return Cn=Ri(Cn,t,e,n,r,i),!0;case"mouseover":return Rn=Ri(Rn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return is.set(s,Ri(is.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ss.set(s,Ri(ss.get(s)||null,t,e,n,r,i)),!0}return!1}function zm(t){var e=Xn(t.target);if(e!==null){var n=dr(e);if(n!==null){if(e=n.tag,e===13){if(e=Rm(n),e!==null){t.blockedOn=e,Um(t.priority,function(){Mm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ko(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gu=r,n.target.dispatchEvent(r),gu=null}else return e=xs(n),e!==null&&Vc(e),t.blockedOn=n,!1;e.shift()}return!0}function id(t,e,n){ko(t)&&n.delete(e)}function dE(){wu=!1,An!==null&&ko(An)&&(An=null),Cn!==null&&ko(Cn)&&(Cn=null),Rn!==null&&ko(Rn)&&(Rn=null),is.forEach(id),ss.forEach(id)}function Pi(t,e){t.blockedOn===e&&(t.blockedOn=null,wu||(wu=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,dE)))}function os(t){function e(i){return Pi(i,t)}if(0<co.length){Pi(co[0],t);for(var n=1;n<co.length;n++){var r=co[n];r.blockedOn===t&&(r.blockedOn=null)}}for(An!==null&&Pi(An,t),Cn!==null&&Pi(Cn,t),Rn!==null&&Pi(Rn,t),is.forEach(e),ss.forEach(e),n=0;n<En.length;n++)r=En[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)zm(n),n.blockedOn===null&&En.shift()}var zr=dn.ReactCurrentBatchConfig,Qo=!0;function pE(t,e,n,r){var i=se,s=zr.transition;zr.transition=null;try{se=1,Dc(t,e,n,r)}finally{se=i,zr.transition=s}}function mE(t,e,n,r){var i=se,s=zr.transition;zr.transition=null;try{se=4,Dc(t,e,n,r)}finally{se=i,zr.transition=s}}function Dc(t,e,n,r){if(Qo){var i=Tu(t,e,n,r);if(i===null)Ma(t,e,r,Go,n),rd(t,r);else if(fE(i,t,e,n,r))r.stopPropagation();else if(rd(t,r),e&4&&-1<hE.indexOf(t)){for(;i!==null;){var s=xs(i);if(s!==null&&Lm(s),s=Tu(t,e,n,r),s===null&&Ma(t,e,r,Go,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ma(t,e,r,null,n)}}var Go=null;function Tu(t,e,n,r){if(Go=null,t=Rc(r),t=Xn(t),t!==null)if(e=dr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Go=t,null}function Bm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nE()){case Pc:return 1;case Dm:return 4;case Wo:case rE:return 16;case xm:return 536870912;default:return 16}default:return 16}}var Tn=null,xc=null,Vo=null;function jm(){if(Vo)return Vo;var t,e=xc,n=e.length,r,i="value"in Tn?Tn.value:Tn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Vo=i.slice(t,1<r?1-r:void 0)}function Do(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ho(){return!0}function sd(){return!1}function gt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ho:sd,this.isPropagationStopped=sd,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),e}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=gt(si),Ds=ye({},si,{view:0,detail:0}),gE=gt(Ds),Ra,Pa,ki,Pl=ye({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ki&&(ki&&t.type==="mousemove"?(Ra=t.screenX-ki.screenX,Pa=t.screenY-ki.screenY):Pa=Ra=0,ki=t),Ra)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),od=gt(Pl),yE=ye({},Pl,{dataTransfer:0}),_E=gt(yE),vE=ye({},Ds,{relatedTarget:0}),ka=gt(vE),EE=ye({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),wE=gt(EE),TE=ye({},si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IE=gt(TE),SE=ye({},si,{data:0}),ld=gt(SE),AE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RE[t])?!!e[t]:!1}function Oc(){return PE}var kE=ye({},Ds,{key:function(t){if(t.key){var e=AE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Do(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(t){return t.type==="keypress"?Do(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Do(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VE=gt(kE),DE=ye({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=gt(DE),xE=ye({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),NE=gt(xE),OE=ye({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),LE=gt(OE),ME=ye({},Pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FE=gt(ME),UE=[9,13,27,32],Lc=on&&"CompositionEvent"in window,Hi=null;on&&"documentMode"in document&&(Hi=document.documentMode);var zE=on&&"TextEvent"in window&&!Hi,bm=on&&(!Lc||Hi&&8<Hi&&11>=Hi),ud=" ",cd=!1;function $m(t,e){switch(t){case"keyup":return UE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cr=!1;function BE(t,e){switch(t){case"compositionend":return Hm(e);case"keypress":return e.which!==32?null:(cd=!0,ud);case"textInput":return t=e.data,t===ud&&cd?null:t;default:return null}}function jE(t,e){if(Cr)return t==="compositionend"||!Lc&&$m(t,e)?(t=jm(),Vo=xc=Tn=null,Cr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bm&&e.locale!=="ko"?null:e.data;default:return null}}var bE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bE[t.type]:e==="textarea"}function Km(t,e,n,r){Tm(r),e=Yo(e,"onChange"),0<e.length&&(n=new Nc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ki=null,ls=null;function $E(t){ng(t,0)}function kl(t){var e=kr(t);if(mm(e))return t}function HE(t,e){if(t==="change")return e}var Wm=!1;if(on){var Va;if(on){var Da="oninput"in document;if(!Da){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),Da=typeof fd.oninput=="function"}Va=Da}else Va=!1;Wm=Va&&(!document.documentMode||9<document.documentMode)}function dd(){Ki&&(Ki.detachEvent("onpropertychange",qm),ls=Ki=null)}function qm(t){if(t.propertyName==="value"&&kl(ls)){var e=[];Km(e,ls,t,Rc(t)),Cm($E,e)}}function KE(t,e,n){t==="focusin"?(dd(),Ki=e,ls=n,Ki.attachEvent("onpropertychange",qm)):t==="focusout"&&dd()}function WE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kl(ls)}function qE(t,e){if(t==="click")return kl(e)}function QE(t,e){if(t==="input"||t==="change")return kl(e)}function GE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lt=typeof Object.is=="function"?Object.is:GE;function as(t,e){if(Lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!iu.call(e,i)||!Lt(t[i],e[i]))return!1}return!0}function pd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function md(t,e){var n=pd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pd(n)}}function Qm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gm(){for(var t=window,e=$o();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$o(t.document)}return e}function Mc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YE(t){var e=Gm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qm(n.ownerDocument.documentElement,n)){if(r!==null&&Mc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=md(n,s);var l=md(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XE=on&&"documentMode"in document&&11>=document.documentMode,Rr=null,Iu=null,Wi=null,Su=!1;function gd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Su||Rr==null||Rr!==$o(r)||(r=Rr,"selectionStart"in r&&Mc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wi&&as(Wi,r)||(Wi=r,r=Yo(Iu,"onSelect"),0<r.length&&(e=new Nc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rr)))}function fo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pr={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},xa={},Ym={};on&&(Ym=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Vl(t){if(xa[t])return xa[t];if(!Pr[t])return t;var e=Pr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ym)return xa[t]=e[n];return t}var Xm=Vl("animationend"),Jm=Vl("animationiteration"),Zm=Vl("animationstart"),eg=Vl("transitionend"),tg=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(t,e){tg.set(t,e),fr(e,[t])}for(var Na=0;Na<yd.length;Na++){var Oa=yd[Na],JE=Oa.toLowerCase(),ZE=Oa[0].toUpperCase()+Oa.slice(1);jn(JE,"on"+ZE)}jn(Xm,"onAnimationEnd");jn(Jm,"onAnimationIteration");jn(Zm,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(eg,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function _d(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jv(r,e,void 0,t),t.currentTarget=null}function ng(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var a=r[l],u=a.instance,f=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;_d(i,a,f),s=u}else for(l=0;l<r.length;l++){if(a=r[l],u=a.instance,f=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;_d(i,a,f),s=u}}}if(Ko)throw t=vu,Ko=!1,vu=null,t}function he(t,e){var n=e[ku];n===void 0&&(n=e[ku]=new Set);var r=t+"__bubble";n.has(r)||(rg(e,t,2,!1),n.add(r))}function La(t,e,n){var r=0;e&&(r|=4),rg(n,t,r,e)}var po="_reactListening"+Math.random().toString(36).slice(2);function us(t){if(!t[po]){t[po]=!0,cm.forEach(function(n){n!=="selectionchange"&&(e0.has(n)||La(n,!1,t),La(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[po]||(e[po]=!0,La("selectionchange",!1,e))}}function rg(t,e,n,r){switch(Bm(e)){case 1:var i=pE;break;case 4:i=mE;break;default:i=Dc}n=i.bind(null,e,n,t),i=void 0,!_u||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ma(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;l=l.return}for(;a!==null;){if(l=Xn(a),l===null)return;if(u=l.tag,u===5||u===6){r=s=l;continue e}a=a.parentNode}}r=r.return}Cm(function(){var f=s,d=Rc(n),y=[];e:{var v=tg.get(t);if(v!==void 0){var R=Nc,k=t;switch(t){case"keypress":if(Do(n)===0)break e;case"keydown":case"keyup":R=VE;break;case"focusin":k="focus",R=ka;break;case"focusout":k="blur",R=ka;break;case"beforeblur":case"afterblur":R=ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=_E;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=NE;break;case Xm:case Jm:case Zm:R=wE;break;case eg:R=LE;break;case"scroll":R=gE;break;case"wheel":R=FE;break;case"copy":case"cut":case"paste":R=IE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=ad}var D=(e&4)!==0,x=!D&&t==="scroll",I=D?v!==null?v+"Capture":null:v;D=[];for(var E=f,C;E!==null;){C=E;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,I!==null&&(N=rs(E,I),N!=null&&D.push(cs(E,N,C)))),x)break;E=E.return}0<D.length&&(v=new R(v,k,null,n,d),y.push({event:v,listeners:D}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",v&&n!==gu&&(k=n.relatedTarget||n.fromElement)&&(Xn(k)||k[ln]))break e;if((R||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,R?(k=n.relatedTarget||n.toElement,R=f,k=k?Xn(k):null,k!==null&&(x=dr(k),k!==x||k.tag!==5&&k.tag!==6)&&(k=null)):(R=null,k=f),R!==k)){if(D=od,N="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(D=ad,N="onPointerLeave",I="onPointerEnter",E="pointer"),x=R==null?v:kr(R),C=k==null?v:kr(k),v=new D(N,E+"leave",R,n,d),v.target=x,v.relatedTarget=C,N=null,Xn(d)===f&&(D=new D(I,E+"enter",k,n,d),D.target=C,D.relatedTarget=x,N=D),x=N,R&&k)t:{for(D=R,I=k,E=0,C=D;C;C=Er(C))E++;for(C=0,N=I;N;N=Er(N))C++;for(;0<E-C;)D=Er(D),E--;for(;0<C-E;)I=Er(I),C--;for(;E--;){if(D===I||I!==null&&D===I.alternate)break t;D=Er(D),I=Er(I)}D=null}else D=null;R!==null&&vd(y,v,R,D,!1),k!==null&&x!==null&&vd(y,x,k,D,!0)}}e:{if(v=f?kr(f):window,R=v.nodeName&&v.nodeName.toLowerCase(),R==="select"||R==="input"&&v.type==="file")var z=HE;else if(hd(v))if(Wm)z=QE;else{z=WE;var U=KE}else(R=v.nodeName)&&R.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(z=qE);if(z&&(z=z(t,f))){Km(y,z,n,d);break e}U&&U(t,v,f),t==="focusout"&&(U=v._wrapperState)&&U.controlled&&v.type==="number"&&hu(v,"number",v.value)}switch(U=f?kr(f):window,t){case"focusin":(hd(U)||U.contentEditable==="true")&&(Rr=U,Iu=f,Wi=null);break;case"focusout":Wi=Iu=Rr=null;break;case"mousedown":Su=!0;break;case"contextmenu":case"mouseup":case"dragend":Su=!1,gd(y,n,d);break;case"selectionchange":if(XE)break;case"keydown":case"keyup":gd(y,n,d)}var T;if(Lc)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Cr?$m(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(bm&&n.locale!=="ko"&&(Cr||m!=="onCompositionStart"?m==="onCompositionEnd"&&Cr&&(T=jm()):(Tn=d,xc="value"in Tn?Tn.value:Tn.textContent,Cr=!0)),U=Yo(f,m),0<U.length&&(m=new ld(m,t,null,n,d),y.push({event:m,listeners:U}),T?m.data=T:(T=Hm(n),T!==null&&(m.data=T)))),(T=zE?BE(t,n):jE(t,n))&&(f=Yo(f,"onBeforeInput"),0<f.length&&(d=new ld("onBeforeInput","beforeinput",null,n,d),y.push({event:d,listeners:f}),d.data=T))}ng(y,e)})}function cs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rs(t,n),s!=null&&r.unshift(cs(t,s,i)),s=rs(t,e),s!=null&&r.push(cs(t,s,i))),t=t.return}return r}function Er(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vd(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var a=n,u=a.alternate,f=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&f!==null&&(a=f,i?(u=rs(n,s),u!=null&&l.unshift(cs(n,u,a))):i||(u=rs(n,s),u!=null&&l.push(cs(n,u,a)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var t0=/\r\n?/g,n0=/\u0000|\uFFFD/g;function Ed(t){return(typeof t=="string"?t:""+t).replace(t0,`
`).replace(n0,"")}function mo(t,e,n){if(e=Ed(e),Ed(t)!==e&&n)throw Error(M(425))}function Xo(){}var Au=null,Cu=null;function Ru(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pu=typeof setTimeout=="function"?setTimeout:void 0,r0=typeof clearTimeout=="function"?clearTimeout:void 0,wd=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof wd<"u"?function(t){return wd.resolve(null).then(t).catch(s0)}:Pu;function s0(t){setTimeout(function(){throw t})}function Fa(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),os(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);os(e)}function Pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Td(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oi=Math.random().toString(36).slice(2),Ut="__reactFiber$"+oi,hs="__reactProps$"+oi,ln="__reactContainer$"+oi,ku="__reactEvents$"+oi,o0="__reactListeners$"+oi,l0="__reactHandles$"+oi;function Xn(t){var e=t[Ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ln]||n[Ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Td(t);t!==null;){if(n=t[Ut])return n;t=Td(t)}return e}t=n,n=t.parentNode}return null}function xs(t){return t=t[Ut]||t[ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Dl(t){return t[hs]||null}var Vu=[],Vr=-1;function bn(t){return{current:t}}function fe(t){0>Vr||(t.current=Vu[Vr],Vu[Vr]=null,Vr--)}function ue(t,e){Vr++,Vu[Vr]=t.current,t.current=e}var Fn={},Je=bn(Fn),lt=bn(!1),ir=Fn;function Kr(t,e){var n=t.type.contextTypes;if(!n)return Fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function at(t){return t=t.childContextTypes,t!=null}function Jo(){fe(lt),fe(Je)}function Id(t,e,n){if(Je.current!==Fn)throw Error(M(168));ue(Je,e),ue(lt,n)}function ig(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,Kv(t)||"Unknown",i));return ye({},n,r)}function Zo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,ir=Je.current,ue(Je,t),ue(lt,lt.current),!0}function Sd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=ig(t,e,ir),r.__reactInternalMemoizedMergedChildContext=t,fe(lt),fe(Je),ue(Je,t)):fe(lt),ue(lt,n)}var Zt=null,xl=!1,Ua=!1;function sg(t){Zt===null?Zt=[t]:Zt.push(t)}function a0(t){xl=!0,sg(t)}function $n(){if(!Ua&&Zt!==null){Ua=!0;var t=0,e=se;try{var n=Zt;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zt=null,xl=!1}catch(i){throw Zt!==null&&(Zt=Zt.slice(t+1)),Vm(Pc,$n),i}finally{se=e,Ua=!1}}return null}var Dr=[],xr=0,el=null,tl=0,yt=[],_t=0,sr=null,tn=1,nn="";function Qn(t,e){Dr[xr++]=tl,Dr[xr++]=el,el=t,tl=e}function og(t,e,n){yt[_t++]=tn,yt[_t++]=nn,yt[_t++]=sr,sr=t;var r=tn;t=nn;var i=32-Nt(r)-1;r&=~(1<<i),n+=1;var s=32-Nt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,tn=1<<32-Nt(e)+i|n<<i|r,nn=s+t}else tn=1<<s|n<<i|r,nn=t}function Fc(t){t.return!==null&&(Qn(t,1),og(t,1,0))}function Uc(t){for(;t===el;)el=Dr[--xr],Dr[xr]=null,tl=Dr[--xr],Dr[xr]=null;for(;t===sr;)sr=yt[--_t],yt[_t]=null,nn=yt[--_t],yt[_t]=null,tn=yt[--_t],yt[_t]=null}var dt=null,ft=null,de=!1,Dt=null;function lg(t,e){var n=Et(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ad(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ft=Pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sr!==null?{id:tn,overflow:nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Et(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dt=t,ft=null,!0):!1;default:return!1}}function Du(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xu(t){if(de){var e=ft;if(e){var n=e;if(!Ad(t,e)){if(Du(t))throw Error(M(418));e=Pn(n.nextSibling);var r=dt;e&&Ad(t,e)?lg(r,n):(t.flags=t.flags&-4097|2,de=!1,dt=t)}}else{if(Du(t))throw Error(M(418));t.flags=t.flags&-4097|2,de=!1,dt=t}}}function Cd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function go(t){if(t!==dt)return!1;if(!de)return Cd(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ru(t.type,t.memoizedProps)),e&&(e=ft)){if(Du(t))throw ag(),Error(M(418));for(;e;)lg(t,e),e=Pn(e.nextSibling)}if(Cd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ft=Pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ft=null}}else ft=dt?Pn(t.stateNode.nextSibling):null;return!0}function ag(){for(var t=ft;t;)t=Pn(t.nextSibling)}function Wr(){ft=dt=null,de=!1}function zc(t){Dt===null?Dt=[t]:Dt.push(t)}var u0=dn.ReactCurrentBatchConfig;function Vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var a=i.refs;l===null?delete a[s]:a[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function yo(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rd(t){var e=t._init;return e(t._payload)}function ug(t){function e(I,E){if(t){var C=I.deletions;C===null?(I.deletions=[E],I.flags|=16):C.push(E)}}function n(I,E){if(!t)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function i(I,E){return I=xn(I,E),I.index=0,I.sibling=null,I}function s(I,E,C){return I.index=C,t?(C=I.alternate,C!==null?(C=C.index,C<E?(I.flags|=2,E):C):(I.flags|=2,E)):(I.flags|=1048576,E)}function l(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,E,C,N){return E===null||E.tag!==6?(E=Ka(C,I.mode,N),E.return=I,E):(E=i(E,C),E.return=I,E)}function u(I,E,C,N){var z=C.type;return z===Ar?d(I,E,C.props.children,N,C.key):E!==null&&(E.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===_n&&Rd(z)===E.type)?(N=i(E,C.props),N.ref=Vi(I,E,C),N.return=I,N):(N=Uo(C.type,C.key,C.props,null,I.mode,N),N.ref=Vi(I,E,C),N.return=I,N)}function f(I,E,C,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=Wa(C,I.mode,N),E.return=I,E):(E=i(E,C.children||[]),E.return=I,E)}function d(I,E,C,N,z){return E===null||E.tag!==7?(E=nr(C,I.mode,N,z),E.return=I,E):(E=i(E,C),E.return=I,E)}function y(I,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ka(""+E,I.mode,C),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case so:return C=Uo(E.type,E.key,E.props,null,I.mode,C),C.ref=Vi(I,null,E),C.return=I,C;case Sr:return E=Wa(E,I.mode,C),E.return=I,E;case _n:var N=E._init;return y(I,N(E._payload),C)}if(Li(E)||Ai(E))return E=nr(E,I.mode,C,null),E.return=I,E;yo(I,E)}return null}function v(I,E,C,N){var z=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return z!==null?null:a(I,E,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case so:return C.key===z?u(I,E,C,N):null;case Sr:return C.key===z?f(I,E,C,N):null;case _n:return z=C._init,v(I,E,z(C._payload),N)}if(Li(C)||Ai(C))return z!==null?null:d(I,E,C,N,null);yo(I,C)}return null}function R(I,E,C,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return I=I.get(C)||null,a(E,I,""+N,z);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case so:return I=I.get(N.key===null?C:N.key)||null,u(E,I,N,z);case Sr:return I=I.get(N.key===null?C:N.key)||null,f(E,I,N,z);case _n:var U=N._init;return R(I,E,C,U(N._payload),z)}if(Li(N)||Ai(N))return I=I.get(C)||null,d(E,I,N,z,null);yo(E,N)}return null}function k(I,E,C,N){for(var z=null,U=null,T=E,m=E=0,_=null;T!==null&&m<C.length;m++){T.index>m?(_=T,T=null):_=T.sibling;var g=v(I,T,C[m],N);if(g===null){T===null&&(T=_);break}t&&T&&g.alternate===null&&e(I,T),E=s(g,E,m),U===null?z=g:U.sibling=g,U=g,T=_}if(m===C.length)return n(I,T),de&&Qn(I,m),z;if(T===null){for(;m<C.length;m++)T=y(I,C[m],N),T!==null&&(E=s(T,E,m),U===null?z=T:U.sibling=T,U=T);return de&&Qn(I,m),z}for(T=r(I,T);m<C.length;m++)_=R(T,I,m,C[m],N),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?m:_.key),E=s(_,E,m),U===null?z=_:U.sibling=_,U=_);return t&&T.forEach(function(S){return e(I,S)}),de&&Qn(I,m),z}function D(I,E,C,N){var z=Ai(C);if(typeof z!="function")throw Error(M(150));if(C=z.call(C),C==null)throw Error(M(151));for(var U=z=null,T=E,m=E=0,_=null,g=C.next();T!==null&&!g.done;m++,g=C.next()){T.index>m?(_=T,T=null):_=T.sibling;var S=v(I,T,g.value,N);if(S===null){T===null&&(T=_);break}t&&T&&S.alternate===null&&e(I,T),E=s(S,E,m),U===null?z=S:U.sibling=S,U=S,T=_}if(g.done)return n(I,T),de&&Qn(I,m),z;if(T===null){for(;!g.done;m++,g=C.next())g=y(I,g.value,N),g!==null&&(E=s(g,E,m),U===null?z=g:U.sibling=g,U=g);return de&&Qn(I,m),z}for(T=r(I,T);!g.done;m++,g=C.next())g=R(T,I,m,g.value,N),g!==null&&(t&&g.alternate!==null&&T.delete(g.key===null?m:g.key),E=s(g,E,m),U===null?z=g:U.sibling=g,U=g);return t&&T.forEach(function(A){return e(I,A)}),de&&Qn(I,m),z}function x(I,E,C,N){if(typeof C=="object"&&C!==null&&C.type===Ar&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case so:e:{for(var z=C.key,U=E;U!==null;){if(U.key===z){if(z=C.type,z===Ar){if(U.tag===7){n(I,U.sibling),E=i(U,C.props.children),E.return=I,I=E;break e}}else if(U.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===_n&&Rd(z)===U.type){n(I,U.sibling),E=i(U,C.props),E.ref=Vi(I,U,C),E.return=I,I=E;break e}n(I,U);break}else e(I,U);U=U.sibling}C.type===Ar?(E=nr(C.props.children,I.mode,N,C.key),E.return=I,I=E):(N=Uo(C.type,C.key,C.props,null,I.mode,N),N.ref=Vi(I,E,C),N.return=I,I=N)}return l(I);case Sr:e:{for(U=C.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(I,E.sibling),E=i(E,C.children||[]),E.return=I,I=E;break e}else{n(I,E);break}else e(I,E);E=E.sibling}E=Wa(C,I.mode,N),E.return=I,I=E}return l(I);case _n:return U=C._init,x(I,E,U(C._payload),N)}if(Li(C))return k(I,E,C,N);if(Ai(C))return D(I,E,C,N);yo(I,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(I,E.sibling),E=i(E,C),E.return=I,I=E):(n(I,E),E=Ka(C,I.mode,N),E.return=I,I=E),l(I)):n(I,E)}return x}var qr=ug(!0),cg=ug(!1),nl=bn(null),rl=null,Nr=null,Bc=null;function jc(){Bc=Nr=rl=null}function bc(t){var e=nl.current;fe(nl),t._currentValue=e}function Nu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Br(t,e){rl=t,Bc=Nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function It(t){var e=t._currentValue;if(Bc!==t)if(t={context:t,memoizedValue:e,next:null},Nr===null){if(rl===null)throw Error(M(308));Nr=t,rl.dependencies={lanes:0,firstContext:t}}else Nr=Nr.next=t;return e}var Jn=null;function $c(t){Jn===null?Jn=[t]:Jn.push(t)}function hg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$c(e)):(n.next=i.next,i.next=n),e.interleaved=n,an(t,r)}function an(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vn=!1;function Hc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,an(t,n)}return i=r.interleaved,i===null?(e.next=e,$c(r)):(e.next=i.next,i.next=e),r.interleaved=e,an(t,n)}function xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kc(t,n)}}function Pd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function il(t,e,n,r){var i=t.updateQueue;vn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,f=u.next;u.next=null,l===null?s=f:l.next=f,l=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==l&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;l=0,d=f=u=null,a=s;do{var v=a.lane,R=a.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:R,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,D=a;switch(v=e,R=n,D.tag){case 1:if(k=D.payload,typeof k=="function"){y=k.call(R,y,v);break e}y=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=D.payload,v=typeof k=="function"?k.call(R,y,v):k,v==null)break e;y=ye({},y,v);break e;case 2:vn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else R={eventTime:R,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=R,u=y):d=d.next=R,l|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(d===null&&(u=y),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);lr|=l,t.lanes=l,t.memoizedState=y}}function kd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Ns={},Bt=bn(Ns),fs=bn(Ns),ds=bn(Ns);function Zn(t){if(t===Ns)throw Error(M(174));return t}function Kc(t,e){switch(ue(ds,e),ue(fs,t),ue(Bt,Ns),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:du(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=du(e,t)}fe(Bt),ue(Bt,e)}function Qr(){fe(Bt),fe(fs),fe(ds)}function dg(t){Zn(ds.current);var e=Zn(Bt.current),n=du(e,t.type);e!==n&&(ue(fs,t),ue(Bt,n))}function Wc(t){fs.current===t&&(fe(Bt),fe(fs))}var me=bn(0);function sl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var za=[];function qc(){for(var t=0;t<za.length;t++)za[t]._workInProgressVersionPrimary=null;za.length=0}var No=dn.ReactCurrentDispatcher,Ba=dn.ReactCurrentBatchConfig,or=0,ge=null,Re=null,xe=null,ol=!1,qi=!1,ps=0,c0=0;function We(){throw Error(M(321))}function Qc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lt(t[n],e[n]))return!1;return!0}function Gc(t,e,n,r,i,s){if(or=s,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,No.current=t===null||t.memoizedState===null?p0:m0,t=n(r,i),qi){s=0;do{if(qi=!1,ps=0,25<=s)throw Error(M(301));s+=1,xe=Re=null,e.updateQueue=null,No.current=g0,t=n(r,i)}while(qi)}if(No.current=ll,e=Re!==null&&Re.next!==null,or=0,xe=Re=ge=null,ol=!1,e)throw Error(M(300));return t}function Yc(){var t=ps!==0;return ps=0,t}function Ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ge.memoizedState=xe=t:xe=xe.next=t,xe}function St(){if(Re===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Re.next;var e=xe===null?ge.memoizedState:xe.next;if(e!==null)xe=e,Re=t;else{if(t===null)throw Error(M(310));Re=t,t={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},xe===null?ge.memoizedState=xe=t:xe=xe.next=t}return xe}function ms(t,e){return typeof e=="function"?e(t):e}function ja(t){var e=St(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Re,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=l=null,u=null,f=s;do{var d=f.lane;if((or&d)===d)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var y={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(a=u=y,l=r):u=u.next=y,ge.lanes|=d,lr|=d}f=f.next}while(f!==null&&f!==s);u===null?l=r:u.next=a,Lt(r,e.memoizedState)||(ot=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ge.lanes|=s,lr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ba(t){var e=St(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Lt(s,e.memoizedState)||(ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function pg(){}function mg(t,e){var n=ge,r=St(),i=e(),s=!Lt(r.memoizedState,i);if(s&&(r.memoizedState=i,ot=!0),r=r.queue,Xc(_g.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,gs(9,yg.bind(null,n,r,i,e),void 0,null),Ne===null)throw Error(M(349));or&30||gg(n,e,i)}return i}function gg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yg(t,e,n,r){e.value=n,e.getSnapshot=r,vg(e)&&Eg(t)}function _g(t,e,n){return n(function(){vg(e)&&Eg(t)})}function vg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lt(t,n)}catch{return!0}}function Eg(t){var e=an(t,1);e!==null&&Ot(e,t,1,-1)}function Vd(t){var e=Ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},e.queue=t,t=t.dispatch=d0.bind(null,ge,t),[e.memoizedState,t]}function gs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wg(){return St().memoizedState}function Oo(t,e,n,r){var i=Ft();ge.flags|=t,i.memoizedState=gs(1|e,n,void 0,r===void 0?null:r)}function Nl(t,e,n,r){var i=St();r=r===void 0?null:r;var s=void 0;if(Re!==null){var l=Re.memoizedState;if(s=l.destroy,r!==null&&Qc(r,l.deps)){i.memoizedState=gs(e,n,s,r);return}}ge.flags|=t,i.memoizedState=gs(1|e,n,s,r)}function Dd(t,e){return Oo(8390656,8,t,e)}function Xc(t,e){return Nl(2048,8,t,e)}function Tg(t,e){return Nl(4,2,t,e)}function Ig(t,e){return Nl(4,4,t,e)}function Sg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ag(t,e,n){return n=n!=null?n.concat([t]):null,Nl(4,4,Sg.bind(null,e,t),n)}function Jc(){}function Cg(t,e){var n=St();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rg(t,e){var n=St();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pg(t,e,n){return or&21?(Lt(n,e)||(n=Nm(),ge.lanes|=n,lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function h0(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=Ba.transition;Ba.transition={};try{t(!1),e()}finally{se=n,Ba.transition=r}}function kg(){return St().memoizedState}function f0(t,e,n){var r=Dn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vg(t))Dg(e,n);else if(n=hg(t,e,n,r),n!==null){var i=nt();Ot(n,t,r,i),xg(n,e,r)}}function d0(t,e,n){var r=Dn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vg(t))Dg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,a=s(l,n);if(i.hasEagerState=!0,i.eagerState=a,Lt(a,l)){var u=e.interleaved;u===null?(i.next=i,$c(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=hg(t,e,i,r),n!==null&&(i=nt(),Ot(n,t,r,i),xg(n,e,r))}}function Vg(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function Dg(t,e){qi=ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kc(t,n)}}var ll={readContext:It,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},p0={readContext:It,useCallback:function(t,e){return Ft().memoizedState=[t,e===void 0?null:e],t},useContext:It,useEffect:Dd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Oo(4194308,4,Sg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oo(4,2,t,e)},useMemo:function(t,e){var n=Ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ft();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=f0.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=Ft();return t={current:t},e.memoizedState=t},useState:Vd,useDebugValue:Jc,useDeferredValue:function(t){return Ft().memoizedState=t},useTransition:function(){var t=Vd(!1),e=t[0];return t=h0.bind(null,t[1]),Ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,i=Ft();if(de){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ne===null)throw Error(M(349));or&30||gg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Dd(_g.bind(null,r,s,t),[t]),r.flags|=2048,gs(9,yg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ft(),e=Ne.identifierPrefix;if(de){var n=nn,r=tn;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ps++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=c0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},m0={readContext:It,useCallback:Cg,useContext:It,useEffect:Xc,useImperativeHandle:Ag,useInsertionEffect:Tg,useLayoutEffect:Ig,useMemo:Rg,useReducer:ja,useRef:wg,useState:function(){return ja(ms)},useDebugValue:Jc,useDeferredValue:function(t){var e=St();return Pg(e,Re.memoizedState,t)},useTransition:function(){var t=ja(ms)[0],e=St().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:mg,useId:kg,unstable_isNewReconciler:!1},g0={readContext:It,useCallback:Cg,useContext:It,useEffect:Xc,useImperativeHandle:Ag,useInsertionEffect:Tg,useLayoutEffect:Ig,useMemo:Rg,useReducer:ba,useRef:wg,useState:function(){return ba(ms)},useDebugValue:Jc,useDeferredValue:function(t){var e=St();return Re===null?e.memoizedState=t:Pg(e,Re.memoizedState,t)},useTransition:function(){var t=ba(ms)[0],e=St().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:mg,useId:kg,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ou(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ol={isMounted:function(t){return(t=t._reactInternals)?dr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nt(),i=Dn(t),s=rn(r,i);s.payload=e,n!=null&&(s.callback=n),e=kn(t,s,i),e!==null&&(Ot(e,t,i,r),xo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nt(),i=Dn(t),s=rn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=kn(t,s,i),e!==null&&(Ot(e,t,i,r),xo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nt(),r=Dn(t),i=rn(n,r);i.tag=2,e!=null&&(i.callback=e),e=kn(t,i,r),e!==null&&(Ot(e,t,r,n),xo(e,t,r))}};function xd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!as(n,r)||!as(i,s):!0}function Ng(t,e,n){var r=!1,i=Fn,s=e.contextType;return typeof s=="object"&&s!==null?s=It(s):(i=at(e)?ir:Je.current,r=e.contextTypes,s=(r=r!=null)?Kr(t,i):Fn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ol,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Nd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ol.enqueueReplaceState(e,e.state,null)}function Lu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Hc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=It(s):(s=at(e)?ir:Je.current,i.context=Kr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ou(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ol.enqueueReplaceState(i,i.state,null),il(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gr(t,e){try{var n="",r=e;do n+=Hv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function $a(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var y0=typeof WeakMap=="function"?WeakMap:Map;function Og(t,e,n){n=rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ul||(ul=!0,Wu=r),Mu(t,e)},n}function Lg(t,e,n){n=rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Mu(t,e),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Od(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new y0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=D0.bind(null,t,e,n),e.then(t,t))}function Ld(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Md(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rn(-1,1),e.tag=2,kn(n,e,1))),n.lanes|=1),t)}var _0=dn.ReactCurrentOwner,ot=!1;function tt(t,e,n,r){e.child=t===null?cg(e,null,n,r):qr(e,t.child,n,r)}function Fd(t,e,n,r,i){n=n.render;var s=e.ref;return Br(e,i),r=Gc(t,e,n,r,s,i),n=Yc(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,un(t,e,i)):(de&&n&&Fc(e),e.flags|=1,tt(t,e,r,i),e.child)}function Ud(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!oh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mg(t,e,s,r,i)):(t=Uo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:as,n(l,r)&&t.ref===e.ref)return un(t,e,i)}return e.flags|=1,t=xn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(as(s,r)&&t.ref===e.ref)if(ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,un(t,e,i)}return Fu(t,e,n,r,i)}function Fg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Lr,ht),ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Lr,ht),ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(Lr,ht),ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(Lr,ht),ht|=r;return tt(t,e,i,n),e.child}function Ug(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fu(t,e,n,r,i){var s=at(n)?ir:Je.current;return s=Kr(e,s),Br(e,i),n=Gc(t,e,n,r,s,i),r=Yc(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,un(t,e,i)):(de&&r&&Fc(e),e.flags|=1,tt(t,e,n,i),e.child)}function zd(t,e,n,r,i){if(at(n)){var s=!0;Zo(e)}else s=!1;if(Br(e,i),e.stateNode===null)Lo(t,e),Ng(e,n,r),Lu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,a=e.memoizedProps;l.props=a;var u=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=It(f):(f=at(n)?ir:Je.current,f=Kr(e,f));var d=n.getDerivedStateFromProps,y=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||u!==f)&&Nd(e,l,r,f),vn=!1;var v=e.memoizedState;l.state=v,il(e,r,l,i),u=e.memoizedState,a!==r||v!==u||lt.current||vn?(typeof d=="function"&&(Ou(e,n,d,r),u=e.memoizedState),(a=vn||xd(e,n,a,r,v,u,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),l.props=r,l.state=u,l.context=f,r=a):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,fg(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:kt(e.type,a),l.props=f,y=e.pendingProps,v=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=It(u):(u=at(n)?ir:Je.current,u=Kr(e,u));var R=n.getDerivedStateFromProps;(d=typeof R=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==y||v!==u)&&Nd(e,l,r,u),vn=!1,v=e.memoizedState,l.state=v,il(e,r,l,i);var k=e.memoizedState;a!==y||v!==k||lt.current||vn?(typeof R=="function"&&(Ou(e,n,R,r),k=e.memoizedState),(f=vn||xd(e,n,f,r,v,k,u)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,k,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,k,u)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),l.props=r,l.state=k,l.context=u,r=f):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Uu(t,e,n,r,s,i)}function Uu(t,e,n,r,i,s){Ug(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Sd(e,n,!1),un(t,e,s);r=e.stateNode,_0.current=e;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=qr(e,t.child,null,s),e.child=qr(e,null,a,s)):tt(t,e,a,s),e.memoizedState=r.state,i&&Sd(e,n,!0),e.child}function zg(t){var e=t.stateNode;e.pendingContext?Id(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Id(t,e.context,!1),Kc(t,e.containerInfo)}function Bd(t,e,n,r,i){return Wr(),zc(i),e.flags|=256,tt(t,e,n,r),e.child}var zu={dehydrated:null,treeContext:null,retryLane:0};function Bu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bg(t,e,n){var r=e.pendingProps,i=me.current,s=!1,l=(e.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(me,i&1),t===null)return xu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Fl(l,r,0,null),t=nr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bu(n),e.memoizedState=zu,t):Zc(e,l));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return v0(t,e,l,r,a,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=xn(a,s):(s=nr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Bu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=zu,r}return s=t.child,t=s.sibling,r=xn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zc(t,e){return e=Fl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _o(t,e,n,r){return r!==null&&zc(r),qr(e,t.child,null,n),t=Zc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v0(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=$a(Error(M(422))),_o(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fl({mode:"visible",children:r.children},i,0,null),s=nr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&qr(e,t.child,null,l),e.child.memoizedState=Bu(l),e.memoizedState=zu,s);if(!(e.mode&1))return _o(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(M(419)),r=$a(s,r,void 0),_o(t,e,l,r)}if(a=(l&t.childLanes)!==0,ot||a){if(r=Ne,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,an(t,i),Ot(r,t,i,-1))}return sh(),r=$a(Error(M(421))),_o(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=x0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ft=Pn(i.nextSibling),dt=e,de=!0,Dt=null,t!==null&&(yt[_t++]=tn,yt[_t++]=nn,yt[_t++]=sr,tn=t.id,nn=t.overflow,sr=e),e=Zc(e,r.children),e.flags|=4096,e)}function jd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nu(t.return,e,n)}function Ha(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tt(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jd(t,n,e);else if(t.tag===19)jd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ha(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ha(e,!0,n,null,s);break;case"together":Ha(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function E0(t,e,n){switch(e.tag){case 3:zg(e),Wr();break;case 5:dg(e);break;case 1:at(e.type)&&Zo(e);break;case 4:Kc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(nl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?Bg(t,e,n):(ue(me,me.current&1),t=un(t,e,n),t!==null?t.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,Fg(t,e,n)}return un(t,e,n)}var bg,ju,$g,Hg;bg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ju=function(){};$g=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zn(Bt.current);var s=null;switch(n){case"input":i=uu(t,i),r=uu(t,r),s=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),s=[];break;case"textarea":i=fu(t,i),r=fu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xo)}pu(n,r);var l;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ts.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var u=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==a&&(u!=null||a!=null))if(f==="style")if(a){for(l in a)!a.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&a[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(s||(s=[]),s.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ts.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&he("scroll",t),s||a===u||(s=[])):(s=s||[]).push(f,u))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};Hg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Di(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function w0(t,e,n){var r=e.pendingProps;switch(Uc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return at(e.type)&&Jo(),qe(e),null;case 3:return r=e.stateNode,Qr(),fe(lt),fe(Je),qc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(Gu(Dt),Dt=null))),ju(t,e),qe(e),null;case 5:Wc(e);var i=Zn(ds.current);if(n=e.type,t!==null&&e.stateNode!=null)$g(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return qe(e),null}if(t=Zn(Bt.current),go(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ut]=e,r[hs]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<Fi.length;i++)he(Fi[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Yf(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Jf(r,s),he("invalid",r)}pu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var a=s[l];l==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&mo(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mo(r.textContent,a,t),i=["children",""+a]):ts.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&he("scroll",r)}switch(n){case"input":oo(r),Xf(r,s,!0);break;case"textarea":oo(r),Zf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_m(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Ut]=e,t[hs]=r,bg(t,e,!1,!1),e.stateNode=t;e:{switch(l=mu(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<Fi.length;i++)he(Fi[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Yf(t,r),i=uu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),he("invalid",t);break;case"textarea":Jf(t,r),i=fu(t,r),he("invalid",t);break;default:i=r}pu(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?wm(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&vm(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ns(t,u):typeof u=="number"&&ns(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ts.hasOwnProperty(s)?u!=null&&s==="onScroll"&&he("scroll",t):u!=null&&Ic(t,s,u,l))}switch(n){case"input":oo(t),Xf(t,r,!1);break;case"textarea":oo(t),Zf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Mr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Mr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)Hg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Zn(ds.current),Zn(Bt.current),go(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ut]=e,(s=r.nodeValue!==n)&&(t=dt,t!==null))switch(t.tag){case 3:mo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ut]=e,e.stateNode=r}return qe(e),null;case 13:if(fe(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&ft!==null&&e.mode&1&&!(e.flags&128))ag(),Wr(),e.flags|=98560,s=!1;else if(s=go(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[Ut]=e}else Wr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),s=!1}else Dt!==null&&(Gu(Dt),Dt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?ke===0&&(ke=3):sh())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return Qr(),ju(t,e),t===null&&us(e.stateNode.containerInfo),qe(e),null;case 10:return bc(e.type._context),qe(e),null;case 17:return at(e.type)&&Jo(),qe(e),null;case 19:if(fe(me),s=e.memoizedState,s===null)return qe(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Di(s,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=sl(t),l!==null){for(e.flags|=128,Di(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(me,me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Se()>Yr&&(e.flags|=128,r=!0,Di(s,!1),e.lanes=4194304)}else{if(!r)if(t=sl(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Di(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!de)return qe(e),null}else 2*Se()-s.renderingStartTime>Yr&&n!==1073741824&&(e.flags|=128,r=!0,Di(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Se(),e.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),e):(qe(e),null);case 22:case 23:return ih(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ht&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function T0(t,e){switch(Uc(e),e.tag){case 1:return at(e.type)&&Jo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qr(),fe(lt),fe(Je),qc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wc(e),null;case 13:if(fe(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Wr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(me),null;case 4:return Qr(),null;case 10:return bc(e.type._context),null;case 22:case 23:return ih(),null;case 24:return null;default:return null}}var vo=!1,Ye=!1,I0=typeof WeakSet=="function"?WeakSet:Set,j=null;function Or(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function bu(t,e,n){try{n()}catch(r){Ee(t,e,r)}}var bd=!1;function S0(t,e){if(Au=Qo,t=Gm(),Mc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,a=-1,u=-1,f=0,d=0,y=t,v=null;t:for(;;){for(var R;y!==n||i!==0&&y.nodeType!==3||(a=l+i),y!==s||r!==0&&y.nodeType!==3||(u=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(R=y.firstChild)!==null;)v=y,y=R;for(;;){if(y===t)break t;if(v===n&&++f===i&&(a=l),v===s&&++d===r&&(u=l),(R=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=R}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cu={focusedElem:t,selectionRange:n},Qo=!1,j=e;j!==null;)if(e=j,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,j=t;else for(;j!==null;){e=j;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var D=k.memoizedProps,x=k.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?D:kt(e.type,D),x);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(N){Ee(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}return k=bd,bd=!1,k}function Qi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bu(e,n,s)}i=i.next}while(i!==r)}}function Ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $u(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kg(t){var e=t.alternate;e!==null&&(t.alternate=null,Kg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ut],delete e[hs],delete e[ku],delete e[o0],delete e[l0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wg(t){return t.tag===5||t.tag===3||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xo));else if(r!==4&&(t=t.child,t!==null))for(Hu(t,e,n),t=t.sibling;t!==null;)Hu(t,e,n),t=t.sibling}function Ku(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ku(t,e,n),t=t.sibling;t!==null;)Ku(t,e,n),t=t.sibling}var Le=null,Vt=!1;function yn(t,e,n){for(n=n.child;n!==null;)qg(t,e,n),n=n.sibling}function qg(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:Ye||Or(n,e);case 6:var r=Le,i=Vt;Le=null,yn(t,e,n),Le=r,Vt=i,Le!==null&&(Vt?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(Vt?(t=Le,n=n.stateNode,t.nodeType===8?Fa(t.parentNode,n):t.nodeType===1&&Fa(t,n),os(t)):Fa(Le,n.stateNode));break;case 4:r=Le,i=Vt,Le=n.stateNode.containerInfo,Vt=!0,yn(t,e,n),Le=r,Vt=i;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&bu(n,e,l),i=i.next}while(i!==r)}yn(t,e,n);break;case 1:if(!Ye&&(Or(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ee(n,e,a)}yn(t,e,n);break;case 21:yn(t,e,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,yn(t,e,n),Ye=r):yn(t,e,n);break;default:yn(t,e,n)}}function Hd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new I0),e.forEach(function(r){var i=N0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,a=l;e:for(;a!==null;){switch(a.tag){case 5:Le=a.stateNode,Vt=!1;break e;case 3:Le=a.stateNode.containerInfo,Vt=!0;break e;case 4:Le=a.stateNode.containerInfo,Vt=!0;break e}a=a.return}if(Le===null)throw Error(M(160));qg(s,l,i),Le=null,Vt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Ee(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qg(e,t),e=e.sibling}function Qg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pt(e,t),Mt(t),r&4){try{Qi(3,t,t.return),Ll(3,t)}catch(D){Ee(t,t.return,D)}try{Qi(5,t,t.return)}catch(D){Ee(t,t.return,D)}}break;case 1:Pt(e,t),Mt(t),r&512&&n!==null&&Or(n,n.return);break;case 5:if(Pt(e,t),Mt(t),r&512&&n!==null&&Or(n,n.return),t.flags&32){var i=t.stateNode;try{ns(i,"")}catch(D){Ee(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gm(i,s),mu(a,l);var f=mu(a,s);for(l=0;l<u.length;l+=2){var d=u[l],y=u[l+1];d==="style"?wm(i,y):d==="dangerouslySetInnerHTML"?vm(i,y):d==="children"?ns(i,y):Ic(i,d,y,f)}switch(a){case"input":cu(i,s);break;case"textarea":ym(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Mr(i,!!s.multiple,R,!1):v!==!!s.multiple&&(s.defaultValue!=null?Mr(i,!!s.multiple,s.defaultValue,!0):Mr(i,!!s.multiple,s.multiple?[]:"",!1))}i[hs]=s}catch(D){Ee(t,t.return,D)}}break;case 6:if(Pt(e,t),Mt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(D){Ee(t,t.return,D)}}break;case 3:if(Pt(e,t),Mt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{os(e.containerInfo)}catch(D){Ee(t,t.return,D)}break;case 4:Pt(e,t),Mt(t);break;case 13:Pt(e,t),Mt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nh=Se())),r&4&&Hd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(f=Ye)||d,Pt(e,t),Ye=f):Pt(e,t),Mt(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(j=t,d=t.child;d!==null;){for(y=j=d;j!==null;){switch(v=j,R=v.child,v.tag){case 0:case 11:case 14:case 15:Qi(4,v,v.return);break;case 1:Or(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(D){Ee(r,n,D)}}break;case 5:Or(v,v.return);break;case 22:if(v.memoizedState!==null){Wd(y);continue}}R!==null?(R.return=v,j=R):Wd(y)}d=d.sibling}e:for(d=null,y=t;;){if(y.tag===5){if(d===null){d=y;try{i=y.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=y.stateNode,u=y.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Em("display",l))}catch(D){Ee(t,t.return,D)}}}else if(y.tag===6){if(d===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(D){Ee(t,t.return,D)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;d===y&&(d=null),y=y.return}d===y&&(d=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Pt(e,t),Mt(t),r&4&&Hd(t);break;case 21:break;default:Pt(e,t),Mt(t)}}function Mt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wg(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ns(i,""),r.flags&=-33);var s=$d(t);Ku(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,a=$d(t);Hu(t,a,l);break;default:throw Error(M(161))}}catch(u){Ee(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A0(t,e,n){j=t,Gg(t)}function Gg(t,e,n){for(var r=(t.mode&1)!==0;j!==null;){var i=j,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||vo;if(!l){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ye;a=vo;var f=Ye;if(vo=l,(Ye=u)&&!f)for(j=i;j!==null;)l=j,u=l.child,l.tag===22&&l.memoizedState!==null?qd(i):u!==null?(u.return=l,j=u):qd(i);for(;s!==null;)j=s,Gg(s),s=s.sibling;j=i,vo=a,Ye=f}Kd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,j=s):Kd(t)}}function Kd(t){for(;j!==null;){var e=j;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||Ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kd(e,l,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var y=d.dehydrated;y!==null&&os(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ye||e.flags&512&&$u(e)}catch(v){Ee(e,e.return,v)}}if(e===t){j=null;break}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}}function Wd(t){for(;j!==null;){var e=j;if(e===t){j=null;break}var n=e.sibling;if(n!==null){n.return=e.return,j=n;break}j=e.return}}function qd(t){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ll(4,e)}catch(u){Ee(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ee(e,i,u)}}var s=e.return;try{$u(e)}catch(u){Ee(e,s,u)}break;case 5:var l=e.return;try{$u(e)}catch(u){Ee(e,l,u)}}}catch(u){Ee(e,e.return,u)}if(e===t){j=null;break}var a=e.sibling;if(a!==null){a.return=e.return,j=a;break}j=e.return}}var C0=Math.ceil,al=dn.ReactCurrentDispatcher,eh=dn.ReactCurrentOwner,wt=dn.ReactCurrentBatchConfig,te=0,Ne=null,Ce=null,Ue=0,ht=0,Lr=bn(0),ke=0,ys=null,lr=0,Ml=0,th=0,Gi=null,st=null,nh=0,Yr=1/0,Jt=null,ul=!1,Wu=null,Vn=null,Eo=!1,In=null,cl=0,Yi=0,qu=null,Mo=-1,Fo=0;function nt(){return te&6?Se():Mo!==-1?Mo:Mo=Se()}function Dn(t){return t.mode&1?te&2&&Ue!==0?Ue&-Ue:u0.transition!==null?(Fo===0&&(Fo=Nm()),Fo):(t=se,t!==0||(t=window.event,t=t===void 0?16:Bm(t.type)),t):1}function Ot(t,e,n,r){if(50<Yi)throw Yi=0,qu=null,Error(M(185));Vs(t,n,r),(!(te&2)||t!==Ne)&&(t===Ne&&(!(te&2)&&(Ml|=n),ke===4&&wn(t,Ue)),ut(t,r),n===1&&te===0&&!(e.mode&1)&&(Yr=Se()+500,xl&&$n()))}function ut(t,e){var n=t.callbackNode;uE(t,e);var r=qo(t,t===Ne?Ue:0);if(r===0)n!==null&&nd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nd(n),e===1)t.tag===0?a0(Qd.bind(null,t)):sg(Qd.bind(null,t)),i0(function(){!(te&6)&&$n()}),n=null;else{switch(Om(r)){case 1:n=Pc;break;case 4:n=Dm;break;case 16:n=Wo;break;case 536870912:n=xm;break;default:n=Wo}n=ry(n,Yg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yg(t,e){if(Mo=-1,Fo=0,te&6)throw Error(M(327));var n=t.callbackNode;if(jr()&&t.callbackNode!==n)return null;var r=qo(t,t===Ne?Ue:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hl(t,r);else{e=r;var i=te;te|=2;var s=Jg();(Ne!==t||Ue!==e)&&(Jt=null,Yr=Se()+500,tr(t,e));do try{k0();break}catch(a){Xg(t,a)}while(!0);jc(),al.current=s,te=i,Ce!==null?e=0:(Ne=null,Ue=0,e=ke)}if(e!==0){if(e===2&&(i=Eu(t),i!==0&&(r=i,e=Qu(t,i))),e===1)throw n=ys,tr(t,0),wn(t,r),ut(t,Se()),n;if(e===6)wn(t,r);else{if(i=t.current.alternate,!(r&30)&&!R0(i)&&(e=hl(t,r),e===2&&(s=Eu(t),s!==0&&(r=s,e=Qu(t,s))),e===1))throw n=ys,tr(t,0),wn(t,r),ut(t,Se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Gn(t,st,Jt);break;case 3:if(wn(t,r),(r&130023424)===r&&(e=nh+500-Se(),10<e)){if(qo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pu(Gn.bind(null,t,st,Jt),e);break}Gn(t,st,Jt);break;case 4:if(wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Nt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*C0(r/1960))-r,10<r){t.timeoutHandle=Pu(Gn.bind(null,t,st,Jt),r);break}Gn(t,st,Jt);break;case 5:Gn(t,st,Jt);break;default:throw Error(M(329))}}}return ut(t,Se()),t.callbackNode===n?Yg.bind(null,t):null}function Qu(t,e){var n=Gi;return t.current.memoizedState.isDehydrated&&(tr(t,e).flags|=256),t=hl(t,e),t!==2&&(e=st,st=n,e!==null&&Gu(e)),t}function Gu(t){st===null?st=t:st.push.apply(st,t)}function R0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wn(t,e){for(e&=~th,e&=~Ml,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nt(e),r=1<<n;t[n]=-1,e&=~r}}function Qd(t){if(te&6)throw Error(M(327));jr();var e=qo(t,0);if(!(e&1))return ut(t,Se()),null;var n=hl(t,e);if(t.tag!==0&&n===2){var r=Eu(t);r!==0&&(e=r,n=Qu(t,r))}if(n===1)throw n=ys,tr(t,0),wn(t,e),ut(t,Se()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gn(t,st,Jt),ut(t,Se()),null}function rh(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&(Yr=Se()+500,xl&&$n())}}function ar(t){In!==null&&In.tag===0&&!(te&6)&&jr();var e=te;te|=1;var n=wt.transition,r=se;try{if(wt.transition=null,se=1,t)return t()}finally{se=r,wt.transition=n,te=e,!(te&6)&&$n()}}function ih(){ht=Lr.current,fe(Lr)}function tr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,r0(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(Uc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jo();break;case 3:Qr(),fe(lt),fe(Je),qc();break;case 5:Wc(r);break;case 4:Qr();break;case 13:fe(me);break;case 19:fe(me);break;case 10:bc(r.type._context);break;case 22:case 23:ih()}n=n.return}if(Ne=t,Ce=t=xn(t.current,null),Ue=ht=e,ke=0,ys=null,th=Ml=lr=0,st=Gi=null,Jn!==null){for(e=0;e<Jn.length;e++)if(n=Jn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}Jn=null}return t}function Xg(t,e){do{var n=Ce;try{if(jc(),No.current=ll,ol){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ol=!1}if(or=0,xe=Re=ge=null,qi=!1,ps=0,eh.current=null,n===null||n.return===null){ke=1,ys=e,Ce=null;break}e:{var s=t,l=n.return,a=n,u=e;if(e=Ue,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,d=a,y=d.tag;if(!(d.mode&1)&&(y===0||y===11||y===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var R=Ld(l);if(R!==null){R.flags&=-257,Md(R,l,a,s,e),R.mode&1&&Od(s,f,e),e=R,u=f;var k=e.updateQueue;if(k===null){var D=new Set;D.add(u),e.updateQueue=D}else k.add(u);break e}else{if(!(e&1)){Od(s,f,e),sh();break e}u=Error(M(426))}}else if(de&&a.mode&1){var x=Ld(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Md(x,l,a,s,e),zc(Gr(u,a));break e}}s=u=Gr(u,a),ke!==4&&(ke=2),Gi===null?Gi=[s]:Gi.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=Og(s,u,e);Pd(s,I);break e;case 1:a=u;var E=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Vn===null||!Vn.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Lg(s,a,e);Pd(s,N);break e}}s=s.return}while(s!==null)}ey(n)}catch(z){e=z,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function Jg(){var t=al.current;return al.current=ll,t===null?ll:t}function sh(){(ke===0||ke===3||ke===2)&&(ke=4),Ne===null||!(lr&268435455)&&!(Ml&268435455)||wn(Ne,Ue)}function hl(t,e){var n=te;te|=2;var r=Jg();(Ne!==t||Ue!==e)&&(Jt=null,tr(t,e));do try{P0();break}catch(i){Xg(t,i)}while(!0);if(jc(),te=n,al.current=r,Ce!==null)throw Error(M(261));return Ne=null,Ue=0,ke}function P0(){for(;Ce!==null;)Zg(Ce)}function k0(){for(;Ce!==null&&!eE();)Zg(Ce)}function Zg(t){var e=ny(t.alternate,t,ht);t.memoizedProps=t.pendingProps,e===null?ey(t):Ce=e,eh.current=null}function ey(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=T0(n,e),n!==null){n.flags&=32767,Ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,Ce=null;return}}else if(n=w0(n,e,ht),n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);ke===0&&(ke=5)}function Gn(t,e,n){var r=se,i=wt.transition;try{wt.transition=null,se=1,V0(t,e,n,r)}finally{wt.transition=i,se=r}return null}function V0(t,e,n,r){do jr();while(In!==null);if(te&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cE(t,s),t===Ne&&(Ce=Ne=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eo||(Eo=!0,ry(Wo,function(){return jr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wt.transition,wt.transition=null;var l=se;se=1;var a=te;te|=4,eh.current=null,S0(t,n),Qg(n,t),YE(Cu),Qo=!!Au,Cu=Au=null,t.current=n,A0(n),tE(),te=a,se=l,wt.transition=s}else t.current=n;if(Eo&&(Eo=!1,In=t,cl=i),s=t.pendingLanes,s===0&&(Vn=null),iE(n.stateNode),ut(t,Se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ul)throw ul=!1,t=Wu,Wu=null,t;return cl&1&&t.tag!==0&&jr(),s=t.pendingLanes,s&1?t===qu?Yi++:(Yi=0,qu=t):Yi=0,$n(),null}function jr(){if(In!==null){var t=Om(cl),e=wt.transition,n=se;try{if(wt.transition=null,se=16>t?16:t,In===null)var r=!1;else{if(t=In,In=null,cl=0,te&6)throw Error(M(331));var i=te;for(te|=4,j=t.current;j!==null;){var s=j,l=s.child;if(j.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var f=a[u];for(j=f;j!==null;){var d=j;switch(d.tag){case 0:case 11:case 15:Qi(8,d,s)}var y=d.child;if(y!==null)y.return=d,j=y;else for(;j!==null;){d=j;var v=d.sibling,R=d.return;if(Kg(d),d===f){j=null;break}if(v!==null){v.return=R,j=v;break}j=R}}}var k=s.alternate;if(k!==null){var D=k.child;if(D!==null){k.child=null;do{var x=D.sibling;D.sibling=null,D=x}while(D!==null)}}j=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,j=l;else e:for(;j!==null;){if(s=j,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qi(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,j=I;break e}j=s.return}}var E=t.current;for(j=E;j!==null;){l=j;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,j=C;else e:for(l=E;j!==null;){if(a=j,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ll(9,a)}}catch(z){Ee(a,a.return,z)}if(a===l){j=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,j=N;break e}j=a.return}}if(te=i,$n(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Rl,t)}catch{}r=!0}return r}finally{se=n,wt.transition=e}}return!1}function Gd(t,e,n){e=Gr(n,e),e=Og(t,e,1),t=kn(t,e,1),e=nt(),t!==null&&(Vs(t,1,e),ut(t,e))}function Ee(t,e,n){if(t.tag===3)Gd(t,t,n);else for(;e!==null;){if(e.tag===3){Gd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){t=Gr(n,t),t=Lg(e,t,1),e=kn(e,t,1),t=nt(),e!==null&&(Vs(e,1,t),ut(e,t));break}}e=e.return}}function D0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nt(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Ue&n)===n&&(ke===4||ke===3&&(Ue&130023424)===Ue&&500>Se()-nh?tr(t,0):th|=n),ut(t,e)}function ty(t,e){e===0&&(t.mode&1?(e=uo,uo<<=1,!(uo&130023424)&&(uo=4194304)):e=1);var n=nt();t=an(t,e),t!==null&&(Vs(t,e,n),ut(t,n))}function x0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ty(t,n)}function N0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),ty(t,n)}var ny;ny=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||lt.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,E0(t,e,n);ot=!!(t.flags&131072)}else ot=!1,de&&e.flags&1048576&&og(e,tl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lo(t,e),t=e.pendingProps;var i=Kr(e,Je.current);Br(e,n),i=Gc(null,e,r,t,i,n);var s=Yc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,at(r)?(s=!0,Zo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hc(e),i.updater=Ol,e.stateNode=i,i._reactInternals=e,Lu(e,r,t,n),e=Uu(null,e,r,!0,s,n)):(e.tag=0,de&&s&&Fc(e),tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=L0(r),t=kt(r,t),i){case 0:e=Fu(null,e,r,t,n);break e;case 1:e=zd(null,e,r,t,n);break e;case 11:e=Fd(null,e,r,t,n);break e;case 14:e=Ud(null,e,r,kt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),Fu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),zd(t,e,r,i,n);case 3:e:{if(zg(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,fg(t,e),il(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gr(Error(M(423)),e),e=Bd(t,e,r,n,i);break e}else if(r!==i){i=Gr(Error(M(424)),e),e=Bd(t,e,r,n,i);break e}else for(ft=Pn(e.stateNode.containerInfo.firstChild),dt=e,de=!0,Dt=null,n=cg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wr(),r===i){e=un(t,e,n);break e}tt(t,e,r,n)}e=e.child}return e;case 5:return dg(e),t===null&&xu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Ru(r,i)?l=null:s!==null&&Ru(r,s)&&(e.flags|=32),Ug(t,e),tt(t,e,l,n),e.child;case 6:return t===null&&xu(e),null;case 13:return Bg(t,e,n);case 4:return Kc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qr(e,null,r,n):tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),Fd(t,e,r,i,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,ue(nl,r._currentValue),r._currentValue=l,s!==null)if(Lt(s.value,l)){if(s.children===i.children&&!lt.current){e=un(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){l=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=rn(-1,n&-n),u.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?u.next=u:(u.next=d.next,d.next=u),f.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Nu(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Nu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Br(e,n),i=It(i),r=r(i),e.flags|=1,tt(t,e,r,n),e.child;case 14:return r=e.type,i=kt(r,e.pendingProps),i=kt(r.type,i),Ud(t,e,r,i,n);case 15:return Mg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),Lo(t,e),e.tag=1,at(r)?(t=!0,Zo(e)):t=!1,Br(e,n),Ng(e,r,i),Lu(e,r,i,n),Uu(null,e,r,!0,t,n);case 19:return jg(t,e,n);case 22:return Fg(t,e,n)}throw Error(M(156,e.tag))};function ry(t,e){return Vm(t,e)}function O0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(t,e,n,r){return new O0(t,e,n,r)}function oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function L0(t){if(typeof t=="function")return oh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ac)return 11;if(t===Cc)return 14}return 2}function xn(t,e){var n=t.alternate;return n===null?(n=Et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uo(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")oh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ar:return nr(n.children,i,s,e);case Sc:l=8,i|=8;break;case su:return t=Et(12,n,e,i|2),t.elementType=su,t.lanes=s,t;case ou:return t=Et(13,n,e,i),t.elementType=ou,t.lanes=s,t;case lu:return t=Et(19,n,e,i),t.elementType=lu,t.lanes=s,t;case dm:return Fl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hm:l=10;break e;case fm:l=9;break e;case Ac:l=11;break e;case Cc:l=14;break e;case _n:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Et(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function nr(t,e,n,r){return t=Et(7,t,r,e),t.lanes=n,t}function Fl(t,e,n,r){return t=Et(22,t,r,e),t.elementType=dm,t.lanes=n,t.stateNode={isHidden:!1},t}function Ka(t,e,n){return t=Et(6,t,null,e),t.lanes=n,t}function Wa(t,e,n){return e=Et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function M0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ca(0),this.expirationTimes=Ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lh(t,e,n,r,i,s,l,a,u){return t=new M0(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Et(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hc(s),t}function F0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iy(t){if(!t)return Fn;t=t._reactInternals;e:{if(dr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(at(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(at(n))return ig(t,n,e)}return e}function sy(t,e,n,r,i,s,l,a,u){return t=lh(n,r,!0,t,i,s,l,a,u),t.context=iy(null),n=t.current,r=nt(),i=Dn(n),s=rn(r,i),s.callback=e??null,kn(n,s,i),t.current.lanes=i,Vs(t,i,r),ut(t,r),t}function Ul(t,e,n,r){var i=e.current,s=nt(),l=Dn(i);return n=iy(n),e.context===null?e.context=n:e.pendingContext=n,e=rn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kn(i,e,l),t!==null&&(Ot(t,i,l,s),xo(t,i,l)),l}function fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ah(t,e){Yd(t,e),(t=t.alternate)&&Yd(t,e)}function U0(){return null}var oy=typeof reportError=="function"?reportError:function(t){console.error(t)};function uh(t){this._internalRoot=t}zl.prototype.render=uh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Ul(t,e,null,null)};zl.prototype.unmount=uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ar(function(){Ul(null,t,null,null)}),e[ln]=null}};function zl(t){this._internalRoot=t}zl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<En.length&&e!==0&&e<En[n].priority;n++);En.splice(n,0,t),n===0&&zm(t)}};function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xd(){}function z0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=fl(l);s.call(f)}}var l=sy(e,r,t,0,null,!1,!1,"",Xd);return t._reactRootContainer=l,t[ln]=l.current,us(t.nodeType===8?t.parentNode:t),ar(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=fl(u);a.call(f)}}var u=lh(t,0,!1,null,null,!1,!1,"",Xd);return t._reactRootContainer=u,t[ln]=u.current,us(t.nodeType===8?t.parentNode:t),ar(function(){Ul(e,u,n,r)}),u}function jl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var a=i;i=function(){var u=fl(l);a.call(u)}}Ul(e,l,t,i)}else l=z0(n,e,t,i,r);return fl(l)}Lm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mi(e.pendingLanes);n!==0&&(kc(e,n|1),ut(e,Se()),!(te&6)&&(Yr=Se()+500,$n()))}break;case 13:ar(function(){var r=an(t,1);if(r!==null){var i=nt();Ot(r,t,1,i)}}),ah(t,1)}};Vc=function(t){if(t.tag===13){var e=an(t,134217728);if(e!==null){var n=nt();Ot(e,t,134217728,n)}ah(t,134217728)}};Mm=function(t){if(t.tag===13){var e=Dn(t),n=an(t,e);if(n!==null){var r=nt();Ot(n,t,e,r)}ah(t,e)}};Fm=function(){return se};Um=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};yu=function(t,e,n){switch(e){case"input":if(cu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dl(r);if(!i)throw Error(M(90));mm(r),cu(r,i)}}}break;case"textarea":ym(t,n);break;case"select":e=n.value,e!=null&&Mr(t,!!n.multiple,e,!1)}};Sm=rh;Am=ar;var B0={usingClientEntryPoint:!1,Events:[xs,kr,Dl,Tm,Im,rh]},xi={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j0={bundleType:xi.bundleType,version:xi.version,rendererPackageName:xi.rendererPackageName,rendererConfig:xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pm(t),t===null?null:t.stateNode},findFiberByHostInstance:xi.findFiberByHostInstance||U0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{Rl=wo.inject(j0),zt=wo}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B0;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(e))throw Error(M(200));return F0(t,e,null,n)};mt.createRoot=function(t,e){if(!ch(t))throw Error(M(299));var n=!1,r="",i=oy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lh(t,1,!1,null,null,n,!1,r,i),t[ln]=e.current,us(t.nodeType===8?t.parentNode:t),new uh(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Pm(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return ar(t)};mt.hydrate=function(t,e,n){if(!Bl(e))throw Error(M(200));return jl(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!ch(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=oy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=sy(e,null,t,1,n??null,i,!1,s,l),t[ln]=e.current,us(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zl(e)};mt.render=function(t,e,n){if(!Bl(e))throw Error(M(200));return jl(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!Bl(t))throw Error(M(40));return t._reactRootContainer?(ar(function(){jl(null,null,t,!1,function(){t._reactRootContainer=null,t[ln]=null})}),!0):!1};mt.unstable_batchedUpdates=rh;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bl(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return jl(t,e,n,!1,r)};mt.version="18.3.1-next-f1338f8080-20240426";function ly(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ly)}catch(t){console.error(t)}}ly(),lm.exports=mt;var b0=lm.exports,Jd=b0;ru.createRoot=Jd.createRoot,ru.hydrateRoot=Jd.hydrateRoot;var Zd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],l=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(l&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|l&63)}}return e.join("")},uy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],l=i+1<t.length,a=l?t[i+1]:0,u=i+2<t.length,f=u?t[i+2]:0,d=s>>2,y=(s&3)<<4|a>>4;let v=(a&15)<<2|f>>6,R=f&63;u||(R=64,l||(v=64)),r.push(n[d],n[y],n[v],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ay(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||f==null||y==null)throw new H0;const v=s<<2|a>>4;if(r.push(v),f!==64){const R=a<<4&240|f>>2;if(r.push(R),y!==64){const k=f<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class H0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K0=function(t){const e=ay(t);return uy.encodeByteArray(e,!0)},dl=function(t){return K0(t).replace(/\./g,"")},W0=function(t){try{return uy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=()=>q0().__FIREBASE_DEFAULTS__,G0=()=>{if(typeof process>"u"||typeof Zd>"u")return;const t=Zd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W0(t[1]);return e&&JSON.parse(e)},hh=()=>{try{return Q0()||G0()||Y0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X0=t=>{var e,n;return(n=(e=hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},J0=t=>{const e=X0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cy=()=>{var t;return(t=hh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dl(JSON.stringify(n)),dl(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nw(){var t;const e=(t=hh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rw(){return!nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iw(){try{return typeof indexedDB=="object"}catch{return!1}}function sw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="FirebaseError";class li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ow,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hy.prototype.create)}}class hy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],l=s?lw(s,r):"Error",a=`${this.serviceName}: ${l} (${i}).`;return new li(i,a,r)}}function lw(t,e){return t.replace(aw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aw=/\{\$([^}]+)}/g;function Yu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],l=e[i];if(ep(s)&&ep(l)){if(!Yu(s,l))return!1}else if(s!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ep(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Z0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hw(e))try{this.getOrInitializeService({instanceIdentifier:Yn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yn){return this.instances.has(e)}getOptions(e=Yn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,l]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const l=this.instances.get(i);return l&&e(l,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yn){return this.component?this.component.multipleInstances?e:Yn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cw(t){return t===Yn?void 0:t}function hw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ee||(ee={}));const dw={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},pw=ee.INFO,mw={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},gw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=mw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fy{constructor(e){this.name=e,this._logLevel=pw,this._logHandler=gw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}const yw=(t,e)=>e.some(n=>t instanceof n);let tp,np;function _w(){return tp||(tp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vw(){return np||(np=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dy=new WeakMap,Xu=new WeakMap,py=new WeakMap,qa=new WeakMap,fh=new WeakMap;function Ew(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",l)},s=()=>{n(Nn(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&dy.set(n,t)}).catch(()=>{}),fh.set(e,t),e}function ww(t){if(Xu.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",l),t.removeEventListener("abort",l)},s=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",l),t.addEventListener("abort",l)});Xu.set(t,e)}let Ju={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||py.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tw(t){Ju=t(Ju)}function Iw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qa(this),e,...n);return py.set(r,e.sort?e.sort():[e]),Nn(r)}:vw().includes(t)?function(...e){return t.apply(Qa(this),e),Nn(dy.get(this))}:function(...e){return Nn(t.apply(Qa(this),e))}}function Sw(t){return typeof t=="function"?Iw(t):(t instanceof IDBTransaction&&ww(t),yw(t,_w())?new Proxy(t,Ju):t)}function Nn(t){if(t instanceof IDBRequest)return Ew(t);if(qa.has(t))return qa.get(t);const e=Sw(t);return e!==t&&(qa.set(t,e),fh.set(e,t)),e}const Qa=t=>fh.get(t);function Aw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const l=indexedDB.open(t,e),a=Nn(l);return r&&l.addEventListener("upgradeneeded",u=>{r(Nn(l.result),u.oldVersion,u.newVersion,Nn(l.transaction),u)}),n&&l.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}const Cw=["get","getKey","getAll","getAllKeys","count"],Rw=["put","add","delete","clear"],Ga=new Map;function rp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ga.get(e))return Ga.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Rw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Cw.includes(n)))return;const s=async function(l,...a){const u=this.transaction(l,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(a.shift())),(await Promise.all([f[n](...a),i&&u.done]))[0]};return Ga.set(e,s),s}Tw(t=>({...t,get:(e,n,r)=>rp(e,n)||t.get(e,n,r),has:(e,n)=>!!rp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zu="@firebase/app",ip="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=new fy("@firebase/app"),Vw="@firebase/app-compat",Dw="@firebase/analytics-compat",xw="@firebase/analytics",Nw="@firebase/app-check-compat",Ow="@firebase/app-check",Lw="@firebase/auth",Mw="@firebase/auth-compat",Fw="@firebase/database",Uw="@firebase/data-connect",zw="@firebase/database-compat",Bw="@firebase/functions",jw="@firebase/functions-compat",bw="@firebase/installations",$w="@firebase/installations-compat",Hw="@firebase/messaging",Kw="@firebase/messaging-compat",Ww="@firebase/performance",qw="@firebase/performance-compat",Qw="@firebase/remote-config",Gw="@firebase/remote-config-compat",Yw="@firebase/storage",Xw="@firebase/storage-compat",Jw="@firebase/firestore",Zw="@firebase/vertexai-preview",eT="@firebase/firestore-compat",tT="firebase",nT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="[DEFAULT]",rT={[Zu]:"fire-core",[Vw]:"fire-core-compat",[xw]:"fire-analytics",[Dw]:"fire-analytics-compat",[Ow]:"fire-app-check",[Nw]:"fire-app-check-compat",[Lw]:"fire-auth",[Mw]:"fire-auth-compat",[Fw]:"fire-rtdb",[Uw]:"fire-data-connect",[zw]:"fire-rtdb-compat",[Bw]:"fire-fn",[jw]:"fire-fn-compat",[bw]:"fire-iid",[$w]:"fire-iid-compat",[Hw]:"fire-fcm",[Kw]:"fire-fcm-compat",[Ww]:"fire-perf",[qw]:"fire-perf-compat",[Qw]:"fire-rc",[Gw]:"fire-rc-compat",[Yw]:"fire-gcs",[Xw]:"fire-gcs-compat",[Jw]:"fire-fst",[eT]:"fire-fst-compat",[Zw]:"fire-vertex","fire-js":"fire-js",[tT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new Map,iT=new Map,tc=new Map;function sp(t,e){try{t.container.addComponent(e)}catch(n){cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gl(t){const e=t.name;if(tc.has(e))return cn.debug(`There were multiple attempts to register component ${e}.`),!1;tc.set(e,t);for(const n of ml.values())sp(n,t);for(const n of iT.values())sp(n,t);return!0}function sT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new hy("app","Firebase",oT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=nT;function my(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ec,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw On.create("bad-app-name",{appName:String(i)});if(n||(n=cy()),!n)throw On.create("no-options");const s=ml.get(i);if(s){if(Yu(n,s.options)&&Yu(r,s.config))return s;throw On.create("duplicate-app",{appName:i})}const l=new fw(i);for(const u of tc.values())l.addComponent(u);const a=new lT(n,r,l);return ml.set(i,a),a}function uT(t=ec){const e=ml.get(t);if(!e&&t===ec&&cy())return my();if(!e)throw On.create("no-app",{appName:t});return e}function br(t,e,n){var r;let i=(r=rT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&a.push("and"),l&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cn.warn(a.join(" "));return}gl(new _s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="firebase-heartbeat-database",hT=1,vs="firebase-heartbeat-store";let Ya=null;function gy(){return Ya||(Ya=Aw(cT,hT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vs)}catch(n){console.warn(n)}}}}).catch(t=>{throw On.create("idb-open",{originalErrorMessage:t.message})})),Ya}async function fT(t){try{const n=(await gy()).transaction(vs),r=await n.objectStore(vs).get(yy(t));return await n.done,r}catch(e){if(e instanceof li)cn.warn(e.message);else{const n=On.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cn.warn(n.message)}}}async function op(t,e){try{const r=(await gy()).transaction(vs,"readwrite");await r.objectStore(vs).put(e,yy(t)),await r.done}catch(n){if(n instanceof li)cn.warn(n.message);else{const r=On.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cn.warn(r.message)}}}function yy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=1024,pT=30*24*60*60*1e3;class mT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const a=new Date(l.date).valueOf();return Date.now()-a<=pT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lp(),{heartbeatsToSend:r,unsentEntries:i}=gT(this._heartbeatsCache.heartbeats),s=dl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return cn.warn(n),""}}}function lp(){return new Date().toISOString().substring(0,10)}function gT(t,e=dT){const n=[];let r=t.slice();for(const i of t){const s=n.find(l=>l.agent===i.agent);if(s){if(s.dates.push(i.date),ap(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ap(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iw()?sw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ap(t){return dl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){gl(new _s("platform-logger",e=>new Pw(e),"PRIVATE")),gl(new _s("heartbeat",e=>new mT(e),"PRIVATE")),br(Zu,ip,t),br(Zu,ip,"esm2017"),br("fire-js","")}_T("");var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,_y;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,m){function _(){}_.prototype=m.prototype,T.D=m.prototype,T.prototype=new _,T.prototype.constructor=T,T.C=function(g,S,A){for(var w=Array(arguments.length-2),be=2;be<arguments.length;be++)w[be-2]=arguments[be];return m.prototype[S].apply(g,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,m,_){_||(_=0);var g=Array(16);if(typeof m=="string")for(var S=0;16>S;++S)g[S]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(S=0;16>S;++S)g[S]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=T.g[0],_=T.g[1],S=T.g[2];var A=T.g[3],w=m+(A^_&(S^A))+g[0]+3614090360&4294967295;m=_+(w<<7&4294967295|w>>>25),w=A+(S^m&(_^S))+g[1]+3905402710&4294967295,A=m+(w<<12&4294967295|w>>>20),w=S+(_^A&(m^_))+g[2]+606105819&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(m^S&(A^m))+g[3]+3250441966&4294967295,_=S+(w<<22&4294967295|w>>>10),w=m+(A^_&(S^A))+g[4]+4118548399&4294967295,m=_+(w<<7&4294967295|w>>>25),w=A+(S^m&(_^S))+g[5]+1200080426&4294967295,A=m+(w<<12&4294967295|w>>>20),w=S+(_^A&(m^_))+g[6]+2821735955&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(m^S&(A^m))+g[7]+4249261313&4294967295,_=S+(w<<22&4294967295|w>>>10),w=m+(A^_&(S^A))+g[8]+1770035416&4294967295,m=_+(w<<7&4294967295|w>>>25),w=A+(S^m&(_^S))+g[9]+2336552879&4294967295,A=m+(w<<12&4294967295|w>>>20),w=S+(_^A&(m^_))+g[10]+4294925233&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(m^S&(A^m))+g[11]+2304563134&4294967295,_=S+(w<<22&4294967295|w>>>10),w=m+(A^_&(S^A))+g[12]+1804603682&4294967295,m=_+(w<<7&4294967295|w>>>25),w=A+(S^m&(_^S))+g[13]+4254626195&4294967295,A=m+(w<<12&4294967295|w>>>20),w=S+(_^A&(m^_))+g[14]+2792965006&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(m^S&(A^m))+g[15]+1236535329&4294967295,_=S+(w<<22&4294967295|w>>>10),w=m+(S^A&(_^S))+g[1]+4129170786&4294967295,m=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(m^_))+g[6]+3225465664&4294967295,A=m+(w<<9&4294967295|w>>>23),w=S+(m^_&(A^m))+g[11]+643717713&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^m&(S^A))+g[0]+3921069994&4294967295,_=S+(w<<20&4294967295|w>>>12),w=m+(S^A&(_^S))+g[5]+3593408605&4294967295,m=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(m^_))+g[10]+38016083&4294967295,A=m+(w<<9&4294967295|w>>>23),w=S+(m^_&(A^m))+g[15]+3634488961&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^m&(S^A))+g[4]+3889429448&4294967295,_=S+(w<<20&4294967295|w>>>12),w=m+(S^A&(_^S))+g[9]+568446438&4294967295,m=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(m^_))+g[14]+3275163606&4294967295,A=m+(w<<9&4294967295|w>>>23),w=S+(m^_&(A^m))+g[3]+4107603335&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^m&(S^A))+g[8]+1163531501&4294967295,_=S+(w<<20&4294967295|w>>>12),w=m+(S^A&(_^S))+g[13]+2850285829&4294967295,m=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(m^_))+g[2]+4243563512&4294967295,A=m+(w<<9&4294967295|w>>>23),w=S+(m^_&(A^m))+g[7]+1735328473&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^m&(S^A))+g[12]+2368359562&4294967295,_=S+(w<<20&4294967295|w>>>12),w=m+(_^S^A)+g[5]+4294588738&4294967295,m=_+(w<<4&4294967295|w>>>28),w=A+(m^_^S)+g[8]+2272392833&4294967295,A=m+(w<<11&4294967295|w>>>21),w=S+(A^m^_)+g[11]+1839030562&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^m)+g[14]+4259657740&4294967295,_=S+(w<<23&4294967295|w>>>9),w=m+(_^S^A)+g[1]+2763975236&4294967295,m=_+(w<<4&4294967295|w>>>28),w=A+(m^_^S)+g[4]+1272893353&4294967295,A=m+(w<<11&4294967295|w>>>21),w=S+(A^m^_)+g[7]+4139469664&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^m)+g[10]+3200236656&4294967295,_=S+(w<<23&4294967295|w>>>9),w=m+(_^S^A)+g[13]+681279174&4294967295,m=_+(w<<4&4294967295|w>>>28),w=A+(m^_^S)+g[0]+3936430074&4294967295,A=m+(w<<11&4294967295|w>>>21),w=S+(A^m^_)+g[3]+3572445317&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^m)+g[6]+76029189&4294967295,_=S+(w<<23&4294967295|w>>>9),w=m+(_^S^A)+g[9]+3654602809&4294967295,m=_+(w<<4&4294967295|w>>>28),w=A+(m^_^S)+g[12]+3873151461&4294967295,A=m+(w<<11&4294967295|w>>>21),w=S+(A^m^_)+g[15]+530742520&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^m)+g[2]+3299628645&4294967295,_=S+(w<<23&4294967295|w>>>9),w=m+(S^(_|~A))+g[0]+4096336452&4294967295,m=_+(w<<6&4294967295|w>>>26),w=A+(_^(m|~S))+g[7]+1126891415&4294967295,A=m+(w<<10&4294967295|w>>>22),w=S+(m^(A|~_))+g[14]+2878612391&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~m))+g[5]+4237533241&4294967295,_=S+(w<<21&4294967295|w>>>11),w=m+(S^(_|~A))+g[12]+1700485571&4294967295,m=_+(w<<6&4294967295|w>>>26),w=A+(_^(m|~S))+g[3]+2399980690&4294967295,A=m+(w<<10&4294967295|w>>>22),w=S+(m^(A|~_))+g[10]+4293915773&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~m))+g[1]+2240044497&4294967295,_=S+(w<<21&4294967295|w>>>11),w=m+(S^(_|~A))+g[8]+1873313359&4294967295,m=_+(w<<6&4294967295|w>>>26),w=A+(_^(m|~S))+g[15]+4264355552&4294967295,A=m+(w<<10&4294967295|w>>>22),w=S+(m^(A|~_))+g[6]+2734768916&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~m))+g[13]+1309151649&4294967295,_=S+(w<<21&4294967295|w>>>11),w=m+(S^(_|~A))+g[4]+4149444226&4294967295,m=_+(w<<6&4294967295|w>>>26),w=A+(_^(m|~S))+g[11]+3174756917&4294967295,A=m+(w<<10&4294967295|w>>>22),w=S+(m^(A|~_))+g[2]+718787259&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~m))+g[9]+3951481745&4294967295,T.g[0]=T.g[0]+m&4294967295,T.g[1]=T.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,m){m===void 0&&(m=T.length);for(var _=m-this.blockSize,g=this.B,S=this.h,A=0;A<m;){if(S==0)for(;A<=_;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<m;)if(g[S++]=T.charCodeAt(A++),S==this.blockSize){i(this,g),S=0;break}}else for(;A<m;)if(g[S++]=T[A++],S==this.blockSize){i(this,g),S=0;break}}this.h=S,this.o+=m},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var m=1;m<T.length-8;++m)T[m]=0;var _=8*this.o;for(m=T.length-8;m<T.length;++m)T[m]=_&255,_/=256;for(this.u(T),T=Array(16),m=_=0;4>m;++m)for(var g=0;32>g;g+=8)T[_++]=this.g[m]>>>g&255;return T};function s(T,m){var _=a;return Object.prototype.hasOwnProperty.call(_,T)?_[T]:_[T]=m(T)}function l(T,m){this.h=m;for(var _=[],g=!0,S=T.length-1;0<=S;S--){var A=T[S]|0;g&&A==m||(_[S]=A,g=!1)}this.g=_}var a={};function u(T){return-128<=T&&128>T?s(T,function(m){return new l([m|0],0>m?-1:0)}):new l([T|0],0>T?-1:0)}function f(T){if(isNaN(T)||!isFinite(T))return y;if(0>T)return x(f(-T));for(var m=[],_=1,g=0;T>=_;g++)m[g]=T/_|0,_*=4294967296;return new l(m,0)}function d(T,m){if(T.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(T.charAt(0)=="-")return x(d(T.substring(1),m));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(m,8)),g=y,S=0;S<T.length;S+=8){var A=Math.min(8,T.length-S),w=parseInt(T.substring(S,S+A),m);8>A?(A=f(Math.pow(m,A)),g=g.j(A).add(f(w))):(g=g.j(_),g=g.add(f(w)))}return g}var y=u(0),v=u(1),R=u(16777216);t=l.prototype,t.m=function(){if(D(this))return-x(this).m();for(var T=0,m=1,_=0;_<this.g.length;_++){var g=this.i(_);T+=(0<=g?g:4294967296+g)*m,m*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(D(this))return"-"+x(this).toString(T);for(var m=f(Math.pow(T,6)),_=this,g="";;){var S=N(_,m).g;_=I(_,S.j(m));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(T);if(_=S,k(_))return A+g;for(;6>A.length;)A="0"+A;g=A+g}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var m=0;m<T.g.length;m++)if(T.g[m]!=0)return!1;return!0}function D(T){return T.h==-1}t.l=function(T){return T=I(this,T),D(T)?-1:k(T)?0:1};function x(T){for(var m=T.g.length,_=[],g=0;g<m;g++)_[g]=~T.g[g];return new l(_,~T.h).add(v)}t.abs=function(){return D(this)?x(this):this},t.add=function(T){for(var m=Math.max(this.g.length,T.g.length),_=[],g=0,S=0;S<=m;S++){var A=g+(this.i(S)&65535)+(T.i(S)&65535),w=(A>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);g=w>>>16,A&=65535,w&=65535,_[S]=w<<16|A}return new l(_,_[_.length-1]&-2147483648?-1:0)};function I(T,m){return T.add(x(m))}t.j=function(T){if(k(this)||k(T))return y;if(D(this))return D(T)?x(this).j(x(T)):x(x(this).j(T));if(D(T))return x(this.j(x(T)));if(0>this.l(R)&&0>T.l(R))return f(this.m()*T.m());for(var m=this.g.length+T.g.length,_=[],g=0;g<2*m;g++)_[g]=0;for(g=0;g<this.g.length;g++)for(var S=0;S<T.g.length;S++){var A=this.i(g)>>>16,w=this.i(g)&65535,be=T.i(S)>>>16,At=T.i(S)&65535;_[2*g+2*S]+=w*At,E(_,2*g+2*S),_[2*g+2*S+1]+=A*At,E(_,2*g+2*S+1),_[2*g+2*S+1]+=w*be,E(_,2*g+2*S+1),_[2*g+2*S+2]+=A*be,E(_,2*g+2*S+2)}for(g=0;g<m;g++)_[g]=_[2*g+1]<<16|_[2*g];for(g=m;g<2*m;g++)_[g]=0;return new l(_,0)};function E(T,m){for(;(T[m]&65535)!=T[m];)T[m+1]+=T[m]>>>16,T[m]&=65535,m++}function C(T,m){this.g=T,this.h=m}function N(T,m){if(k(m))throw Error("division by zero");if(k(T))return new C(y,y);if(D(T))return m=N(x(T),m),new C(x(m.g),x(m.h));if(D(m))return m=N(T,x(m)),new C(x(m.g),m.h);if(30<T.g.length){if(D(T)||D(m))throw Error("slowDivide_ only works with positive integers.");for(var _=v,g=m;0>=g.l(T);)_=z(_),g=z(g);var S=U(_,1),A=U(g,1);for(g=U(g,2),_=U(_,2);!k(g);){var w=A.add(g);0>=w.l(T)&&(S=S.add(_),A=w),g=U(g,1),_=U(_,1)}return m=I(T,S.j(m)),new C(S,m)}for(S=y;0<=T.l(m);){for(_=Math.max(1,Math.floor(T.m()/m.m())),g=Math.ceil(Math.log(_)/Math.LN2),g=48>=g?1:Math.pow(2,g-48),A=f(_),w=A.j(m);D(w)||0<w.l(T);)_-=g,A=f(_),w=A.j(m);k(A)&&(A=v),S=S.add(A),T=I(T,w)}return new C(S,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var m=Math.max(this.g.length,T.g.length),_=[],g=0;g<m;g++)_[g]=this.i(g)&T.i(g);return new l(_,this.h&T.h)},t.or=function(T){for(var m=Math.max(this.g.length,T.g.length),_=[],g=0;g<m;g++)_[g]=this.i(g)|T.i(g);return new l(_,this.h|T.h)},t.xor=function(T){for(var m=Math.max(this.g.length,T.g.length),_=[],g=0;g<m;g++)_[g]=this.i(g)^T.i(g);return new l(_,this.h^T.h)};function z(T){for(var m=T.g.length+1,_=[],g=0;g<m;g++)_[g]=T.i(g)<<1|T.i(g-1)>>>31;return new l(_,T.h)}function U(T,m){var _=m>>5;m%=32;for(var g=T.g.length-_,S=[],A=0;A<g;A++)S[A]=0<m?T.i(A+_)>>>m|T.i(A+_+1)<<32-m:T.i(A+_);return new l(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_y=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=d,rr=l}).apply(typeof up<"u"?up:typeof self<"u"?self:typeof window<"u"?window:{});var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vy,Ui,Ey,zo,nc,wy,Ty,Iy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,h){return o==Array.prototype||o==Object.prototype||(o[c]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof To=="object"&&To];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var P=o[p];if(!(P in h))break e;h=h[P]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&e(h,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var h=0,p=!1,P={next:function(){if(!p&&h<o.length){var V=h++;return{value:c(V,o[V]),done:!1}}return p=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},a=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,h){return o.call.apply(o.bind,arguments)}function y(o,c,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,p),o.apply(c,P)}}return function(){return o.apply(c,arguments)}}function v(o,c,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:y,v.apply(null,arguments)}function R(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function k(o,c){function h(){}h.prototype=c.prototype,o.aa=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,P,V){for(var F=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)F[ae-2]=arguments[ae];return c.prototype[P].apply(p,F)}}function D(o){const c=o.length;if(0<c){const h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function x(o,c){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(u(p)){const P=o.length||0,V=p.length||0;o.length=P+V;for(let F=0;F<V;F++)o[P+F]=p[F]}else o.push(p)}}class I{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function C(){var o=a.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var z=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function U(o,c,h){for(const p in o)c.call(h,o[p],p,o)}function T(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function m(o){const c={};for(const h in o)c[h]=o[h];return c}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function g(o,c){let h,p;for(let P=1;P<arguments.length;P++){p=arguments[P];for(h in p)o[h]=p[h];for(let V=0;V<_.length;V++)h=_[V],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function S(o){var c=1;o=o.split(":");const h=[];for(;0<c&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function A(o){a.setTimeout(()=>{throw o},0)}function w(){var o=K;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class be{constructor(){this.h=this.g=null}add(c,h){const p=At.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var At=new I(()=>new Kt,o=>o.reset());class Kt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ct,B=!1,K=new be,G=()=>{const o=a.Promise.resolve(void 0);Ct=()=>{o.then(pe)}};var pe=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(h){A(h)}var c=At;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}B=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Wt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};a.addEventListener("test",h,c),a.removeEventListener("test",h,c)}catch{}return o}();function qt(o,c){if(Te.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(z){e:{try{N(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Qt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&qt.aa.h.call(this)}}k(qt,Te);var Qt={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Gt="closure_listenable_"+(1e6*Math.random()|0),z_=0;function B_(o,c,h,p,P){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=P,this.key=++z_,this.da=this.fa=!1}function Bs(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function js(o){this.src=o,this.g={},this.h=0}js.prototype.add=function(o,c,h,p,P){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var F=Zl(o,c,p,P);return-1<F?(c=o[F],h||(c.fa=!1)):(c=new B_(c,this.src,V,!!p,P),c.fa=h,o.push(c)),c};function Jl(o,c){var h=c.type;if(h in o.g){var p=o.g[h],P=Array.prototype.indexOf.call(p,c,void 0),V;(V=0<=P)&&Array.prototype.splice.call(p,P,1),V&&(Bs(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function Zl(o,c,h,p){for(var P=0;P<o.length;++P){var V=o[P];if(!V.da&&V.listener==c&&V.capture==!!h&&V.ha==p)return P}return-1}var ea="closure_lm_"+(1e6*Math.random()|0),ta={};function Hh(o,c,h,p,P){if(Array.isArray(c)){for(var V=0;V<c.length;V++)Hh(o,c[V],h,p,P);return null}return h=qh(h),o&&o[Gt]?o.K(c,h,f(p)?!!p.capture:!1,P):j_(o,c,h,!1,p,P)}function j_(o,c,h,p,P,V){if(!c)throw Error("Invalid event type");var F=f(P)?!!P.capture:!!P,ae=ra(o);if(ae||(o[ea]=ae=new js(o)),h=ae.add(c,h,p,F,V),h.proxy)return h;if(p=b_(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Wt||(P=F),P===void 0&&(P=!1),o.addEventListener(c.toString(),p,P);else if(o.attachEvent)o.attachEvent(Wh(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function b_(){function o(h){return c.call(o.src,o.listener,h)}const c=$_;return o}function Kh(o,c,h,p,P){if(Array.isArray(c))for(var V=0;V<c.length;V++)Kh(o,c[V],h,p,P);else p=f(p)?!!p.capture:!!p,h=qh(h),o&&o[Gt]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],h=Zl(V,h,p,P),-1<h&&(Bs(V[h]),Array.prototype.splice.call(V,h,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=ra(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Zl(c,h,p,P)),(h=-1<o?c[o]:null)&&na(h))}function na(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Gt])Jl(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(Wh(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=ra(c))?(Jl(h,o),h.h==0&&(h.src=null,c[ea]=null)):Bs(o)}}}function Wh(o){return o in ta?ta[o]:ta[o]="on"+o}function $_(o,c){if(o.da)o=!0;else{c=new qt(c,this);var h=o.listener,p=o.ha||o.src;o.fa&&na(o),o=h.call(p,c)}return o}function ra(o){return o=o[ea],o instanceof js?o:null}var ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function qh(o){return typeof o=="function"?o:(o[ia]||(o[ia]=function(c){return o.handleEvent(c)}),o[ia])}function $e(){le.call(this),this.i=new js(this),this.M=this,this.F=null}k($e,le),$e.prototype[Gt]=!0,$e.prototype.removeEventListener=function(o,c,h,p){Kh(this,o,c,h,p)};function Ze(o,c){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Te(c,o);else if(c instanceof Te)c.target=c.target||o;else{var P=c;c=new Te(p,o),g(c,P)}if(P=!0,h)for(var V=h.length-1;0<=V;V--){var F=c.g=h[V];P=bs(F,p,!0,c)&&P}if(F=c.g=o,P=bs(F,p,!0,c)&&P,P=bs(F,p,!1,c)&&P,h)for(V=0;V<h.length;V++)F=c.g=h[V],P=bs(F,p,!1,c)&&P}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var h=o.g[c],p=0;p<h.length;p++)Bs(h[p]);delete o.g[c],o.h--}}this.F=null},$e.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},$e.prototype.L=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function bs(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,V=0;V<c.length;++V){var F=c[V];if(F&&!F.da&&F.capture==h){var ae=F.listener,Oe=F.ha||F.src;F.fa&&Jl(o.i,F),P=ae.call(Oe,p)!==!1&&P}}return P&&!p.defaultPrevented}function Qh(o,c,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:a.setTimeout(o,c||0)}function Gh(o){o.g=Qh(()=>{o.g=null,o.i&&(o.i=!1,Gh(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class H_ extends le{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Gh(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(o){le.call(this),this.h=o,this.g={}}k(fi,le);var Yh=[];function Xh(o){U(o.g,function(c,h){this.g.hasOwnProperty(h)&&na(c)},o),o.g={}}fi.prototype.N=function(){fi.aa.N.call(this),Xh(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sa=a.JSON.stringify,K_=a.JSON.parse,W_=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function oa(){}oa.prototype.h=null;function Jh(o){return o.h||(o.h=o.i())}function Zh(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function la(){Te.call(this,"d")}k(la,Te);function aa(){Te.call(this,"c")}k(aa,Te);var Hn={},ef=null;function $s(){return ef=ef||new $e}Hn.La="serverreachability";function tf(o){Te.call(this,Hn.La,o)}k(tf,Te);function pi(o){const c=$s();Ze(c,new tf(c))}Hn.STAT_EVENT="statevent";function nf(o,c){Te.call(this,Hn.STAT_EVENT,o),this.stat=c}k(nf,Te);function et(o){const c=$s();Ze(c,new nf(c,o))}Hn.Ma="timingevent";function rf(o,c){Te.call(this,Hn.Ma,o),this.size=c}k(rf,Te);function mi(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function q_(o,c,h,p,P,V){o.info(function(){if(o.g)if(V)for(var F="",ae=V.split("&"),Oe=0;Oe<ae.length;Oe++){var ne=ae[Oe].split("=");if(1<ne.length){var He=ne[0];ne=ne[1];var Ke=He.split("_");F=2<=Ke.length&&Ke[1]=="type"?F+(He+"="+ne+"&"):F+(He+"=redacted&")}}else F=null;else F=V;return"XMLHTTP REQ ("+p+") [attempt "+P+"]: "+c+`
`+h+`
`+F})}function Q_(o,c,h,p,P,V,F){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+P+"]: "+c+`
`+h+`
`+V+" "+F})}function gr(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Y_(o,h)+(p?" "+p:"")})}function G_(o,c){o.info(function(){return"TIMEOUT: "+c})}gi.prototype.info=function(){};function Y_(o,c){if(!o.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var P=p[1];if(Array.isArray(P)&&!(1>P.length)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(var F=1;F<P.length;F++)P[F]=""}}}}return sa(h)}catch{return c}}var Hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ua;function Ks(){}k(Ks,oa),Ks.prototype.g=function(){return new XMLHttpRequest},Ks.prototype.i=function(){return{}},ua=new Ks;function pn(o,c,h,p){this.j=o,this.i=c,this.l=h,this.R=p||1,this.U=new fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new of}function of(){this.i=null,this.g="",this.h=!1}var lf={},ca={};function ha(o,c,h){o.L=1,o.v=Gs(Yt(c)),o.m=h,o.P=!0,af(o,null)}function af(o,c){o.F=Date.now(),Ws(o),o.A=Yt(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Tf(h.i,"t",p),o.C=0,h=o.j.J,o.h=new of,o.g=Bf(o.j,h?c:null,!o.m),0<o.O&&(o.M=new H_(v(o.Y,o,o.g),o.O)),c=o.U,h=o.g,p=o.ca;var P="readystatechange";Array.isArray(P)||(P&&(Yh[0]=P.toString()),P=Yh);for(var V=0;V<P.length;V++){var F=Hh(h,P[V],p||c.handleEvent,!1,c.h||c);if(!F)break;c.g[F.key]=F}c=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),pi(),q_(o.i,o.u,o.A,o.l,o.R,o.m)}pn.prototype.ca=function(o){o=o.target;const c=this.M;c&&Xt(o)==3?c.j():this.Y(o)},pn.prototype.Y=function(o){try{if(o==this.g)e:{const Ke=Xt(this.g);var c=this.g.Ba();const vr=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||kf(this.g)))){this.J||Ke!=4||c==7||(c==8||0>=vr?pi(3):pi(2)),fa(this);var h=this.g.Z();this.X=h;t:if(uf(this)){var p=kf(this.g);o="";var P=p.length,V=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kn(this),yi(this);var F="";break t}this.h.i=new a.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(V&&c==P-1)});p.length=0,this.h.g+=o,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=h==200,Q_(this.i,this.u,this.A,this.l,this.R,Ke,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ae,Oe=this.g;if((ae=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ae)){var ne=ae;break t}}ne=null}if(h=ne)gr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,da(this,h);else{this.o=!1,this.s=3,et(12),Kn(this),yi(this);break e}}if(this.P){h=!0;let Rt;for(;!this.J&&this.C<F.length;)if(Rt=X_(this,F),Rt==ca){Ke==4&&(this.s=4,et(14),h=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==lf){this.s=4,et(15),gr(this.i,this.l,F,"[Invalid Chunk]"),h=!1;break}else gr(this.i,this.l,Rt,null),da(this,Rt);if(uf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||F.length!=0||this.h.h||(this.s=1,et(16),h=!1),this.o=this.o&&h,!h)gr(this.i,this.l,F,"[Invalid Chunked Response]"),Kn(this),yi(this);else if(0<F.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),va(He),He.M=!0,et(11))}}else gr(this.i,this.l,F,null),da(this,F);Ke==4&&Kn(this),this.o&&!this.J&&(Ke==4?Mf(this.j,this):(this.o=!1,Ws(this)))}else pv(this.g),h==400&&0<F.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),Kn(this),yi(this)}}}catch{}finally{}};function uf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function X_(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?ca:(h=Number(c.substring(h,p)),isNaN(h)?lf:(p+=1,p+h>c.length?ca:(c=c.slice(p,p+h),o.C=p+h,c)))}pn.prototype.cancel=function(){this.J=!0,Kn(this)};function Ws(o){o.S=Date.now()+o.I,cf(o,o.I)}function cf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=mi(v(o.ba,o),c)}function fa(o){o.B&&(a.clearTimeout(o.B),o.B=null)}pn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(G_(this.i,this.A),this.L!=2&&(pi(),et(17)),Kn(this),this.s=2,yi(this)):cf(this,this.S-o)};function yi(o){o.j.G==0||o.J||Mf(o.j,o)}function Kn(o){fa(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Xh(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function da(o,c){try{var h=o.j;if(h.G!=0&&(h.g==o||pa(h.h,o))){if(!o.K&&pa(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var P=p;if(P[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)to(h),Zs(h);else break e;_a(h),et(18)}}else h.za=P[1],0<h.za-h.T&&37500>P[2]&&h.F&&h.v==0&&!h.C&&(h.C=mi(v(h.Za,h),6e3));if(1>=df(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else qn(h,11)}else if((o.K||h.g==o)&&to(h),!E(c))for(P=h.Da.g.parse(c),c=0;c<P.length;c++){let ne=P[c];if(h.T=ne[0],ne=ne[1],h.G==2)if(ne[0]=="c"){h.K=ne[1],h.ia=ne[2];const He=ne[3];He!=null&&(h.la=He,h.j.info("VER="+h.la));const Ke=ne[4];Ke!=null&&(h.Aa=Ke,h.j.info("SVER="+h.Aa));const vr=ne[5];vr!=null&&typeof vr=="number"&&0<vr&&(p=1.5*vr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const Rt=o.g;if(Rt){const ro=Rt.g?Rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var V=p.h;V.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ma(V,V.h),V.h=null))}if(p.D){const Ea=Rt.g?Rt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ea&&(p.ya=Ea,ce(p.I,p.D,Ea))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var F=o;if(p.qa=zf(p,p.J?p.ia:null,p.W),F.K){pf(p.h,F);var ae=F,Oe=p.L;Oe&&(ae.I=Oe),ae.B&&(fa(ae),Ws(ae)),p.g=F}else Of(p);0<h.i.length&&eo(h)}else ne[0]!="stop"&&ne[0]!="close"||qn(h,7);else h.G==3&&(ne[0]=="stop"||ne[0]=="close"?ne[0]=="stop"?qn(h,7):ya(h):ne[0]!="noop"&&h.l&&h.l.ta(ne),h.v=0)}}pi(4)}catch{}}var J_=class{constructor(o,c){this.g=o,this.map=c}};function hf(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ff(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function df(o){return o.h?1:o.g?o.g.size:0}function pa(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ma(o,c){o.g?o.g.add(c):o.h=c}function pf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}hf.prototype.cancel=function(){if(this.i=mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function mf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.D);return c}return D(o.i)}function Z_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],h=o.length,p=0;p<h;p++)c.push(o[p]);return c}c=[],h=0;for(p in o)c[h++]=o[p];return c}function ev(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var h=0;h<o;h++)c.push(h);return c}c=[],h=0;for(const p in o)c[h++]=p;return c}}}function gf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var h=ev(o),p=Z_(o),P=p.length,V=0;V<P;V++)c.call(void 0,p[V],h&&h[V],o)}var yf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tv(o,c){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),P=null;if(0<=p){var V=o[h].substring(0,p);P=o[h].substring(p+1)}else V=o[h];c(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Wn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Wn){this.h=o.h,qs(this,o.j),this.o=o.o,this.g=o.g,Qs(this,o.s),this.l=o.l;var c=o.i,h=new Ei;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),_f(this,h),this.m=o.m}else o&&(c=String(o).match(yf))?(this.h=!1,qs(this,c[1]||"",!0),this.o=_i(c[2]||""),this.g=_i(c[3]||"",!0),Qs(this,c[4]),this.l=_i(c[5]||"",!0),_f(this,c[6]||"",!0),this.m=_i(c[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Wn.prototype.toString=function(){var o=[],c=this.j;c&&o.push(vi(c,vf,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(vi(c,vf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(vi(h,h.charAt(0)=="/"?iv:rv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",vi(h,ov)),o.join("")};function Yt(o){return new Wn(o)}function qs(o,c,h){o.j=h?_i(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Qs(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function _f(o,c,h){c instanceof Ei?(o.i=c,lv(o.i,o.h)):(h||(c=vi(c,sv)),o.i=new Ei(c,o.h))}function ce(o,c,h){o.i.set(c,h)}function Gs(o){return ce(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function _i(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function vi(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,nv),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function nv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var vf=/[#\/\?@]/g,rv=/[#\?:]/g,iv=/[#\?]/g,sv=/[#\?@]/g,ov=/#/g;function Ei(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function mn(o){o.g||(o.g=new Map,o.h=0,o.i&&tv(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=Ei.prototype,t.add=function(o,c){mn(this),this.i=null,o=yr(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function Ef(o,c){mn(o),c=yr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function wf(o,c){return mn(o),c=yr(o,c),o.g.has(c)}t.forEach=function(o,c){mn(this),this.g.forEach(function(h,p){h.forEach(function(P){o.call(c,P,p,this)},this)},this)},t.na=function(){mn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let p=0;p<c.length;p++){const P=o[p];for(let V=0;V<P.length;V++)h.push(c[p])}return h},t.V=function(o){mn(this);let c=[];if(typeof o=="string")wf(this,o)&&(c=c.concat(this.g.get(yr(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)c=c.concat(o[h])}return c},t.set=function(o,c){return mn(this),this.i=null,o=yr(this,o),wf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Tf(o,c,h){Ef(o,c),0<h.length&&(o.i=null,o.g.set(yr(o,c),D(h)),o.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var p=c[h];const V=encodeURIComponent(String(p)),F=this.V(p);for(p=0;p<F.length;p++){var P=V;F[p]!==""&&(P+="="+encodeURIComponent(String(F[p]))),o.push(P)}}return this.i=o.join("&")};function yr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function lv(o,c){c&&!o.j&&(mn(o),o.i=null,o.g.forEach(function(h,p){var P=p.toLowerCase();p!=P&&(Ef(this,p),Tf(this,P,h))},o)),o.j=c}function av(o,c){const h=new gi;if(a.Image){const p=new Image;p.onload=R(gn,h,"TestLoadImage: loaded",!0,c,p),p.onerror=R(gn,h,"TestLoadImage: error",!1,c,p),p.onabort=R(gn,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=R(gn,h,"TestLoadImage: timeout",!1,c,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function uv(o,c){const h=new gi,p=new AbortController,P=setTimeout(()=>{p.abort(),gn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(V=>{clearTimeout(P),V.ok?gn(h,"TestPingServer: ok",!0,c):gn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),gn(h,"TestPingServer: error",!1,c)})}function gn(o,c,h,p,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),p(h)}catch{}}function cv(){this.g=new W_}function hv(o,c,h){const p=h||"";try{gf(o,function(P,V){let F=P;f(P)&&(F=sa(P)),c.push(p+V+"="+encodeURIComponent(F))})}catch(P){throw c.push(p+"type="+encodeURIComponent("_badmap")),P}}function Ys(o){this.l=o.Ub||null,this.j=o.eb||!1}k(Ys,oa),Ys.prototype.g=function(){return new Xs(this.l,this.j)},Ys.prototype.i=function(o){return function(){return o}}({});function Xs(o,c){$e.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Xs,$e),t=Xs.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ti(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||a).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;If(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function If(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?wi(this):Ti(this),this.readyState==3&&If(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,wi(this))},t.Qa=function(o){this.g&&(this.response=o,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ti(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function Ti(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Sf(o){let c="";return U(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function ga(o,c,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Sf(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):ce(o,c,h))}function ve(o){$e.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ve,$e);var fv=/^https?$/i,dv=["POST","PUT"];t=ve.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ua.g(),this.v=this.o?Jh(this.o):Jh(ua),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){Af(this,V);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var P in p)h.set(P,p[P]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const V of p.keys())h.set(V,p.get(V));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(V=>V.toLowerCase()=="content-type"),P=a.FormData&&o instanceof a.FormData,!(0<=Array.prototype.indexOf.call(dv,c,void 0))||p||P||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,F]of h)this.g.setRequestHeader(V,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pf(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){Af(this,V)}};function Af(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Cf(o),Js(o)}function Cf(o){o.A||(o.A=!0,Ze(o,"complete"),Ze(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ze(this,"complete"),Ze(this,"abort"),Js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rf(this):this.bb())},t.bb=function(){Rf(this)};function Rf(o){if(o.h&&typeof l<"u"&&(!o.v[1]||Xt(o)!=4||o.Z()!=2)){if(o.u&&Xt(o)==4)Qh(o.Ea,0,o);else if(Ze(o,"readystatechange"),Xt(o)==4){o.h=!1;try{const F=o.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var p;if(p=F===0){var P=String(o.D).match(yf)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),p=!fv.test(P?P.toLowerCase():"")}h=p}if(h)Ze(o,"complete"),Ze(o,"success");else{o.m=6;try{var V=2<Xt(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",Cf(o)}}finally{Js(o)}}}}function Js(o,c){if(o.g){Pf(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Ze(o,"ready");try{h.onreadystatechange=p}catch{}}}function Pf(o){o.I&&(a.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Xt(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),K_(c)}};function kf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function pv(o){const c={};o=(o.g&&2<=Xt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var h=S(o[p]);const P=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const V=c[P]||[];c[P]=V,V.push(h)}T(c,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function Vf(o){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ii("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ii("baseRetryDelayMs",5e3,o),this.cb=Ii("retryDelaySeedMs",1e4,o),this.Wa=Ii("forwardChannelMaxRetries",2,o),this.wa=Ii("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new hf(o&&o.concurrentRequestLimit),this.Da=new cv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vf.prototype,t.la=8,t.G=1,t.connect=function(o,c,h,p){et(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=zf(this,null,this.W),eo(this)};function ya(o){if(Df(o),o.G==3){var c=o.U++,h=Yt(o.I);if(ce(h,"SID",o.K),ce(h,"RID",c),ce(h,"TYPE","terminate"),Si(o,h),c=new pn(o,o.j,c),c.L=2,c.v=Gs(Yt(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=c.v,h=!0),h||(c.g=Bf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ws(c)}Uf(o)}function Zs(o){o.g&&(va(o),o.g.cancel(),o.g=null)}function Df(o){Zs(o),o.u&&(a.clearTimeout(o.u),o.u=null),to(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&a.clearTimeout(o.s),o.s=null)}function eo(o){if(!ff(o.h)&&!o.s){o.s=!0;var c=o.Ga;Ct||G(),B||(Ct(),B=!0),K.add(c,o),o.B=0}}function mv(o,c){return df(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=mi(v(o.Ga,o,c),Ff(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const P=new pn(this,this.j,o);let V=this.o;if(this.S&&(V?(V=m(V),g(V,this.S)):V=this.S),this.m!==null||this.O||(P.H=V,V=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=Nf(this,P,c),h=Yt(this.I),ce(h,"RID",o),ce(h,"CVER",22),this.D&&ce(h,"X-HTTP-Session-Id",this.D),Si(this,h),V&&(this.O?c="headers="+encodeURIComponent(String(Sf(V)))+"&"+c:this.m&&ga(h,this.m,V)),ma(this.h,P),this.Ua&&ce(h,"TYPE","init"),this.P?(ce(h,"$req",c),ce(h,"SID","null"),P.T=!0,ha(P,h,null)):ha(P,h,c),this.G=2}}else this.G==3&&(o?xf(this,o):this.i.length==0||ff(this.h)||xf(this))};function xf(o,c){var h;c?h=c.l:h=o.U++;const p=Yt(o.I);ce(p,"SID",o.K),ce(p,"RID",h),ce(p,"AID",o.T),Si(o,p),o.m&&o.o&&ga(p,o.m,o.o),h=new pn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Nf(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ma(o.h,h),ha(h,p,c)}function Si(o,c){o.H&&U(o.H,function(h,p){ce(c,p,h)}),o.l&&gf({},function(h,p){ce(c,p,h)})}function Nf(o,c,h){h=Math.min(o.i.length,h);var p=o.l?v(o.l.Na,o.l,o):null;e:{var P=o.i;let V=-1;for(;;){const F=["count="+h];V==-1?0<h?(V=P[0].g,F.push("ofs="+V)):V=0:F.push("ofs="+V);let ae=!0;for(let Oe=0;Oe<h;Oe++){let ne=P[Oe].g;const He=P[Oe].map;if(ne-=V,0>ne)V=Math.max(0,P[Oe].g-100),ae=!1;else try{hv(He,F,"req"+ne+"_")}catch{p&&p(He)}}if(ae){p=F.join("&");break e}}}return o=o.i.splice(0,h),c.D=o,p}function Of(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Ct||G(),B||(Ct(),B=!0),K.add(c,o),o.v=0}}function _a(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=mi(v(o.Fa,o),Ff(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Lf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=mi(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Zs(this),Lf(this))};function va(o){o.A!=null&&(a.clearTimeout(o.A),o.A=null)}function Lf(o){o.g=new pn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Yt(o.qa);ce(c,"RID","rpc"),ce(c,"SID",o.K),ce(c,"AID",o.T),ce(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ce(c,"TO",o.ja),ce(c,"TYPE","xmlhttp"),Si(o,c),o.m&&o.o&&ga(c,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Gs(Yt(c)),h.m=null,h.P=!0,af(h,o)}t.Za=function(){this.C!=null&&(this.C=null,Zs(this),_a(this),et(19))};function to(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Mf(o,c){var h=null;if(o.g==c){to(o),va(o),o.g=null;var p=2}else if(pa(o.h,c))h=c.D,pf(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var P=o.B;p=$s(),Ze(p,new rf(p,h)),eo(o)}else Of(o);else if(P=c.s,P==3||P==0&&0<c.X||!(p==1&&mv(o,c)||p==2&&_a(o)))switch(h&&0<h.length&&(c=o.h,c.i=c.i.concat(h)),P){case 1:qn(o,5);break;case 4:qn(o,10);break;case 3:qn(o,6);break;default:qn(o,2)}}}function Ff(o,c){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*c}function qn(o,c){if(o.j.info("Error code "+c),c==2){var h=v(o.fb,o),p=o.Xa;const P=!p;p=new Wn(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qs(p,"https"),Gs(p),P?av(p.toString(),h):uv(p.toString(),h)}else et(2);o.G=0,o.l&&o.l.sa(c),Uf(o),Df(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Uf(o){if(o.G=0,o.ka=[],o.l){const c=mf(o.h);(c.length!=0||o.i.length!=0)&&(x(o.ka,c),x(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function zf(o,c,h){var p=h instanceof Wn?Yt(h):new Wn(h);if(p.g!="")c&&(p.g=c+"."+p.g),Qs(p,p.s);else{var P=a.location;p=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var V=new Wn(null);p&&qs(V,p),c&&(V.g=c),P&&Qs(V,P),h&&(V.l=h),p=V}return h=o.D,c=o.ya,h&&c&&ce(p,h,c),ce(p,"VER",o.la),Si(o,p),p}function Bf(o,c,h){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new ve(new Ys({eb:h})):new ve(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jf(){}t=jf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function no(){}no.prototype.g=function(o,c){return new ct(o,c)};function ct(o,c){$e.call(this),this.g=new Vf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new _r(this)}k(ct,$e),ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ct.prototype.close=function(){ya(this.g)},ct.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=sa(o),o=h);c.i.push(new J_(c.Ya++,o)),c.G==3&&eo(c)},ct.prototype.N=function(){this.g.l=null,delete this.j,ya(this.g),delete this.g,ct.aa.N.call(this)};function bf(o){la.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const h in c){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}k(bf,la);function $f(){aa.call(this),this.status=1}k($f,aa);function _r(o){this.g=o}k(_r,jf),_r.prototype.ua=function(){Ze(this.g,"a")},_r.prototype.ta=function(o){Ze(this.g,new bf(o))},_r.prototype.sa=function(o){Ze(this.g,new $f)},_r.prototype.ra=function(){Ze(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,ct.prototype.send=ct.prototype.o,ct.prototype.open=ct.prototype.m,ct.prototype.close=ct.prototype.close,Iy=function(){return new no},Ty=function(){return $s()},wy=Hn,nc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,zo=Hs,sf.COMPLETE="complete",Ey=sf,Zh.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Ui=Zh,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,vy=ve}).apply(typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{});const cp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new fy("@firebase/firestore");function Ni(){return ur.logLevel}function b(t,...e){if(ur.logLevel<=ee.DEBUG){const n=e.map(dh);ur.debug(`Firestore (${ai}): ${t}`,...n)}}function hn(t,...e){if(ur.logLevel<=ee.ERROR){const n=e.map(dh);ur.error(`Firestore (${ai}): ${t}`,...n)}}function Xr(t,...e){if(ur.logLevel<=ee.WARN){const n=e.map(dh);ur.warn(`Firestore (${ai}): ${t}`,...n)}}function dh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t="Unexpected state"){const e=`FIRESTORE (${ai}) INTERNAL ASSERTION FAILED: `+t;throw hn(e),new Error(e)}function oe(t,e){t||W()}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}}class ET{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wT{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ln,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ln)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new Sy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Ge(e)}}class TT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class IT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new TT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ST{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){oe(this.o===void 0);const r=s=>{s.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.R;return this.R=s.token,b("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new ST(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=CT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Jr(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new Ve(0,0))}static max(){return new q(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Es?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),l=n.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Es{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const RT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends Es{construct(e,n,r){return new Fe(e,n,r)}static isValidIdentifier(e){return RT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(l=!l,i++):a!=="."||l?(r+=a,i++):(s(),i++)}if(s(),l)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(we.fromString(e))}static fromName(e){return new H(we.fromString(e).popFirst(5))}static empty(){return new H(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new we(e.slice()))}}function PT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Un(i,H.empty(),e)}function kT(t){return new Un(t.readTime,t.key,-1)}class Un{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Un(q.min(),H.empty(),-1)}static max(){return new Un(q.max(),H.empty(),-1)}}function VT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==DT)throw t;b("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,l=!1;e.forEach(a=>{++i,a.next(()=>{++s,l&&s===i&&n()},u=>r(u))}),l=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,l=new Array(s);let a=0;for(let u=0;u<s;u++){const f=u;n(e[f]).next(d=>{l[f]=d,++a,a===s&&r(l)},d=>i(d))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function NT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ls(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ph.oe=-1;function bl(t){return t==null}function yl(t){return t===0&&1/t==-1/0}function OT(t){return typeof t=="number"&&Number.isInteger(t)&&!yl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.comparator=e,this.root=n||Me.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Me.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Me.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}}class Io{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Me{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Me.RED,this.left=i??Me.EMPTY,this.right=s??Me.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Me(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Me.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Me.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Me.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Me.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}}Me.EMPTY=null,Me.RED=!0,Me.BLACK=!1;Me.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Me(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fp(this.data.getIterator())}getIteratorFrom(e){return new fp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class fp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new xt([])}unionWith(e){let n=new ze(Fe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jr(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ry("Invalid base64 string: "+s):s}}(e);return new je(n)}static fromUint8Array(e){const n=function(i){let s="";for(let l=0;l<i.length;++l)s+=String.fromCharCode(i[l]);return s}(e);return new je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}je.EMPTY_BYTE_STRING=new je("");const LT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zn(t){if(oe(!!t),typeof t=="string"){let e=0;const n=LT.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cr(t){return typeof t=="string"?je.fromBase64String(t):je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gh(t){const e=t.mapValue.fields.__previous_value__;return mh(e)?gh(e):e}function ws(t){const e=zn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n,r,i,s,l,a,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=f}}class Ts{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ts("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ts&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So={mapValue:{}};function hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mh(t)?4:UT(t)?9007199254740991:FT(t)?10:11:W()}function $t(t,e){if(t===e)return!0;const n=hr(t);if(n!==hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ws(t).isEqual(ws(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const l=zn(i.timestampValue),a=zn(s.timestampValue);return l.seconds===a.seconds&&l.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return cr(i.bytesValue).isEqual(cr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ie(i.geoPointValue.latitude)===Ie(s.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ie(i.integerValue)===Ie(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const l=Ie(i.doubleValue),a=Ie(s.doubleValue);return l===a?yl(l)===yl(a):isNaN(l)&&isNaN(a)}return!1}(t,e);case 9:return Jr(t.arrayValue.values||[],e.arrayValue.values||[],$t);case 10:case 11:return function(i,s){const l=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hp(l)!==hp(a))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(a[u]===void 0||!$t(l[u],a[u])))return!1;return!0}(t,e);default:return W()}}function Is(t,e){return(t.values||[]).find(n=>$t(n,e))!==void 0}function Zr(t,e){if(t===e)return 0;const n=hr(t),r=hr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,l){const a=Ie(s.integerValue||s.doubleValue),u=Ie(l.integerValue||l.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return dp(t.timestampValue,e.timestampValue);case 4:return dp(ws(t),ws(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,l){const a=cr(s),u=cr(l);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,l){const a=s.split("/"),u=l.split("/");for(let f=0;f<a.length&&f<u.length;f++){const d=re(a[f],u[f]);if(d!==0)return d}return re(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,l){const a=re(Ie(s.latitude),Ie(l.latitude));return a!==0?a:re(Ie(s.longitude),Ie(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pp(t.arrayValue,e.arrayValue);case 10:return function(s,l){var a,u,f,d;const y=s.fields||{},v=l.fields||{},R=(a=y.value)===null||a===void 0?void 0:a.arrayValue,k=(u=v.value)===null||u===void 0?void 0:u.arrayValue,D=re(((f=R==null?void 0:R.values)===null||f===void 0?void 0:f.length)||0,((d=k==null?void 0:k.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:pp(R,k)}(t.mapValue,e.mapValue);case 11:return function(s,l){if(s===So.mapValue&&l===So.mapValue)return 0;if(s===So.mapValue)return 1;if(l===So.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),f=l.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let y=0;y<u.length&&y<d.length;++y){const v=re(u[y],d[y]);if(v!==0)return v;const R=Zr(a[u[y]],f[d[y]]);if(R!==0)return R}return re(u.length,d.length)}(t.mapValue,e.mapValue);default:throw W()}}function dp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=zn(t),r=zn(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function pp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Zr(n[i],r[i]);if(s)return s}return re(n.length,r.length)}function ei(t){return rc(t)}function rc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const l of r)s?s=!1:i+=",",i+=`${l}:${rc(n.fields[l])}`;return i+"}"}(t.mapValue):W()}function ic(t){return!!t&&"integerValue"in t}function yh(t){return!!t&&"arrayValue"in t}function mp(t){return!!t&&"nullValue"in t}function gp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bo(t){return!!t&&"mapValue"in t}function FT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Xi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xi(n)}setAll(e){let n=Fe.emptyPath(),r={},i=[];e.forEach((l,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}l?r[a.lastSegment()]=Xi(l):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Bo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $t(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ui(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vt(Xi(this.value))}}function Py(t){const e=[];return ui(t.fields,(n,r)=>{const i=new Fe([n]);if(Bo(r)){const s=Py(r.mapValue).fields;if(s.length===0)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n,r,i,s,l,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=a}static newInvalidDocument(e){return new Xe(e,0,q.min(),q.min(),q.min(),vt.empty(),0)}static newFoundDocument(e,n,r,i){return new Xe(e,1,n,q.min(),r,i,0)}static newNoDocument(e,n){return new Xe(e,2,n,q.min(),q.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new Xe(e,3,n,q.min(),q.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.position=e,this.inclusive=n}}function yp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],l=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(l.referenceValue),n.key):r=Zr(l,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _p(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$t(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function zT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{}class Pe extends ky{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jT(e,n,r):n==="array-contains"?new HT(e,r):n==="in"?new KT(e,r):n==="not-in"?new WT(e,r):n==="array-contains-any"?new qT(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bT(e,r):new $T(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zr(n,this.value)):n!==null&&hr(this.value)===hr(n)&&this.matchesComparison(Zr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends ky{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ht(e,n)}matches(e){return Vy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vy(t){return t.op==="and"}function Dy(t){return BT(t)&&Vy(t)}function BT(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function sc(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+ei(t.value);if(Dy(t))return t.filters.map(e=>sc(e)).join(",");{const e=t.filters.map(n=>sc(n)).join(",");return`${t.op}(${e})`}}function xy(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&$t(r.value,i.value)}(t,e):t instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,l,a)=>s&&xy(l,i.filters[a]),!0):!1}(t,e):void W()}function Ny(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${ei(n.value)}`}(t):t instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(Ny).join(" ,")+"}"}(t):"Filter"}class jT extends Pe{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class bT extends Pe{constructor(e,n){super(e,"in",n),this.keys=Oy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $T extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=Oy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Oy(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class HT extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yh(n)&&Is(n.arrayValue,this.value)}}class KT extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Is(this.value.arrayValue,n)}}class WT extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Is(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Is(this.value.arrayValue,n)}}class qT extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Is(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n=null,r=[],i=[],s=null,l=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=a,this.ue=null}}function vp(t,e=null,n=[],r=[],i=null,s=null,l=null){return new QT(t,e,n,r,i,s,l)}function _h(t){const e=Q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ei(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ei(r)).join(",")),e.ue=n}return e.ue}function vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_p(t.startAt,e.startAt)&&_p(t.endAt,e.endAt)}function oc(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n=null,r=[],i=[],s=null,l="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GT(t,e,n,r,i,s,l,a){return new $l(t,e,n,r,i,s,l,a)}function Eh(t){return new $l(t)}function Ep(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YT(t){return t.collectionGroup!==null}function Ji(t){const e=Q(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let a=new ze(Fe.comparator);return l.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(a=a.add(f.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vl(s,r))}),n.has(Fe.keyField().canonicalString())||e.ce.push(new vl(Fe.keyField(),r))}return e.ce}function jt(t){const e=Q(t);return e.le||(e.le=XT(e,Ji(t))),e.le}function XT(t,e){if(t.limitType==="F")return vp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new vl(i.field,s)});const n=t.endAt?new _l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _l(t.startAt.position,t.startAt.inclusive):null;return vp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lc(t,e,n){return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hl(t,e){return vh(jt(t),jt(e))&&t.limitType===e.limitType}function Ly(t){return`${_h(jt(t))}|lt:${t.limitType}`}function wr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ny(i)).join(", ")}]`),bl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ei(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ei(i)).join(",")),`Target(${r})`}(jt(t))}; limitType=${t.limitType})`}function Kl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ji(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,a,u){const f=yp(l,a,u);return l.inclusive?f<=0:f<0}(r.startAt,Ji(r),i)||r.endAt&&!function(l,a,u){const f=yp(l,a,u);return l.inclusive?f>=0:f>0}(r.endAt,Ji(r),i))}(t,e)}function JT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function My(t){return(e,n)=>{let r=!1;for(const i of Ji(t)){const s=ZT(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZT(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,l,a){const u=l.data.field(s),f=a.data.field(s);return u!==null&&f!==null?Zr(u,f):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Cy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new _e(H.comparator);function fn(){return eI}const Fy=new _e(H.comparator);function zi(...t){let e=Fy;for(const n of t)e=e.insert(n.key,n);return e}function Uy(t){let e=Fy;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function er(){return Zi()}function zy(){return Zi()}function Zi(){return new ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const tI=new _e(H.comparator),nI=new ze(H.comparator);function X(...t){let e=nI;for(const n of t)e=e.add(n);return e}const rI=new ze(re);function iI(){return rI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(e)?"-0":e}}function By(t){return{integerValue:""+t}}function sI(t,e){return OT(e)?By(e):wh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this._=void 0}}function oI(t,e,n){return t instanceof El?function(i,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mh(s)&&(s=gh(s)),s&&(l.fields.__previous_value__=s),{mapValue:l}}(n,e):t instanceof Ss?by(t,e):t instanceof As?$y(t,e):function(i,s){const l=jy(i,s),a=wp(l)+wp(i.Pe);return ic(l)&&ic(i.Pe)?By(a):wh(i.serializer,a)}(t,e)}function lI(t,e,n){return t instanceof Ss?by(t,e):t instanceof As?$y(t,e):n}function jy(t,e){return t instanceof wl?function(r){return ic(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class El extends Wl{}class Ss extends Wl{constructor(e){super(),this.elements=e}}function by(t,e){const n=Hy(e);for(const r of t.elements)n.some(i=>$t(i,r))||n.push(r);return{arrayValue:{values:n}}}class As extends Wl{constructor(e){super(),this.elements=e}}function $y(t,e){let n=Hy(e);for(const r of t.elements)n=n.filter(i=>!$t(i,r));return{arrayValue:{values:n}}}class wl extends Wl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wp(t){return Ie(t.integerValue||t.doubleValue)}function Hy(t){return yh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ss&&i instanceof Ss||r instanceof As&&i instanceof As?Jr(r.elements,i.elements,$t):r instanceof wl&&i instanceof wl?$t(r.Pe,i.Pe):r instanceof El&&i instanceof El}(t.transform,e.transform)}class uI{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ql{}function Ky(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qy(t.key,sn.none()):new Ms(t.key,t.data,sn.none());{const n=t.data,r=vt.empty();let i=new ze(Fe.comparator);for(let s of e.fields)if(!i.has(s)){let l=n.field(s);l===null&&s.length>1&&(s=s.popLast(),l=n.field(s)),l===null?r.delete(s):r.set(s,l),i=i.add(s)}return new pr(t.key,r,new xt(i.toArray()),sn.none())}}function cI(t,e,n){t instanceof Ms?function(i,s,l){const a=i.value.clone(),u=Ip(i.fieldTransforms,s,l.transformResults);a.setAll(u),s.convertToFoundDocument(l.version,a).setHasCommittedMutations()}(t,e,n):t instanceof pr?function(i,s,l){if(!jo(i.precondition,s))return void s.convertToUnknownDocument(l.version);const a=Ip(i.fieldTransforms,s,l.transformResults),u=s.data;u.setAll(Wy(i)),u.setAll(a),s.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function es(t,e,n,r){return t instanceof Ms?function(s,l,a,u){if(!jo(s.precondition,l))return a;const f=s.value.clone(),d=Sp(s.fieldTransforms,u,l);return f.setAll(d),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof pr?function(s,l,a,u){if(!jo(s.precondition,l))return a;const f=Sp(s.fieldTransforms,u,l),d=l.data;return d.setAll(Wy(s)),d.setAll(f),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,l,a){return jo(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):a}(t,e,n)}function hI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=jy(r.transform,i||null);s!=null&&(n===null&&(n=vt.empty()),n.set(r.field,s))}return n||null}function Tp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jr(r,i,(s,l)=>aI(s,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ms extends ql{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class pr extends ql{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Wy(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ip(t,e,n){const r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],l=s.transform,a=e.data.field(s.field);r.set(s.field,lI(l,a,n[i]))}return r}function Sp(t,e,n){const r=new Map;for(const i of t){const s=i.transform,l=n.data.field(i.field);r.set(i.field,oI(s,l,e))}return r}class qy extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=es(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=es(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zy();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let a=this.applyToLocalView(l,s.mutatedFields);a=n.has(i.key)?null:a;const u=Ky(l,a);u!==null&&r.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&Jr(this.mutations,e.mutations,(n,r)=>Tp(n,r))&&Jr(this.baseMutations,e.baseMutations,(n,r)=>Tp(n,r))}}class Th{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return tI}();const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new Th(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,J;function gI(t){switch(t){default:return W();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function Qy(t){if(t===void 0)return hn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ae.OK:return L.OK;case Ae.CANCELLED:return L.CANCELLED;case Ae.UNKNOWN:return L.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return L.INTERNAL;case Ae.UNAVAILABLE:return L.UNAVAILABLE;case Ae.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ae.NOT_FOUND:return L.NOT_FOUND;case Ae.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ae.ABORTED:return L.ABORTED;case Ae.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ae.DATA_LOSS:return L.DATA_LOSS;default:return W()}}(J=Ae||(Ae={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new rr([4294967295,4294967295],0);function Ap(t){const e=yI().encode(t),n=new _y;return n.update(e),new Uint8Array(n.digest())}function Cp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rr([n,r],0),new rr([i,s],0)]}class Ih{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bi(`Invalid padding: ${n}`);if(r<0)throw new Bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=rr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(rr.fromNumber(r)));return i.compare(_I)===1&&(i=new rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ap(e),[r,i]=Cp(n);for(let s=0;s<this.hashCount;s++){const l=this.Ee(r,i,s);if(!this.de(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new Ih(s,i,n);return r.forEach(a=>l.insert(a)),l}insert(e){if(this.Ie===0)return;const n=Ap(e),[r,i]=Cp(n);for(let s=0;s<this.hashCount;s++){const l=this.Ee(r,i,s);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Fs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ql(q.min(),i,new _e(re),fn(),X())}}class Fs{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fs(r,n,X(),X(),X())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Gy{constructor(e,n){this.targetId=e,this.me=n}}class Yy{constructor(e,n,r=je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rp{constructor(){this.fe=0,this.ge=kp(),this.pe=je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=X(),n=X(),r=X();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Fs(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=kp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vI{constructor(e){this.Le=e,this.Be=new Map,this.ke=fn(),this.qe=Pp(),this.Qe=new _e(re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(oc(s))if(r===0){const l=new H(s.path);this.Ue(n,l,Xe.newNoDocument(l,q.min()))}else oe(r===1);else{const l=this.Ye(n);if(l!==r){const a=this.Ze(e),u=a?this.Xe(a,e,l):1;if(u!==0){this.je(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let l,a;try{l=cr(r).toUint8Array()}catch(u){if(u instanceof Ry)return Xr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ih(l,i,s)}catch(u){return Xr(u instanceof Bi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const l=this.Le.tt(),a=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,l)=>{const a=this.Je(l);if(a){if(s.current&&oc(a.target)){const u=new H(a.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,Xe.newNoDocument(u,e))}s.be&&(n.set(l,s.ve()),s.Ce())}});let r=X();this.qe.forEach((s,l)=>{let a=!0;l.forEachWhile(u=>{const f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,l)=>l.setReadTime(e));const i=new Ql(e,n,this.Qe,this.ke,r);return this.ke=fn(),this.qe=Pp(),this.Qe=new _e(re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Rp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Pp(){return new _e(H.comparator)}function kp(){return new _e(H.comparator)}const EI={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TI={and:"AND",or:"OR"};class II{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ac(t,e){return t.useProto3Json||bl(e)?e:{value:e}}function Tl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SI(t,e){return Tl(t,e.toTimestamp())}function bt(t){return oe(!!t),q.fromTimestamp(function(n){const r=zn(n);return new Ve(r.seconds,r.nanos)}(t))}function Sh(t,e){return uc(t,e).canonicalString()}function uc(t,e){const n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Jy(t){const e=we.fromString(t);return oe(r_(e)),e}function cc(t,e){return Sh(t.databaseId,e.path)}function Xa(t,e){const n=Jy(e);if(n.get(1)!==t.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(e_(n))}function Zy(t,e){return Sh(t.databaseId,e)}function AI(t){const e=Jy(t);return e.length===4?we.emptyPath():e_(e)}function hc(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function e_(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vp(t,e,n){return{name:cc(t,e),fields:n.value.mapValue.fields}}function CI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,d){return f.useProto3Json?(oe(d===void 0||typeof d=="string"),je.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),je.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,a=l&&function(f){const d=f.code===void 0?L.UNKNOWN:Qy(f.code);return new $(d,f.message||"")}(l);n=new Yy(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xa(t,r.document.name),s=bt(r.document.updateTime),l=r.document.createTime?bt(r.document.createTime):q.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,s,l,a),f=r.targetIds||[],d=r.removedTargetIds||[];n=new bo(f,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xa(t,r.document),s=r.readTime?bt(r.readTime):q.min(),l=Xe.newNoDocument(i,s),a=r.removedTargetIds||[];n=new bo([],a,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xa(t,r.document),s=r.removedTargetIds||[];n=new bo([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,l=new mI(i,s),a=r.targetId;n=new Gy(a,l)}}return n}function RI(t,e){let n;if(e instanceof Ms)n={update:Vp(t,e.key,e.value)};else if(e instanceof qy)n={delete:cc(t,e.key)};else if(e instanceof pr)n={update:Vp(t,e.key,e.data),updateMask:MI(e.fieldMask)};else{if(!(e instanceof fI))return W();n={verify:cc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const a=l.transform;if(a instanceof El)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ss)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof As)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wl)return{fieldPath:l.field.canonicalString(),increment:a.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:SI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function PI(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,s){let l=i.updateTime?bt(i.updateTime):bt(s);return l.isEqual(q.min())&&(l=bt(s)),new uI(l,i.transformResults||[])}(n,e))):[]}function kI(t,e){return{documents:[Zy(t,e.path)]}}function VI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zy(t,i);const s=function(f){if(f.length!==0)return n_(Ht.create(f,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const l=function(f){if(f.length!==0)return f.map(d=>function(v){return{field:Tr(v.field),direction:NI(v.dir)}}(d))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const a=ac(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:i}}function DI(t){let e=AI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(y){const v=t_(y);return v instanceof Ht&&Dy(v)?v.getFilters():[v]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(v=>function(k){return new vl(Ir(k.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let a=null;n.limit&&(a=function(y){let v;return v=typeof y=="object"?y.value:y,bl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(y){const v=!!y.before,R=y.values||[];return new _l(R,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,R=y.values||[];return new _l(R,v)}(n.endAt)),GT(e,i,l,s,a,"F",u,f)}function xI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function t_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ir(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ir(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ir(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ir(n.unaryFilter.field);return Pe.create(l,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(Ir(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ht.create(n.compositeFilter.filters.map(r=>t_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function NI(t){return EI[t]}function OI(t){return wI[t]}function LI(t){return TI[t]}function Tr(t){return{fieldPath:t.canonicalString()}}function Ir(t){return Fe.fromServerFormat(t.fieldPath)}function n_(t){return t instanceof Pe?function(n){if(n.op==="=="){if(gp(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NAN"}};if(mp(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gp(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NOT_NAN"}};if(mp(n.value))return{unaryFilter:{field:Tr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tr(n.field),op:OI(n.op),value:n.value}}}(t):t instanceof Ht?function(n){const r=n.getFilters().map(i=>n_(i));return r.length===1?r[0]:{compositeFilter:{op:LI(n.op),filters:r}}}(t):W()}function MI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function r_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n,r,i,s=q.min(),l=q.min(),a=je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Sn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.ct=e}}function UI(t){const e=DI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.un=new BI}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Un.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class BI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ti(0)}static kn(){return new ti(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.changes=new ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&es(r.mutation,i,xt.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){const i=er();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let l=zi();return s.forEach((a,u)=>{l=l.insert(a,u.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=er();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,a)=>{n.set(l,a)})})}computeViews(e,n,r,i){let s=fn();const l=Zi(),a=function(){return Zi()}();return n.forEach((u,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof pr)?s=s.insert(f.key,f):d!==void 0?(l.set(f.key,d.mutation.getFieldMask()),es(d.mutation,f,d.mutation.getFieldMask(),Ve.now())):l.set(f.key,xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((f,d)=>l.set(f,d)),n.forEach((f,d)=>{var y;return a.set(f,new bI(d,(y=l.get(f))!==null&&y!==void 0?y:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Zi();let i=new _e((l,a)=>l-a),s=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const a of l)a.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||xt.empty();d=a.applyToLocalView(f,d),r.set(u,d);const y=(i.get(a.batchId)||X()).add(u);i=i.insert(a.batchId,y)})}).next(()=>{const l=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),f=u.key,d=u.value,y=zy();d.forEach(v=>{if(!s.has(v)){const R=Ky(n.get(v),r.get(v));R!==null&&y.set(v,R),s=s.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return O.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return H.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(er());let a=-1,u=s;return l.next(f=>O.forEach(f,(d,y)=>(a<y.largestBatchId&&(a=y.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(v=>{u=u.insert(d,v)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,u,f,X())).next(d=>({batchId:a,changes:Uy(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=zi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let l=zi();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const f=function(y,v){return new $l(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(d=>{d.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(l=>{s.forEach((u,f)=>{const d=f.getKey();l.get(d)===null&&(l=l.insert(d,Xe.newInvalidDocument(d)))});let a=zi();return l.forEach((u,f)=>{const d=s.get(u);d!==void 0&&es(d.mutation,f,xt.empty(),Ve.now()),Kl(n,f)&&(a=a.insert(u,f))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bt(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:UI(i.bundledQuery),readTime:bt(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.overlays=new _e(H.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=er();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=er(),s=n.length+1,l=new H(n.child("")),a=this.overlays.getIteratorFrom(l);for(;a.hasNext();){const u=a.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _e((f,d)=>f-d);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=s.get(f.largestBatchId);d===null&&(d=er(),s=s.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const a=er(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,d)=>a.set(f,d)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new pI(n,r));let s=this.Ir.get(n);s===void 0&&(s=X(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this.Tr=new ze(De.Er),this.dr=new ze(De.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new De(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new De(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new we([])),r=new De(n,e),i=new De(n,e+1),s=[];return this.dr.forEachInRange([r,i],l=>{this.Vr(l),s.push(l.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new we([])),r=new De(n,e),i=new De(n,e+1);let s=X();return this.dr.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const n=new De(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class De{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||re(e.wr,n.wr)}static Ar(e,n){return re(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ze(De.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new dI(s,n,r,i);this.mutationQueue.push(l);for(const a of i)this.br=this.br.add(new De(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(l)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new De(n,0),i=new De(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],l=>{const a=this.Dr(l.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(re);return n.forEach(i=>{const s=new De(i,0),l=new De(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,l],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const l=new De(new H(s),0);let a=new ze(re);return this.br.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(a=a.add(u.wr)),!0)},l),O.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{const s=new De(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new De(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.Mr=e,this.docs=function(){return new _e(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let r=fn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xe.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fn();const l=n.path,a=new H(l.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||VT(kT(d),r)<=0||(i.has(d.key)||Kl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GI(this)}getSize(e){return O.resolve(this.size)}}class GI extends jI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.persistence=e,this.Nr=new ci(n=>_h(n),vh),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ah,this.targetCount=0,this.kr=ti.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ti(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((l,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(l),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ph(0),this.Kr=!1,this.Kr=!0,this.$r=new WI,this.referenceDelegate=e(this),this.Ur=new YI(this),this.indexManager=new zI,this.remoteDocumentCache=function(i){return new QI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new FI(n),this.Gr=new HI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){b("MemoryPersistence","Starting transaction:",e);const i=new JI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class JI extends xT{constructor(e){super(),this.currentSequenceNumber=e}}class Ch{constructor(e){this.persistence=e,this.Jr=new Ah,this.Yr=null}static Zr(e){return new Ch(e)}get Xr(){if(this.Yr)return this.Yr;throw W()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,q.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=X(),i=X();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return rw()?8:NT(tw())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(l=>{s.result=l}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(l=>{s.result=l})}).next(()=>{if(s.result)return;const l=new ZI;return this.Xi(e,n,l).next(a=>{if(s.result=a,this.zi)return this.es(e,n,l,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ni()<=ee.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",wr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ni()<=ee.DEBUG&&b("QueryEngine","Query:",wr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ni()<=ee.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",wr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jt(n))):O.resolve())}Yi(e,n){if(Ep(n))return O.resolve(null);let r=jt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lc(n,null,"F"),r=jt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=X(...s);return this.Ji.getDocuments(e,l).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.ts(n,a);return this.ns(n,f,l,u.readTime)?this.Yi(e,lc(n,null,"F")):this.rs(e,f,n,u)}))})))}Zi(e,n,r,i){return Ep(n)||i.isEqual(q.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const l=this.ts(n,s);return this.ns(n,l,r,i)?O.resolve(null):(Ni()<=ee.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wr(n)),this.rs(e,l,n,PT(i,-1)).next(a=>a))})}ts(e,n){let r=new ze(My(e));return n.forEach((i,s)=>{Kl(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ni()<=ee.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",wr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Un.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(l=>{s=s.insert(l.key,l)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new _e(re),this._s=new ci(s=>_h(s),vh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $I(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nS(t,e,n,r){return new tS(t,e,n,r)}async function i_(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],a=[];let u=X();for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(f=>({hs:f,removedBatchIds:l,addedBatchIds:a}))})})}function rS(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,f,d){const y=f.batch,v=y.keys();let R=O.resolve();return v.forEach(k=>{R=R.next(()=>d.getEntry(u,k)).next(D=>{const x=f.docVersions.get(k);oe(x!==null),D.version.compareTo(x)<0&&(y.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),d.addEntry(D)))})}),R.next(()=>a.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=X();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(u=u.add(a.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function s_(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function iS(t,e){const n=Q(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,y)=>{const v=i.get(y);if(!v)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,y)));let R=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(je.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):d.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(d.resumeToken,r)),i=i.insert(y,R),function(D,x,I){return D.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,R,d)&&a.push(n.Ur.updateTargetData(s,R))});let u=fn(),f=X();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(sS(s,l,e.documentUpdates).next(d=>{u=d.Ps,f=d.Is})),!r.isEqual(q.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(y=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>l.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,f)).next(()=>u)}).then(s=>(n.os=i,s))}function sS(t,e,n){let r=X(),i=X();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let l=fn();return n.forEach((a,u)=>{const f=s.get(a);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(q.min())?(e.removeEntry(a,u.readTime),l=l.insert(a,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),l=l.insert(a,u)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",u.version)}),{Ps:l,Is:i}})}function oS(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lS(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(l=>(i=new Sn(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function fc(t,e,n){const r=Q(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Ls(l))throw l;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Dp(t,e,n){const r=Q(t);let i=q.min(),s=X();return r.persistence.runTransaction("Execute query","readwrite",l=>function(u,f,d){const y=Q(u),v=y._s.get(d);return v!==void 0?O.resolve(y.os.get(v)):y.Ur.getTargetData(f,d)}(r,l,jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(l,e,n?i:q.min(),n?s:X())).next(a=>(aS(r,JT(e),a),{documents:a,Ts:s})))}function aS(t,e,n){let r=t.us.get(e)||q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class xp{constructor(){this.activeTargetIds=iI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uS{constructor(){this.so=new xp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao=null;function Ja(){return Ao===null?Ao=function(){return 268435456+Math.round(2147483648*Math.random())}():Ao++,"0x"+Ao.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe="WebChannelConnection";class dS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,l){const a=Ja(),u=this.xo(n,r.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,s,l),this.No(n,u,f,i).then(d=>(b("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Xr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,s,l,a){return this.Mo(n,r,i,s,l)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ai}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,l)=>n[l]=s),i&&i.headers.forEach((s,l)=>n[l]=s)}xo(n,r){const i=hS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Ja();return new Promise((l,a)=>{const u=new vy;u.setWithCredentials(!0),u.listenOnce(Ey.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zo.NO_ERROR:const d=u.getResponseJson();b(Qe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),l(d);break;case zo.TIMEOUT:b(Qe,`RPC '${e}' ${s} timed out`),a(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case zo.HTTP_ERROR:const y=u.getStatus();if(b(Qe,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const R=v==null?void 0:v.error;if(R&&R.status&&R.message){const k=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(I)>=0?I:L.UNKNOWN}(R.status);a(new $(k,R.message))}else a(new $(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(L.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{b(Qe,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);b(Qe,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)})}Bo(e,n,r){const i=Ja(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Iy(),a=Ty(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");b(Qe,`Creating RPC '${e}' stream ${i}: ${d}`,u);const y=l.createWebChannel(d,u);let v=!1,R=!1;const k=new fS({Io:x=>{R?b(Qe,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(v||(b(Qe,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),b(Qe,`RPC '${e}' stream ${i} sending:`,x),y.send(x))},To:()=>y.close()}),D=(x,I,E)=>{x.listen(I,C=>{try{E(C)}catch(N){setTimeout(()=>{throw N},0)}})};return D(y,Ui.EventType.OPEN,()=>{R||(b(Qe,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),D(y,Ui.EventType.CLOSE,()=>{R||(R=!0,b(Qe,`RPC '${e}' stream ${i} transport closed`),k.So())}),D(y,Ui.EventType.ERROR,x=>{R||(R=!0,Xr(Qe,`RPC '${e}' stream ${i} transport errored:`,x),k.So(new $(L.UNAVAILABLE,"The operation could not be completed")))}),D(y,Ui.EventType.MESSAGE,x=>{var I;if(!R){const E=x.data[0];oe(!!E);const C=E,N=C.error||((I=C[0])===null||I===void 0?void 0:I.error);if(N){b(Qe,`RPC '${e}' stream ${i} received error:`,N);const z=N.status;let U=function(_){const g=Ae[_];if(g!==void 0)return Qy(g)}(z),T=N.message;U===void 0&&(U=L.INTERNAL,T="Unknown error status: "+z+" with message "+N.message),R=!0,k.So(new $(U,T)),y.close()}else b(Qe,`RPC '${e}' stream ${i} received:`,E),k.bo(E)}}),D(a,wy.STAT_EVENT,x=>{x.stat===nc.PROXY?b(Qe,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===nc.NOPROXY&&b(Qe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Za(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){return new II(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&b("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n,r,i,s,l,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new o_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(hn(n.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pS extends l_{constructor(e,n,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=CI(this.serializer,e),r=function(s){if(!("targetChange"in s))return q.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?q.min():l.readTime?bt(l.readTime):q.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=hc(this.serializer),n.addTarget=function(s,l){let a;const u=l.target;if(a=oc(u)?{documents:kI(s,u)}:{query:VI(s,u)._t},a.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){a.resumeToken=Xy(s,l.resumeToken);const f=ac(s,l.expectedCount);f!==null&&(a.expectedCount=f)}else if(l.snapshotVersion.compareTo(q.min())>0){a.readTime=Tl(s,l.snapshotVersion.toTimestamp());const f=ac(s,l.expectedCount);f!==null&&(a.expectedCount=f)}return a}(this.serializer,e);const r=xI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=hc(this.serializer),n.removeTarget=e,this.a_(n)}}class mS extends l_{constructor(e,n,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=PI(e.writeResults,e.commitTime),r=bt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=hc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Mo(e,uc(n,r),i,s,l)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(L.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,a])=>this.connection.Lo(e,uc(n,r),i,l,a,s)).catch(l=>{throw l.name==="FirebaseError"?(l.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new $(L.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hn(n),this.D_=!1):b("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(l=>{r.enqueueAndForget(async()=>{mr(this)&&(b("RemoteStore","Restarting streams for network reachability change."),await async function(u){const f=Q(u);f.L_.add(4),await Us(f),f.q_.set("Unknown"),f.L_.delete(4),await Yl(f)}(this))})}),this.q_=new yS(r,i)}}async function Yl(t){if(mr(t))for(const e of t.B_)await e(!0)}async function Us(t){for(const e of t.B_)await e(!1)}function a_(t,e){const n=Q(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dh(n)?Vh(n):hi(n).r_()&&kh(n,e))}function Ph(t,e){const n=Q(t),r=hi(n);n.N_.delete(e),r.r_()&&u_(n,e),n.N_.size===0&&(r.r_()?r.o_():mr(n)&&n.q_.set("Unknown"))}function kh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hi(t).A_(e)}function u_(t,e){t.Q_.xe(e),hi(t).R_(e)}function Vh(t){t.Q_=new vI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),hi(t).start(),t.q_.v_()}function Dh(t){return mr(t)&&!hi(t).n_()&&t.N_.size>0}function mr(t){return Q(t).L_.size===0}function c_(t){t.Q_=void 0}async function vS(t){t.q_.set("Online")}async function ES(t){t.N_.forEach((e,n)=>{kh(t,e)})}async function wS(t,e){c_(t),Dh(t)?(t.q_.M_(e),Vh(t)):t.q_.set("Unknown")}async function TS(t,e,n){if(t.q_.set("Online"),e instanceof Yy&&e.state===2&&e.cause)try{await async function(i,s){const l=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,l),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Il(t,r)}else if(e instanceof bo?t.Q_.Ke(e):e instanceof Gy?t.Q_.He(e):t.Q_.We(e),!n.isEqual(q.min()))try{const r=await s_(t.localStore);n.compareTo(r)>=0&&await function(s,l){const a=s.Q_.rt(l);return a.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.N_.get(f);d&&s.N_.set(f,d.withResumeToken(u.resumeToken,l))}}),a.targetMismatches.forEach((u,f)=>{const d=s.N_.get(u);if(!d)return;s.N_.set(u,d.withResumeToken(je.EMPTY_BYTE_STRING,d.snapshotVersion)),u_(s,u);const y=new Sn(d.target,u,f,d.sequenceNumber);kh(s,y)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){b("RemoteStore","Failed to raise snapshot:",r),await Il(t,r)}}async function Il(t,e,n){if(!Ls(e))throw e;t.L_.add(1),await Us(t),t.q_.set("Offline"),n||(n=()=>s_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{b("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Yl(t)})}function h_(t,e){return e().catch(n=>Il(t,n,e))}async function Xl(t){const e=Q(t),n=Bn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IS(e);)try{const i=await oS(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,SS(e,i)}catch(i){await Il(e,i)}f_(e)&&d_(e)}function IS(t){return mr(t)&&t.O_.length<10}function SS(t,e){t.O_.push(e);const n=Bn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function f_(t){return mr(t)&&!Bn(t).n_()&&t.O_.length>0}function d_(t){Bn(t).start()}async function AS(t){Bn(t).p_()}async function CS(t){const e=Bn(t);for(const n of t.O_)e.m_(n.mutations)}async function RS(t,e,n){const r=t.O_.shift(),i=Th.from(r,e,n);await h_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Xl(t)}async function PS(t,e){e&&Bn(t).V_&&await async function(r,i){if(function(l){return gI(l)&&l!==L.ABORTED}(i.code)){const s=r.O_.shift();Bn(r).s_(),await h_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Xl(r)}}(t,e),f_(t)&&d_(t)}async function Op(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");const r=mr(n);n.L_.add(3),await Us(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Yl(n)}async function kS(t,e){const n=Q(t);e?(n.L_.delete(2),await Yl(n)):e||(n.L_.add(2),await Us(n),n.q_.set("Unknown"))}function hi(t){return t.K_||(t.K_=function(n,r,i){const s=Q(n);return s.w_(),new pS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:vS.bind(null,t),Ro:ES.bind(null,t),mo:wS.bind(null,t),d_:TS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Dh(t)?Vh(t):t.q_.set("Unknown")):(await t.K_.stop(),c_(t))})),t.K_}function Bn(t){return t.U_||(t.U_=function(n,r,i){const s=Q(n);return s.w_(),new mS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AS.bind(null,t),mo:PS.bind(null,t),f_:CS.bind(null,t),g_:RS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Xl(t)):(await t.U_.stop(),t.O_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const l=Date.now()+r,a=new xh(e,n,l,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nh(t,e){if(hn("AsyncQueue",`${e}: ${t}`),Ls(t))return new $(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=zi(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new $r(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $r;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.W_=new _e(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):W():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ni{constructor(e,n,r,i,s,l,a,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,s){const l=[];return n.forEach(a=>{l.push({type:0,doc:a})}),new ni(e,n,$r.emptySet(n),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DS{constructor(){this.queries=Mp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Q(n),s=i.queries;i.queries=Mp(),s.forEach((l,a)=>{for(const u of a.j_)u.onError(r)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function Mp(){return new ci(t=>Ly(t),Hl)}async function xS(t,e){const n=Q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new VS,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const a=Nh(l,`Initialization of query '${wr(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Oh(n)}async function NS(t,e){const n=Q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const l=s.j_.indexOf(e);l>=0&&(s.j_.splice(l,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OS(t,e){const n=Q(t);let r=!1;for(const i of e){const s=i.query,l=n.queries.get(s);if(l){for(const a of l.j_)a.X_(i)&&(r=!0);l.z_=i}}r&&Oh(n)}function LS(t,e,n){const r=Q(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Oh(t){t.Y_.forEach(e=>{e.next()})}var dc,Fp;(Fp=dc||(dc={})).ea="default",Fp.Cache="cache";class MS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ni(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.key=e}}class m_{constructor(e){this.key=e}}class FS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=X(),this.mutatedKeys=X(),this.Aa=My(e),this.Ra=new $r(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Lp,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,l=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,y)=>{const v=i.get(d),R=Kl(this.query,y)?y:null,k=!!v&&this.mutatedKeys.has(v.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let x=!1;v&&R?v.data.isEqual(R.data)?k!==D&&(r.track({type:3,doc:R}),x=!0):this.ga(v,R)||(r.track({type:2,doc:R}),x=!0,(u&&this.Aa(R,u)>0||f&&this.Aa(R,f)<0)&&(a=!0)):!v&&R?(r.track({type:0,doc:R}),x=!0):v&&!R&&(r.track({type:1,doc:v}),x=!0,(u||f)&&(a=!0)),x&&(R?(l=l.add(R),s=D?s.add(d):s.delete(d)):(l=l.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const d=this.query.limitType==="F"?l.last():l.first();l=l.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:l,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((d,y)=>function(R,k){const D=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return D(R)-D(k)}(d.type,y.type)||this.Aa(d.doc,y.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,f=u!==this.Ea;return this.Ea=u,l.length!==0||f?{snapshot:new ni(this.query,e.Ra,s,l,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=X(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new m_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new p_(r))}),n}ba(e){this.Ta=e.Ts,this.da=X();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ni.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class US{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zS{constructor(e){this.key=e,this.va=!1}}class BS{constructor(e,n,r,i,s,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new ci(a=>Ly(a),Hl),this.Ma=new Map,this.xa=new Set,this.Oa=new _e(H.comparator),this.Na=new Map,this.La=new Ah,this.Ba={},this.ka=new Map,this.qa=ti.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function jS(t,e,n=!0){const r=w_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await g_(r,e,n,!0),i}async function bS(t,e){const n=w_(t);await g_(n,e,!0,!1)}async function g_(t,e,n,r){const i=await lS(t.localStore,jt(e)),s=i.targetId,l=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $S(t,e,s,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&a_(t.remoteStore,i),a}async function $S(t,e,n,r,i){t.Ka=(y,v,R)=>async function(D,x,I,E){let C=x.view.ma(I);C.ns&&(C=await Dp(D.localStore,x.query,!1).then(({documents:T})=>x.view.ma(T,C)));const N=E&&E.targetChanges.get(x.targetId),z=E&&E.targetMismatches.get(x.targetId)!=null,U=x.view.applyChanges(C,D.isPrimaryClient,N,z);return zp(D,x.targetId,U.wa),U.snapshot}(t,y,v,R);const s=await Dp(t.localStore,e,!0),l=new FS(e,s.Ts),a=l.ma(s.documents),u=Fs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=l.applyChanges(a,t.isPrimaryClient,u);zp(t,n,f.wa);const d=new US(e,n,l);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function HS(t,e,n){const r=Q(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(l=>!Hl(l,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ph(r.remoteStore,i.targetId),pc(r,i.targetId)}).catch(Os)):(pc(r,i.targetId),await fc(r.localStore,i.targetId,!0))}async function KS(t,e){const n=Q(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ph(n.remoteStore,r.targetId))}async function WS(t,e,n){const r=ZS(t);try{const i=await function(l,a){const u=Q(l),f=Ve.now(),d=a.reduce((R,k)=>R.add(k.key),X());let y,v;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let k=fn(),D=X();return u.cs.getEntries(R,d).next(x=>{k=x,k.forEach((I,E)=>{E.isValidDocument()||(D=D.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,k)).next(x=>{y=x;const I=[];for(const E of a){const C=hI(E,y.get(E.key).overlayedDocument);C!=null&&I.push(new pr(E.key,C,Py(C.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,f,I,a)}).next(x=>{v=x;const I=x.applyToLocalDocumentSet(y,D);return u.documentOverlayCache.saveOverlays(R,x.batchId,I)})}).then(()=>({batchId:v.batchId,changes:Uy(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,a,u){let f=l.Ba[l.currentUser.toKey()];f||(f=new _e(re)),f=f.insert(a,u),l.Ba[l.currentUser.toKey()]=f}(r,i.batchId,n),await zs(r,i.changes),await Xl(r.remoteStore)}catch(i){const s=Nh(i,"Failed to persist write");n.reject(s)}}async function y_(t,e){const n=Q(t);try{const r=await iS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const l=n.Na.get(s);l&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?oe(l.va):i.removedDocuments.size>0&&(oe(l.va),l.va=!1))}),await zs(n,r,e)}catch(r){await Os(r)}}function Up(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,l)=>{const a=l.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(l,a){const u=Q(l);u.onlineState=a;let f=!1;u.queries.forEach((d,y)=>{for(const v of y.j_)v.Z_(a)&&(f=!0)}),f&&Oh(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qS(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let l=new _e(H.comparator);l=l.insert(s,Xe.newNoDocument(s,q.min()));const a=X().add(s),u=new Ql(q.min(),new Map,new _e(re),l,a);await y_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Lh(r)}else await fc(r.localStore,e,!1).then(()=>pc(r,e,n)).catch(Os)}async function QS(t,e){const n=Q(t),r=e.batch.batchId;try{const i=await rS(n.localStore,e);v_(n,r,null),__(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zs(n,i)}catch(i){await Os(i)}}async function GS(t,e,n){const r=Q(t);try{const i=await function(l,a){const u=Q(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return u.mutationQueue.lookupMutationBatch(f,a).next(y=>(oe(y!==null),d=y.keys(),u.mutationQueue.removeMutationBatch(f,y))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>u.localDocuments.getDocuments(f,d))})}(r.localStore,e);v_(r,e,n),__(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zs(r,i)}catch(i){await Os(i)}}function __(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function v_(t,e,n){const r=Q(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||E_(t,r)})}function E_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ph(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lh(t))}function zp(t,e,n){for(const r of n)r instanceof p_?(t.La.addReference(r.key,e),YS(t,r)):r instanceof m_?(b("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||E_(t,r.key)):W()}function YS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(b("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lh(t))}function Lh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(we.fromString(e)),r=t.qa.next();t.Na.set(r,new zS(n)),t.Oa=t.Oa.insert(n,r),a_(t.remoteStore,new Sn(jt(Eh(n.path)),r,"TargetPurposeLimboResolution",ph.oe))}}async function zs(t,e,n){const r=Q(t),i=[],s=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{l.push(r.Ka(u,e,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(f){i.push(f);const y=Rh.Wi(u.targetId,f);s.push(y)}}))}),await Promise.all(l),r.Ca.d_(i),await async function(u,f){const d=Q(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>O.forEach(f,v=>O.forEach(v.$i,R=>d.persistence.referenceDelegate.addReference(y,v.targetId,R)).next(()=>O.forEach(v.Ui,R=>d.persistence.referenceDelegate.removeReference(y,v.targetId,R)))))}catch(y){if(!Ls(y))throw y;b("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const R=d.os.get(v),k=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(k);d.os=d.os.insert(v,D)}}}(r.localStore,s))}async function XS(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());const r=await i_(n.localStore,e);n.currentUser=e,function(s,l){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(L.CANCELLED,l))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zs(n,r.hs)}}function JS(t,e){const n=Q(t),r=n.Na.get(e);if(r&&r.va)return X().add(r.key);{let i=X();const s=n.Ma.get(e);if(!s)return i;for(const l of s){const a=n.Fa.get(l);i=i.unionWith(a.view.Va)}return i}}function w_(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qS.bind(null,e),e.Ca.d_=OS.bind(null,e.eventManager),e.Ca.$a=LS.bind(null,e.eventManager),e}function ZS(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GS.bind(null,e),e}class Sl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nS(this.persistence,new eS,e.initialUser,this.serializer)}Ga(e){return new XI(Ch.Zr,this.serializer)}Wa(e){return new uS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sl.provider={build:()=>new Sl};class mc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Up(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XS.bind(null,this.syncEngine),await kS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DS}()}createDatastore(e){const n=Gl(e.databaseInfo.databaseId),r=function(s){return new dS(s)}(e.databaseInfo);return function(s,l,a,u){return new gS(s,l,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,l,a){return new _S(r,i,s,l,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Up(this.syncEngine,n,0),function(){return Np.D()?new Np:new cS}())}createSyncEngine(e,n){return function(i,s,l,a,u,f,d){const y=new BS(i,s,l,a,u,f);return d&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Q(i);b("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Us(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mc.provider={build:()=>new mc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=Ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async l=>{b("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(b("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eu(t,e){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await i_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Bp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await n1(t);b("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Op(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Op(e.remoteStore,i)),t._onlineComponents=e}async function n1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{await eu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xr("Error using user provided cache. Falling back to memory cache: "+n),await eu(t,new Sl)}}else b("FirestoreClient","Using default OfflineComponentProvider"),await eu(t,new Sl);return t._offlineComponents}async function T_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),await Bp(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),await Bp(t,new mc))),t._onlineComponents}function r1(t){return T_(t).then(e=>e.syncEngine)}async function i1(t){const e=await T_(t),n=e.eventManager;return n.onListen=jS.bind(null,e.syncEngine),n.onUnlisten=HS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KS.bind(null,e.syncEngine),n}function s1(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,a,u,f){const d=new e1({next:v=>{d.Za(),l.enqueueAndForget(()=>NS(s,y));const R=v.docs.has(a);!R&&v.fromCache?f.reject(new $(L.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&v.fromCache&&u&&u.source==="server"?f.reject(new $(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new MS(Eh(a.path),d,{includeMetadataChanges:!0,_a:!0});return xS(s,y)}(await i1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function l1(t,e,n,r){if(e===!0&&r===!0)throw new $(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bp(t){if(!H.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function Cs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(t);throw new $(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $p({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $p(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vT;switch(r.type){case"firstParty":return new IT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jp.get(n);r&&(b("ComponentProvider","Removing Datastore"),jp.delete(n),r.terminate())}(this),Promise.resolve()}}function a1(t,e,n,r={}){var i;const s=(t=Cs(t,Fh))._getSettings(),l=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==l&&Xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:l,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ge.MOCK_USER;else{a=ew(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ge(f)}t._authCredentials=new ET(new Sy(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uh(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Rs extends Uh{constructor(e,n,r){super(e,n,Eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new H(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function Hp(t,e,...n){if(t=pl(t),arguments.length===1&&(e=Ay.newId()),o1("doc","path",e),t instanceof Fh){const r=we.fromString(e,...n);return bp(r),new Tt(t,null,new H(r))}{if(!(t instanceof Tt||t instanceof Rs))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return bp(r),new Tt(t.firestore,t instanceof Rs?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new o_(this,"async_queue_retry"),this.Vu=()=>{const r=Za();r&&b("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Za();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Za();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ln;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ls(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(l){let a=l.message||"";return l.stack&&(a=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),a}(r);throw hn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=xh.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&W()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class zh extends Fh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Kp,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kp(e),this._firestoreClient=void 0,await e}}}function u1(t,e){const n=typeof t=="object"?t:uT(),r=typeof t=="string"?t:"(default)",i=sT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=J0("firestore");s&&a1(i,...s)}return i}function S_(t){if(t._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c1(t),t._firestoreClient}function c1(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,f,d){return new MT(a,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,I_(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new t1(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(je.fromBase64String(e))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ri(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=/^__.*__$/;class f1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ms(e,this.data,n,this.fieldTransforms)}}function C_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class $h{constructor(e,n,r,i,s,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $h(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Al(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(C_(this.Cu)&&h1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class d1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gl(e)}Qu(e,n,r,i=!1){return new $h({Cu:e,methodName:n,qu:r,path:Fe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p1(t){const e=t._freezeSettings(),n=Gl(t._databaseId);return new d1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function m1(t,e,n,r,i,s={}){const l=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);V_("Data must be an object, but it was:",l,r);const a=P_(r,l);let u,f;if(s.merge)u=new xt(l.fieldMask),f=l.fieldTransforms;else if(s.mergeFields){const d=[];for(const y of s.mergeFields){const v=g1(e,y,n);if(!l.contains(v))throw new $(L.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);_1(d,v)||d.push(v)}u=new xt(d),f=l.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,f=l.fieldTransforms;return new f1(new vt(a),u,f)}function R_(t,e){if(k_(t=pl(t)))return V_("Unsupported field value:",e,t),P_(t,e);if(t instanceof A_)return function(r,i){if(!C_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let l=0;for(const a of r){let u=R_(a,i.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),l++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=pl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ve.fromDate(r);return{timestampValue:Tl(i.serializer,s)}}if(r instanceof Ve){const s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tl(i.serializer,s)}}if(r instanceof jh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ri)return{bytesValue:Xy(i.serializer,r._byteString)};if(r instanceof Tt){const s=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(s))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bh)return function(l,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return wh(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Mh(r)}`)}(t,e)}function P_(t,e){const n={};return Cy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(t,(r,i)=>{const s=R_(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function k_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof jh||t instanceof ri||t instanceof Tt||t instanceof A_||t instanceof bh)}function V_(t,e,n){if(!k_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Mh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function g1(t,e,n){if((e=pl(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return D_(t,e);throw Al("Field path arguments must be of type string or ",t,!1,void 0,n)}const y1=new RegExp("[~\\*/\\[\\]]");function D_(t,e,n){if(e.search(y1)>=0)throw Al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw Al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Al(t,e,n,r,i){const s=r&&!r.isEmpty(),l=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||l)&&(u+=" (found",s&&(u+=` in field ${r}`),l&&(u+=` in document ${i}`),u+=")"),new $(L.INVALID_ARGUMENT,a+t+u)}function _1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(N_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v1 extends x_{data(){return super.data()}}function N_(t,e){return typeof e=="string"?D_(t,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}class E1{convertValue(e,n="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>Ie(l.doubleValue));return new bh(s)}convertGeoPoint(e){return new jh(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ws(e));default:return null}}convertTimestamp(e){const n=zn(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);oe(r_(r));const i=new Ts(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||hn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class O_ extends x_{constructor(e,n,r,i,s,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new I1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(N_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class I1 extends O_{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){t=Cs(t,Tt);const e=Cs(t.firestore,zh);return s1(S_(e),t._key).then(n=>R1(e,t,n))}class A1 extends E1{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Wp(t,e,n){t=Cs(t,Tt);const r=Cs(t.firestore,zh),i=w1(t.converter,e);return C1(r,[m1(p1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sn.none())])}function C1(t,e){return function(r,i){const s=new Ln;return r.asyncQueue.enqueueAndForget(async()=>WS(await r1(r),i,s)),s.promise}(S_(t),e)}function R1(t,e,n){const r=n.docs.get(e._key),i=new A1(t);return new O_(t,i,e._key,r,new T1(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ai=i})(aT),gl(new _s("firestore",(r,{instanceIdentifier:i,options:s})=>{const l=r.getProvider("app").getImmediate(),a=new zh(new wT(r.getProvider("auth-internal")),new AT(r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(f.options.projectId,d)}(l,i),l);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),br(cp,"4.7.3",e),br(cp,"4.7.3","esm2017")})();var P1="firebase",k1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(P1,k1,"app");const tu={apiKey:"AIzaSyAK1vMHOprdSmVhtCDfC24I1Gz0vmVxUag",authDomain:"bulletpoints-c92cb.firebaseapp.com",projectId:"bulletpoints-c92cb",storageBucket:"bulletpoints-c92cb.firebasestorage.app",messagingSenderId:"648243282636",appId:"1:648243282636:web:0a78fa4dd5e46491a93869"};let ji=null;if(tu.apiKey&&tu.apiKey!=="PASTE_YOUR_API_KEY_HERE")try{const t=my(tu);ji=u1(t),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}else console.warn("MinFlow: Firebase config is missing or using placeholders. Falling back to local storage.");const Ps=()=>Math.random().toString(36).substr(2,9),en="root",qp=()=>{const t="minflow-doc-id";let e=localStorage.getItem(t);return e||(e=Ps(),localStorage.setItem(t,e)),e},Co=()=>{const t=Ps();return{items:{[en]:{id:en,text:"Home",children:[t],isCompleted:!1,collapsed:!1},[t]:{id:t,text:"Welcome to MinFlow! Data is now saved to Firebase.",children:[],isCompleted:!1,collapsed:!1}},rootId:en}},nu=(t,e)=>{for(const n in t)if(t[n].children.includes(e))return n;return null},Qp=(t,e,n)=>{if(e===n)return!0;const r=t[n];if(!r||r.children.length===0)return!1;const i=[...r.children];for(;i.length>0;){const s=i.pop();if(s===e)return!0;const l=t[s];l&&i.push(...l.children)}return!1},L_=(t,e,n=[])=>{const r=t[e];if(!r)return n;for(const i of r.children){n.push(i);const s=t[i];s&&!s.collapsed&&s.children.length>0&&L_(t,i,n)}return n},M_=(t,e)=>{const{items:n}=t;switch(e.type){case"LOAD_STATE":return e.state;case"ADD_ITEM":{const{afterId:r,parentId:i,newId:s}=e,l=s||Ps(),a=n[i];if(!a)return t;const u={...n},f={id:l,text:"",children:[],isCompleted:!1,collapsed:!1};u[l]=f;const d=[...a.children];if(r){const y=d.indexOf(r);y!==-1?d.splice(y+1,0,l):d.push(l)}else d.unshift(l);return u[i]={...a,children:d},{...t,items:u}}case"UPDATE_TEXT":{const{id:r,text:i}=e;return n[r]?{...t,items:{...n,[r]:{...n[r],text:i}}}:t}case"DELETE":{const{id:r,parentId:i}=e;if(!n[i])return t;const s={...n},l=s[i];s[i]={...l,children:l.children.filter(u=>u!==r)};const a=u=>{const f=s[u];f&&(f.children.forEach(a),delete s[u])};return a(r),{...t,items:s}}case"INDENT":{const{id:r,parentId:i}=e,s=n[i];if(!s)return t;const l=s.children.indexOf(r);if(l<=0)return t;const a=s.children[l-1],u=n[a],f={...n};return f[i]={...s,children:s.children.filter(d=>d!==r)},f[a]={...u,children:[...u.children,r],collapsed:!1},{...t,items:f}}case"OUTDENT":{const{id:r,parentId:i}=e,s=nu(n,i);if(!s)return t;const l=n[s],a=n[i],u={...n},f=l.children.indexOf(i);u[i]={...a,children:a.children.filter(y=>y!==r)};const d=[...l.children];return d.splice(f+1,0,r),u[s]={...l,children:d},{...t,items:u}}case"TOGGLE_COLLAPSE":{const{id:r}=e;return{...t,items:{...n,[r]:{...n[r],collapsed:!n[r].collapsed}}}}case"MOVE":{const{dragId:r,targetId:i,position:s}=e;return M_(t,{type:"MOVE_ITEMS",dragIds:[r],targetId:i,position:s})}case"MOVE_ITEMS":{const{dragIds:r,targetId:i,position:s}=e,l=r.filter(u=>!r.some(f=>f!==u&&Qp(n,f,u)));if(l.length===0)return t;for(const u of l)if(u===i||Qp(n,u,i))return t;const a={...n};if(l.forEach(u=>{const f=nu(a,u);if(f){const d=a[f];a[f]={...d,children:d.children.filter(y=>y!==u)}}}),s==="inside"){const u=a[i];a[i]={...u,children:[...u.children,...l],collapsed:!1}}else{const u=nu(a,i);if(u){const f=a[u],d=f.children.indexOf(i),y=[...f.children];s==="before"?y.splice(d,0,...l):y.splice(d+1,0,...l),a[u]={...f,children:y}}}return{...t,items:a}}default:return t}},V1=(t,e)=>{var n;switch(e.type){case"UNDO":{if(t.past.length===0)return t;const r=t.past[t.past.length-1];return{past:t.past.slice(0,t.past.length-1),present:r,future:[t.present,...t.future],lastAction:void 0}}case"REDO":{if(t.future.length===0)return t;const r=t.future[0],i=t.future.slice(1);return{past:[...t.past,t.present],present:r,future:i,lastAction:void 0}}case"LOAD_STATE":return{past:[],present:e.state,future:[],lastAction:void 0};default:{const r=M_(t.present,e);return r===t.present?t:e.type==="UPDATE_TEXT"&&((n=t.lastAction)==null?void 0:n.type)==="UPDATE_TEXT"&&t.lastAction.id===e.id?{...t,present:r,lastAction:e,future:[]}:{past:[...t.past,t.present],present:r,future:[],lastAction:e}}}},Gp="minflow-local-data",D1=()=>{const[t,e]=ie.useState(!0),n=ie.useRef(!0),[r,i]=ie.useReducer(V1,null,()=>({past:[],present:Co(),future:[]})),{present:s}=r;ie.useEffect(()=>{(async()=>{if(!ji){const I=localStorage.getItem(Gp);if(I)try{i({type:"LOAD_STATE",state:JSON.parse(I)})}catch(E){console.error("Failed to parse local data",E),i({type:"LOAD_STATE",state:Co()})}else i({type:"LOAD_STATE",state:Co()});e(!1),n.current=!1;return}try{const I=qp(),E=Hp(ji,"minflow-data",I),C=await S1(E);if(C.exists()){const N=C.data();i({type:"LOAD_STATE",state:N})}else{const N=Co();await Wp(E,N),i({type:"LOAD_STATE",state:N})}}catch(I){console.error("Error loading data from Firebase:",I)}finally{e(!1),setTimeout(()=>{n.current=!1},500)}})()},[]),ie.useEffect(()=>{if(t||n.current)return;const I=setTimeout(async()=>{if(localStorage.setItem(Gp,JSON.stringify(s)),ji)try{const E=qp();await Wp(Hp(ji,"minflow-data",E),s)}catch(E){console.error("Error saving to Firebase:",E)}},1e3);return()=>clearTimeout(I)},[s,t]);const l=ie.useCallback((x,I,E)=>{i({type:"ADD_ITEM",parentId:x,afterId:I,newId:E})},[]),a=ie.useCallback((x,I)=>{i({type:"UPDATE_TEXT",id:x,text:I})},[]),u=ie.useCallback((x,I)=>{i({type:"DELETE",id:x,parentId:I})},[]),f=ie.useCallback((x,I)=>{i({type:"INDENT",id:x,parentId:I})},[]),d=ie.useCallback((x,I)=>{i({type:"OUTDENT",id:x,parentId:I})},[]),y=ie.useCallback(x=>{i({type:"TOGGLE_COLLAPSE",id:x})},[]),v=ie.useCallback((x,I,E)=>{i({type:"MOVE",dragId:x,targetId:I,position:E})},[]),R=ie.useCallback((x,I,E)=>{i({type:"MOVE_ITEMS",dragIds:x,targetId:I,position:E})},[]),k=ie.useCallback(()=>{i({type:"UNDO"})},[]),D=ie.useCallback(()=>{i({type:"REDO"})},[]);return{loading:t,state:s,items:s.items,addItem:l,updateText:a,deleteItem:u,indent:f,outdent:d,toggleCollapse:y,moveItem:v,moveItems:R,undo:k,redo:D}},F_=({id:t,items:e,parentId:n,focusedId:r,selectedIds:i,setFocusedId:s,onKeyDown:l,onUpdateText:a,onZoom:u,onToggleCollapse:f,onMoveItems:d,onSelect:y})=>{const v=e[t],R=ie.useRef(null),k=ie.useRef(null),[D,x]=ie.useState(null),I=i.has(t);ie.useEffect(()=>{r===t&&R.current&&(R.current.focus({preventScroll:!0}),E())},[r,t]);const E=()=>{R.current&&(R.current.style.height="auto",R.current.style.height=`${R.current.scrollHeight}px`)};if(ie.useLayoutEffect(()=>{E()},[v.text]),!v)return null;const C=v.children.length>0,N=g=>{if(g.stopPropagation(),g.shiftKey||g.metaKey||g.ctrlKey||g.altKey){y(t,g.shiftKey,g.metaKey||g.ctrlKey,g.altKey);return}u(t)},z=g=>{if(R.current){if(g.key==="Enter"&&g.shiftKey){g.stopPropagation();return}if(g.key==="ArrowUp"&&R.current.selectionStart>0){g.stopPropagation();return}if(g.key==="ArrowDown"&&R.current.selectionStart<R.current.value.length){g.stopPropagation();return}}l(g,t,n)},U=g=>{g.stopPropagation();let S=[t];if(I&&(S=Array.from(i)),g.dataTransfer.setData("application/minflow-ids",JSON.stringify(S)),g.dataTransfer.effectAllowed="move",S.length>1){const A=document.createElement("div");A.textContent=`${S.length} items`,A.className="bg-gray-800 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",A.style.position="absolute",A.style.top="-1000px",document.body.appendChild(A),g.dataTransfer.setDragImage(A,0,0),setTimeout(()=>document.body.removeChild(A),0)}else if(k.current){const A=k.current.cloneNode(!0);A.style.position="absolute",A.style.top="-1000px",A.style.left="-1000px",A.style.width=`${Math.min(k.current.offsetWidth,600)}px`,A.style.backgroundColor="transparent",A.style.pointerEvents="none",I||A.classList.remove("bg-blue-50"),A.querySelectorAll(".drop-indicator").forEach(be=>be.remove()),document.body.appendChild(A),g.dataTransfer.setDragImage(A,20,15),setTimeout(()=>{document.body.removeChild(A)},0)}},T=g=>{if(g.preventDefault(),g.stopPropagation(),!k.current)return;const S=k.current.getBoundingClientRect(),A=g.clientY-S.top,w=S.height;A<w*.25?x("before"):A>w*.75?x("after"):x("inside")},m=g=>{g.preventDefault(),k.current&&!k.current.contains(g.relatedTarget)&&x(null)},_=g=>{g.preventDefault(),g.stopPropagation();const S=g.dataTransfer.getData("application/minflow-ids");if(S&&D)try{const A=JSON.parse(S);A.length>0&&d(A,t,D)}catch(A){console.error("Failed to parse drag data",A)}x(null)};return Z.jsxs("div",{className:"relative",children:[Z.jsxs("div",{ref:k,className:`flex items-start py-1 group transition-colors duration-100 relative ${I?"bg-blue-50":""}`,onDragOver:T,onDragLeave:m,onDrop:_,children:[D==="before"&&Z.jsx("div",{className:"drop-indicator absolute -top-0.5 left-0 right-0 h-1 bg-black rounded-sm z-30 pointer-events-none"}),D==="after"&&Z.jsx("div",{className:"drop-indicator absolute -bottom-0.5 left-0 right-0 h-1 bg-black rounded-sm z-30 pointer-events-none"}),D==="inside"&&Z.jsx("div",{className:"drop-indicator absolute -bottom-0.5 left-8 right-0 h-1 bg-black rounded-sm z-30 pointer-events-none"}),Z.jsxs("div",{className:"relative flex-shrink-0 w-6 h-6 flex items-center justify-center -ml-2 mr-1 cursor-move group/bullet",draggable:!0,onDragStart:U,children:[Z.jsx("div",{className:"absolute inset-0 rounded-full cursor-pointer z-20 transform scale-150",onClick:N,title:"Click to zoom. Shift+Click to select range. Cmd+Click to toggle select. Alt+Click to collapse. Drag to move."}),Z.jsx("div",{className:"absolute inset-0 rounded-full bg-gray-200 opacity-0 group-hover/bullet:opacity-100 transition-opacity duration-200 transform scale-75 pointer-events-none"}),Z.jsx("div",{className:`z-10 rounded-full transition-all duration-200 pointer-events-none ${v.collapsed&&C?"w-2 h-2 bg-gray-500 ring-2 ring-gray-300":"w-1.5 h-1.5 bg-gray-400 group-hover/bullet:bg-gray-600"}`})]}),Z.jsx("textarea",{ref:R,value:v.text,onChange:g=>a(t,g.target.value),onKeyDown:z,onFocus:()=>s(t),rows:1,className:"flex-grow bg-transparent border-none outline-none text-gray-800 text-base leading-tight placeholder-gray-300 font-medium w-full resize-none overflow-hidden block py-[2px]",style:{minHeight:"24px"},placeholder:""})]}),C&&!v.collapsed&&Z.jsx("div",{className:"ml-5 border-l border-gray-200 pl-2",children:v.children.map(g=>Z.jsx(F_,{id:g,items:e,parentId:t,focusedId:r,selectedIds:i,setFocusedId:s,onKeyDown:l,onUpdateText:a,onZoom:u,onToggleCollapse:f,onMoveItems:d,onSelect:y},g))})]})},x1=({items:t,currentRootId:e,rootId:n,onNavigate:r})=>{const i=[];let s=e;const l=a=>{for(const u in t)if(t[u].children.includes(a))return u;return null};for(;s&&s!==n&&t[s];)i.unshift(t[s]),s=l(s);return t[n]&&i.unshift(t[n]),Z.jsx("nav",{className:"flex items-center text-lg mb-6 text-gray-500",children:i.map((a,u)=>Z.jsxs(Ec.Fragment,{children:[u>0&&Z.jsx("span",{className:"mx-2 text-gray-300",children:"/"}),Z.jsx("button",{onClick:()=>r(a.id),className:`hover:text-gray-800 transition-colors duration-200 ${a.id===e?"font-bold text-gray-900":"cursor-pointer"}`,children:a.id===n?"Home":a.text||"Untitled"})]},a.id))})},N1=()=>{const{loading:t,items:e,addItem:n,updateText:r,deleteItem:i,indent:s,outdent:l,toggleCollapse:a,moveItems:u,undo:f,redo:d}=D1(),[y,v]=ie.useState(en),[R,k]=ie.useState(null),[D,x]=ie.useState(new Set),[I,E]=ie.useState(null);ie.useEffect(()=>{const _=g=>{(g.metaKey||g.ctrlKey)&&g.key.toLowerCase()==="z"&&(g.preventDefault(),g.shiftKey?d():f())};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[f,d]);const C=Ec.useMemo(()=>L_(e,y),[e,y]),N=(_,g,S,A)=>{if(A){a(_);return}const w=new Set(S?D:[]);if(g&&(I||R)){const be=I||R,At=C.indexOf(be),Kt=C.indexOf(_);if(At!==-1&&Kt!==-1){const Ct=Math.min(At,Kt),B=Math.max(At,Kt);for(let K=Ct;K<=B;K++)w.add(C[K])}else w.add(_)}else S&&w.has(_)?w.delete(_):w.add(_);x(w),E(_)},z=(_,g,S)=>{if(!_.shiftKey&&!_.metaKey&&!_.ctrlKey&&D.size>0&&_.key.startsWith("Arrow")&&x(new Set),_.key==="Enter"){if(_.preventDefault(),_.metaKey||_.ctrlKey){const w=C.indexOf(g);w>0?k(C[w-1]):S!==y&&k(S),i(g,S);return}const A=Ps();n(S,g,A),k(A),x(new Set)}else if(_.key==="Tab")_.preventDefault(),_.shiftKey?l(g,S):s(g,S);else if(_.key==="Backspace"){const A=e[g];if(A&&A.text===""&&A.children.length===0){_.preventDefault();const w=C.indexOf(g);w>0?k(C[w-1]):S!==y&&k(S),i(g,S)}}else if(_.key==="ArrowUp"){_.preventDefault();const A=C.indexOf(g);A>0?k(C[A-1]):A===0&&S!==y&&S!==en&&k(S)}else if(_.key==="ArrowDown"){_.preventDefault();const A=C.indexOf(g);A!==-1&&A<C.length-1&&k(C[A+1])}},U=_=>{v(_),k(null),x(new Set)},T=e[y];ie.useEffect(()=>{!e[y]&&y!==en&&v(en)},[e,y]);const m=()=>{x(new Set)};return t?Z.jsx("div",{className:"flex items-center justify-center h-full",children:Z.jsx("div",{className:"text-gray-400 text-lg animate-pulse",children:"Loading MinFlow..."})}):Z.jsxs("div",{className:"max-w-3xl mx-auto px-8 py-12 h-full flex flex-col",onClick:m,children:[Z.jsx(x1,{items:e,currentRootId:y,rootId:en,onNavigate:U}),Z.jsx("div",{className:"flex-1 overflow-y-auto pb-20 pl-4",children:T&&Z.jsxs("div",{className:"",children:[y!==en&&Z.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-900 outline-none",onClick:_=>{_.stopPropagation(),k(y)},children:T.text}),T.children.length===0&&Z.jsx("div",{className:"text-gray-400 italic mt-4 cursor-text",onClick:_=>{_.stopPropagation();const g=Ps();n(y,null,g),k(g)},children:"Empty list. Press Enter to add an item."}),T.children.map(_=>Z.jsx(F_,{id:_,items:e,parentId:y,focusedId:R,selectedIds:D,setFocusedId:k,onKeyDown:z,onUpdateText:r,onZoom:U,onToggleCollapse:a,onMoveItems:u,onSelect:N},_))]})}),Z.jsxs("div",{className:"fixed bottom-4 right-4 text-xs text-gray-400 pointer-events-none text-right",children:[Z.jsx("p",{children:"Shift+Click bullet to range select"}),Z.jsx("p",{children:"Cmd/Ctrl+Click bullet to toggle select"}),Z.jsx("p",{children:"Alt+Click bullet to collapse/expand"}),Z.jsx("p",{children:"Drag multiple selected items to move"}),Z.jsx("p",{children:"Cmd/Ctrl+Enter to delete item"}),Z.jsx("p",{children:"Cmd/Ctrl+Z to undo, Shift+Cmd/Ctrl+Z to redo"})]})]})},U_=document.getElementById("root");if(!U_)throw new Error("Could not find root element to mount to");const O1=ru.createRoot(U_);O1.render(Z.jsx(Ec.StrictMode,{children:Z.jsx(N1,{})}));
